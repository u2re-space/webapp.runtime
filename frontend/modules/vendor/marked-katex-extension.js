import{k as e}from"./katex.js";const n=/^(\${1,2})(?!\$)((?:\\.|[^\\\n])*?(?:\\.|[^\\\n\$]))\1(?=[\s?!\.,:？！。，：]|$)/,t=/^(\${1,2})(?!\$)((?:\\.|[^\\\n])*?(?:\\.|[^\\\n\$]))\1/,r=/^(\${1,2})\n((?:\\[^]|[^\\])+?)\n\1(?:\n|$)/;function i(e={}){return{extensions:[o(e,a(e,!1)),(n=a(e,!0),{name:"blockKatex",level:"block",tokenizer(e,n){const t=e.match(r);if(t)return{type:"blockKatex",raw:t[0],text:t[2].trim(),displayMode:2===t[1].length}},renderer:n})]};var n}function a(n,t){return r=>e.renderToString(r.text,{...n,displayMode:r.displayMode})+(t?"\n":"")}function o(e,r){const i=e&&e.nonStandard,a=i?t:n;return{name:"inlineKatex",level:"inline",start(e){let n,t=e;for(;t;){if(n=t.indexOf("$"),-1===n)return;if((i?n>-1:0===n||" "===t.charAt(n-1))&&t.substring(n).match(a))return n;t=t.substring(n+1).replace(/^\$+/,"")}},tokenizer(e,n){const t=e.match(a);if(t)return{type:"inlineKatex",raw:t[0],text:t[2].trim(),displayMode:2===t[1].length}},renderer:r}}export{i as m};