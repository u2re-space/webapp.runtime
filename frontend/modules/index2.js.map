{"version":3,"file":"index2.js","sources":["../../../../modules/projects/core.ts/src/utils/WRef.ts","../../../../modules/projects/core.ts/src/utils/Convert.ts","../../../../modules/projects/core.ts/src/utils/GridItemUtils.ts"],"sourcesContent":["//\nconst existsMap = new WeakMap<any, WR<any>>();\n\n//\nexport type WRef<T> = {\n    [K in keyof T]: T[K] extends (...args: infer A) => infer R\n        ? (...args: A) => WRef<R> | null\n        : T[K] | null;\n};\n\n//\nclass WeakRefProxyHandler<T extends object|Function> implements ProxyHandler<object> {\n    private _deref(target): T | undefined { return (target instanceof WeakRef || typeof target?.deref == \"function\") ? (target?.deref?.()) : target; } // @ts-ignore\n\n    //\n    get(tg: object, prop: PropertyKey, _receiver: any): any {\n        const obj = this._deref(tg), value = (obj as any)?.[prop];\n\n        // libraries specific (LUR.E/object.ts)\n        if ((prop == \"element\" || prop == \"value\") && obj && (value == null || !(prop in obj))) { return obj; }\n        // wrap-away deref from side-effects\n        if (prop == \"deref\") { return ()=>this._deref(tg); };\n        // if function, workaround callable\n        if (typeof value == 'function') {\n            return (...args: any[]) => {\n                const realObj = this._deref(tg);\n                return (realObj as any)?.[prop]?.(...args);\n            };\n        };\n        return value;\n    }\n\n    set(tg: object, prop: PropertyKey, value: any, _receiver: any): boolean {\n        const obj = this._deref(tg); if (obj) return Reflect.set(obj, prop, value);\n        return true;\n    }\n\n    has(tg: object, prop: PropertyKey): boolean {\n        const obj = this._deref(tg); if (!obj) return false;\n        return prop in obj;\n    }\n\n    ownKeys(tg: object): ArrayLike<string | symbol> {\n        const obj = this._deref(tg); if (!obj) return [];\n        return Reflect.ownKeys(obj);\n    }\n\n    getOwnPropertyDescriptor(tg: object, prop: PropertyKey): PropertyDescriptor | undefined {\n        const obj = this._deref(tg); if (!obj) return undefined;\n        return Object.getOwnPropertyDescriptor(obj, prop);\n    }\n\n    deleteProperty(tg: object, prop: PropertyKey): boolean {\n        const obj = this._deref(tg); if (!obj) return true;\n        return Reflect.deleteProperty(obj, prop);\n    }\n\n    defineProperty(tg: object, prop: PropertyKey, descriptor: PropertyDescriptor): boolean {\n        const obj = this._deref(tg); if (!obj) return true;\n        return Reflect.defineProperty(obj, prop, descriptor);\n    }\n\n    getPrototypeOf(tg: object): object | null {\n        const obj = this._deref(tg); if (!obj) return null;\n        return Object.getPrototypeOf(obj);\n    }\n\n    setPrototypeOf(tg: object, proto: any): boolean {\n        const obj = this._deref(tg); if (!obj) return true;\n        return Reflect.setPrototypeOf(obj, proto);\n    }\n\n    isExtensible(tg: object): boolean {\n        const obj = this._deref(tg); if (!obj) return false;\n        return Reflect.isExtensible(obj);\n    }\n\n    preventExtensions(tg: object): boolean {\n        const obj = this._deref(tg); if (!obj) return true;\n        return Reflect.preventExtensions(obj);\n    }\n}\n\n//\nexport type WR<T> = {\n    [K in keyof T]: T[K] extends (...args: infer A) => infer R\n        ? (...args: A) => WR<R> | null\n        : T[K] | null;\n};\n\n/**\n * Create a WeakRef wrapper proxy that allows safe access to weakly referenced objects.\n * The proxy automatically dereferences WeakRefs when accessing properties and handles\n * function calls on weakly referenced objects.\n * @template T - The type of the target object (must be object or Function)\n * @param target - The target object or WeakRef to wrap\n * @returns A proxy that safely accesses the weakly referenced object\n */\nexport function WRef<T extends object|Function>(target: T|WeakRef<T>): WR<T> {\n    if (!(typeof target == \"object\" || typeof target == \"function\") || typeof target == \"symbol\") return target as WR<T>;\n    const isWeakRef = (target instanceof WeakRef || typeof (target as any)?.deref == \"function\");\n    target = (isWeakRef ? (target as any)?.deref?.() : target) as unknown as T;\n    if (target != null && existsMap.has(target)) { return existsMap.get(target) as WR<T>; }\n\n    //\n    const handler = new WeakRefProxyHandler<T>(); // !here may be dead WeakRef\n    const pm: WR<T> = new Proxy(isWeakRef ? target : new WeakRef(target), handler as ProxyHandler<WeakRef<T>>) as WR<T>;\n    existsMap.set(target, pm); return pm;\n}\n","/**\n * Convert position from client space to orientation space.\n * @param pos_in_cs - Position in client space [x, y]\n * @param size_in_cs - Size in client space [width, height]\n * @param or_i - Orientation index (0=normal, 1=90° swapped, 2=180°, 3=270° swapped)\n * @returns Position in orientation space [x, y]\n */\nexport const cvt_cs_to_os = (pos_in_cs: [number, number], size_in_cs: [number, number], or_i: number = 0): [number, number] => {\n    const size_in_os = [...size_in_cs];\n    const pos_in_swap: [number, number] = [...pos_in_cs];\n\n    // compute swap\n    if (or_i%2) { pos_in_swap.reverse(); size_in_os.reverse(); }\n\n    // compute rotation\n    return [\n        ((or_i==0 || or_i==3) ? pos_in_swap[0] : (size_in_os[0] - pos_in_swap[0])) || 0,\n        ((or_i==0 || or_i==1) ? pos_in_swap[1] : (size_in_os[1] - pos_in_swap[1])) || 0\n    ];\n};\n\n//\nexport const cvt_os_to_cs = (pos_in_os: [number, number], size_in_cs: [number, number], or_i: number = 0): [number, number] => {\n    const size_in_os = [...size_in_cs];\n    const pos_in_cp: [number, number] = [...pos_in_os];\n\n    // use orientation space for size\n    if (or_i%2) { size_in_os.reverse(); }\n\n    // back-reversion in orientation space\n    const pos_in_cs: [number, number] = [\n        ((or_i==0 || or_i==3) ? pos_in_cp[0] : (size_in_os[0] - pos_in_cp[0])) || 0,\n        ((or_i==0 || or_i==1) ? pos_in_cp[1] : (size_in_os[1] - pos_in_cp[1])) || 0\n    ];\n\n    // back-swap to client-space\n    if (or_i%2) { pos_in_cs.reverse(); }\n    return pos_in_cs;\n};\n\n\n\n// for dragging relative (from zero)\nexport const cvt_rel_cs_to_os = (rel_in_cs: [number, number], or_i: number = 0): [number, number] => {\n    const rel_in_swap: [number, number] = [...rel_in_cs];\n\n    // compute swap\n    if (or_i%2) { rel_in_swap.reverse(); }\n\n    // compute rotation\n    return [\n        ((or_i==0 || or_i==3) ? rel_in_swap[0] : -rel_in_swap[0]) || 0,\n        ((or_i==0 || or_i==1) ? rel_in_swap[1] : -rel_in_swap[1]) || 0\n    ];\n};\n\n// for dragging relative (from zero)\nexport const cvt_rel_os_to_cs = (rel_in_os: [number, number], or_i: number = 0): [number, number] => {\n    const rel_in_cp: [number, number] = [...rel_in_os];\n\n    // back-reversion in orientation space\n    const pos_in_cs: [number, number] = [\n        ((or_i==0 || or_i==3) ? rel_in_cp[0] : -rel_in_cp[0]) || 0,\n        ((or_i==0 || or_i==1) ? rel_in_cp[1] : -rel_in_cp[1]) || 0\n    ];\n\n    // back-swap to client-space\n    if (or_i%2) { pos_in_cs.reverse(); }\n    return pos_in_cs;\n};\n","import { cvt_cs_to_os } from \"./Convert\";\nimport { roundNearest } from \"./Primitive\";\nimport type { GridArgsType, GridItemType } from \"./Types\";\n\n//\nconst get = (items, id)=>{ if (typeof items?.get == \"function\") { const item = items?.get?.(id); if (item) { return item; }; }; return Array.from(items?.values?.()||items||[])?.find?.((item: any)=>(item?.id == id || item == id)); }\n\n//\nexport const getSpan = (el, ax)=>{ const prop = el.style.getPropertyValue([\"--ox-c-span\", \"--ox-r-span\"][ax]), factor = ((parseFloat(prop || \"1\") || 1) - 1); return Math.min(Math.max(factor-1, 0), 1); }\n/**\n * Find a non-busy cell near the preferred cell in a grid layout.\n * If the preferred cell is busy, searches nearby cells to find an available one.\n * @param $preCell - Preferred cell coordinates [column, row]\n * @param gridArgs - Grid arguments containing items, layout, and size information\n * @returns Cell coordinates [column, row] that are not busy\n */\nexport const redirectCell = ($preCell: [number, number], gridArgs: GridArgsType): [number, number] => {\n    const icons: any = (gridArgs?.items || []);\n    const item = gridArgs?.item || {};\n    const checkBusy = (cell): boolean => {\n        return icons\n            ?.filter?.((e: GridItemType) => !(e == item || e?.id == item?.id))\n            ?.some?.((one) => ((one?.cell?.[0]||0) == (cell[0]||0) && (one?.cell?.[1]||0) == (cell[1]||0)));\n    };\n\n    //\n    const preCell: [number, number] = [...$preCell]; // make non-conflict copy\n    if (!checkBusy(preCell)) { return [...preCell]; }\n    const layout  = [...gridArgs?.layout];\n    const columns = layout[0] || 4;\n    const rows    = layout[1] || 8;\n    const variants: [number, number][] = [\n        [preCell[0] + 1, preCell[1]] as [number, number],\n        [preCell[0] - 1, preCell[1]] as [number, number],\n        [preCell[0], preCell[1] + 1] as [number, number],\n        [preCell[0], preCell[1] - 1] as [number, number],\n    ].filter((v) => { return v[0] >= 0 && v[0] < columns && v[1] >= 0 && v[1] < rows; }) || [];\n    const suitable = variants.find((v) => !checkBusy(v)); if (suitable) { return [...suitable]; }\n\n    //\n    let exceed = 0, busy = true, comp = [...preCell];\n    while (busy && exceed++ < columns * rows) {\n        if (!(busy = checkBusy(comp))) { return [...comp] as [number, number]; }; comp[0]++;\n        if (comp[0] >= columns) { comp[0] = 0; comp[1]++; if (comp[1] >= rows)  { comp[1] = 0; } }\n    }\n    return [...preCell];\n}\n\n\n\n/* LAST GENERATION... */\nexport const makeOrientInset = ($orientPx: [number, number], gridArgs: GridArgsType, orient: number = 0): [number, number] => {\n    const boxInPx = [...gridArgs.size];\n    const orientPx: [number, number] = [...$orientPx];\n    const layout = [...gridArgs.layout];\n    if (orient%2) { boxInPx.reverse(); };\n    return [\n        roundNearest(orientPx[0], boxInPx[0] / layout[0]),\n        roundNearest(orientPx[1], boxInPx[1] / layout[1])\n    ];\n}\n\n\n\n\n/* LAST GENERATION... */\nexport const convertOrientPxToCX = ($orientPx: [number, number], gridArgs: GridArgsType, orient: number = 0): [number, number] => {\n    const boxInPx = [...gridArgs.size];\n    const orientPx: [number, number] = [...$orientPx];\n    const layout = [...gridArgs.layout];\n    if (orient%2) { boxInPx.reverse(); };\n    const gridPxToCX = [layout[0] / boxInPx[0], layout[1] / boxInPx[1]];\n    return [orientPx[0] * gridPxToCX[0], orientPx[1] * gridPxToCX[1]]\n}\n\n// should be relative from grid-box (not absolute or fixed position)\nexport const floorInOrientPx = ($orientPx: [number, number], gridArgs: GridArgsType, orient: number = 0) => {\n    const orientPx: [number, number] = [...$orientPx];\n    const boxInPx = [...gridArgs.size];\n    const layout = [...gridArgs.layout];\n    if (orient%2) { boxInPx.reverse(); };\n    const inBox = [boxInPx[0] / layout[0], boxInPx[1] / layout[1]];\n    return [roundNearest(orientPx[0], inBox[0]), roundNearest(orientPx[1], inBox[1])];\n}\n\n//\nexport const floorInCX = ($CX: [number, number], gridArgs: GridArgsType): [number, number] => {\n    const layout = gridArgs.layout;\n    return [\n        Math.min(Math.max(roundNearest($CX[0]), 0), layout[0]-1),\n        Math.min(Math.max(roundNearest($CX[1]), 0), layout[1]-1)\n    ];\n}\n\n//\nexport const clientSpaceInOrientCX = ($clientPx, gridArgs: GridArgsType, orient: number = 0): [number, number] => {\n    const clientPx: [number, number] = [...$clientPx] as [number, number];\n    const size: [number, number] = [...gridArgs.size] as [number, number];\n    //if (orient%2) { size.reverse(); };\n    const orientPx = cvt_cs_to_os(clientPx, size, orient);\n    return [\n        Math.min(Math.max(roundNearest(orientPx[0] / size[0] * (gridArgs.layout[0]), 1), 0), gridArgs.layout[0]-1),\n        Math.min(Math.max(roundNearest(orientPx[1] / size[1] * (gridArgs.layout[1]), 1), 0), gridArgs.layout[1]-1)\n    ]\n};\n"],"names":[],"mappings":"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"}