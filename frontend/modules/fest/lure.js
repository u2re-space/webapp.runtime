import{toRef as e,deref as t,$getValue as n,handleListeners as r,camelToKebab as i,$set as s,isNotEqual as o,isPrimitive as a,hasValue as l,isObservable as c,canBeInteger as u,isHasPrimitives as d,inProxy as h,contextify as p,unref as f,isValueRef as m,getValue as y,isObject as g,normalizePrimitive as v,$avoidTrigger as b,clamp as w,UUIDv4 as x,Promised as P,redirectCell as S,convertOrientPxToCX as E,WRef as A}from"./core.js";import{n as k,a as M,g as N,h as $,i as I,u as W,$ as C,f as L,s as _,b as O,j as R,m as F}from"./object.js";import{a as z,d as T,o as j,b as H,n as D,e as q,f as B,g as V,M as U,j as X,k as G,m as K,q as Y,r as J,t as Z,u as Q,v as ee,w as te,x as ne,y as re,h as ie,c as se,z as oe,A as ae,B as le,C as ce,D as ue,E as de,F as he,l as pe,G as fe,H as me,I as ye,J as ge,K as ve,R as be,s as we,L as xe,N as Pe,O as Se,P as Ee,Q as Ae,S as ke,T as Me,U as Ne,V as $e}from"./dom.js";class Ie{static width=k("undefined"!=typeof window?window?.innerWidth:0);static height=k("undefined"!=typeof window?window?.innerHeight:0);static init(){"undefined"!=typeof window&&window?.addEventListener?.("resize",()=>{this.width.value=window?.innerWidth,this.height.value=window?.innerHeight})}static center(){return{x:Xi.divide(this.width,k(2)),y:Xi.divide(this.height,k(2))}}}Ie.init();class We{element;size;observer;constructor(e){this.element=e,this.size={width:k(e.offsetWidth),height:k(e.offsetHeight)},this.observer=new ResizeObserver(t=>{for(const n of t)n.target===e&&(this.size.width.value=n.contentRect.width,this.size.height.value=n.contentRect.height)}),this.observer.observe(e)}get width(){return this.size.width}get height(){return this.size.height}center(){return{x:Xi.divide(this.size.width,k(2)),y:Xi.divide(this.size.height,k(2))}}destroy(){this.observer.disconnect()}}class Ce{animations=/* @__PURE__ */new Map;transitions=/* @__PURE__ */new Map;setAnimation(e,t){this.animations.set(e,t)}getAnimation(e){return this.animations.get(e)}cancelAnimation(e){const t=this.animations.get(e);t&&(t.cancel(),this.animations.delete(e))}setTransition(e,t,n){const r=`${t} ${n.duration||200}ms ${n.easing||"ease"} ${n.delay||0}ms`;this.transitions.get(t)!==r&&(this.transitions.set(t,r),this.updateElementTransitions(e))}updateElementTransitions(e){const t=Array.from(this.transitions.values()).join(", ");e.style.transition=t}clearTransitions(e){this.transitions.clear(),e.style.transition=""}cancelAll(e){const t=Array.from(this.animations.values());for(const n of t)n.cancel();this.animations.clear(),this.clearTransitions(e)}getAnimations(){return this.animations}}const Le=/* @__PURE__ */new WeakMap;function _e(e){let t=Le.get(e);return t||(t=new Ce,Le.set(e,t)),t}function Oe(e,t,r,i={}){if(!e||!t)return;const s=_e(e),o=e.style.getPropertyValue(t)||getComputedStyle(e)[t],a=n(r);if(o===a)return;s.cancelAnimation(t);const l=e.animate([{[t]:o},{[t]:a}],{duration:i.duration||200,easing:i.easing||"ease",delay:i.delay||0,direction:i.direction||"normal",iterations:i.iterations||1,fill:i.fill||"forwards"});s.setAnimation(t,l),l.addEventListener("finish",()=>{s.cancelAnimation(t),e.style.setProperty(t,a)})}function Re(e,t,r,i={}){if(!e||!t)return;const s=_e(e),o=n(r);s.setTransition(e,t,i),e.style.setProperty(t,o)}function Fe(e,t,r,i={}){if(!e||!t)return;const s=_e(e),o=n(r),a=parseFloat(e.style.getPropertyValue(t))||parseFloat(getComputedStyle(e)[t])||0;if(Math.abs(a-o)<.01)return;s.cancelAnimation(t);const l=i.stiffness||100,c=i.damping||10,u=i.mass||1;let d,h=a,p=i.velocity||0;const f=()=>{p+=(-l*(h-o)+-c*p)/u*.016,h+=.016*p;const n=t.includes("scale")||t.includes("opacity")?h.toString():`${h}px`;e.style.setProperty(t,n),Math.abs(h-o)>.01||Math.abs(p)>.01?d=requestAnimationFrame(f):(e.style.setProperty(t,t.includes("scale")||t.includes("opacity")?o.toString():`${o}px`),s.cancelAnimation(t))};s.setAnimation(t,{cancel:()=>cancelAnimationFrame(d)}),d=requestAnimationFrame(f)}function ze(e,t,r={}){if(!e||!t)return;const i=_e(e),s=[{},{}];for(const[a,l]of Object.entries(t)){const t=e.style.getPropertyValue(a)||getComputedStyle(e)[a],r=n(l);s[0][a]=t,s[1][a]=r}for(const n of Object.keys(t))i.cancelAnimation(n);const o=e.animate(s,{duration:r.duration||300,easing:r.easing||"ease-out",delay:r.delay||0,direction:r.direction||"normal",iterations:r.iterations||1,fill:r.fill||"forwards"});for(const n of Object.keys(t))i.setAnimation(n,o);o.addEventListener("finish",()=>{for(const r of Object.keys(t)){i.cancelAnimation(r);const s=n(t[r]);e.style.setProperty(r,s)}})}function Te(r,i,s,o="animate",a={}){const l=e(r),c=e(s);if("morph"===o){const e=i;return ze(t(l),e,a),M(s,n=>{ze(t(l),e,a)}),unsubscribe}{const e=i,r="animate"===o?Oe:"transition"===o?Re:Fe;return r(t(l),e,n(t(c)),a),M(s,n=>{r(t(l),e,n,a)}),unsubscribe}}const je=/* @__PURE__ */new WeakMap,He=new FinalizationRegistry(e=>e?.()),De=Symbol.for("@mapped"),qe=Symbol.for("@virtual"),Be=Symbol.for("@behavior"),Ve=(n,r,i)=>{const s=e(n),o=r?.[0]??r?.name;if(i){const e=M?.(r,(e,n,a)=>{const l=D?.get?.(o);i?.([e,n,a],[s,r,l?.get(t(s))])});N(r,Symbol.dispose,e)}return n},Ue=(e,t)=>{const n={click:t,input:t,change:t};t?.({target:e});const i=r?.(e,"addEventListener",n);return N(e,Symbol.dispose,i),i},Xe=(a,l,c,u,d,h)=>{const p=e(a);if(!(a=t(p))||!(a instanceof Node||a?.element instanceof Node))return;let f=null;f?.abort?.(),f=new AbortController;const m=e(l);u?.(a,c,l);const y=M?.([l,"value"],(e,r,i)=>{const s=t(m),o=t(d),a=t(p),l=n(s)??n(e);o&&o?.[c]!=s||("function"==typeof s?.[Be]?s?.[Be]?.((t=e)=>u(a,c,l),[e,c,i],[f?.signal,c,p]):u(a,c,l))});let g=null;"boolean"==typeof h&&h&&(u==z&&(g=((r,a,l="")=>{e(r);const c=e(a),u=i(l);return j(r,u,e=>{if("attributes"==e.type&&e.attributeName==u){const r=e?.target?.getAttribute?.(e.attributeName),i=t(c),a=n(i);!o(e.oldValue,r)||null==i||"object"!=typeof i&&"function"!=typeof i||(o(a,r)||null==a)&&s(i,"value",r)}})})(a,l,c)),u==T&&(g=((i,o,a="value")=>{const l=e(i),c=e(o),u=e=>{s(c,"value",t(l)?.[a??"value"]??n(t(c)))},d={click:u,input:u,change:u};return u?.(),r?.(i,"addEventListener",d),s(c,"value",i?.[a??"value"]??n(t(o))),()=>r?.(i,"removeEventListener",d)})(a,l,c))),"function"==typeof h&&(g=h(a,c,l));const v=()=>{g?.disconnect?.(),null!=g&&"function"==typeof g&&g?.(),y?.(),f?.abort?.(),((e,t,n)=>{const r=je?.get?.(e)?.get?.(t);if(r){const e=r[n]?.[1];delete r[n],e?.()}})?.(a,u,c)};N(l,Symbol.dispose,v),He.register(a,v),((e,t,n,r)=>{const i=je?.getOrInsert?.(e,/* @__PURE__ */new WeakMap),s=i?.getOrInsert?.(t,{})??{};s?.[n]?.[1]?.(),s[n]=r})(a,u,c,[l,v])},Ge=(e,t,n,r,i,s)=>(r(e,t,n),Xe(e,n,t,r,i,s)),Ke=(e,t,n,r={})=>Te(e,t,n,"animate",r),Ye=(e,t,n,r={})=>Te(e,t,n,"transition",r),Je=(e,t,n,r={})=>Te(e,t,n,"spring",r),Ze=/* @__PURE__ */new WeakMap,Qe=/* @__PURE__ */new WeakMap,et={logAll:e=>()=>console.log("attributes:",[...e?.attributes].map(e=>({name:e.name,value:e.value}))),append:e=>(...t)=>e?.append?.(...[...t||[]]?.map?.(e=>e?.element??e)||t),current:e=>e};class tt{direction="children";selector;index=0;_eventMap=/* @__PURE__ */new WeakMap;constructor(e,t=0,n="children"){this.index=t,this.selector=e,this.direction=n}_observeDOMChange(e,t,n){return"string"==typeof t?q(e,t,n):null}_observeAttributes(e,t,n){return"string"==typeof this.selector?B(e,this.selector,t,n):j(e??this.selector,t,n)}_getArray(e){if("function"==typeof e&&(e=this.selector||e?.(this.selector)),!this.selector)return[e];if("string"==typeof this.selector){const t="function"==typeof e?.matches&&null!=e?.element&&e?.matches?.(this.selector)?[e]:[];if("children"==this.direction){const n="function"==typeof e?.querySelectorAll&&null!=e?.element?[...e?.querySelectorAll?.(this.selector)]:[];return n?.length>=1?[...n]:t}if("parent"==this.direction){const n=e?.closest?.(this.selector);return n?[n]:t}return t}return Array.isArray(this.selector)?this.selector:[this.selector]}_getSelected(e){const t=e?.self??e,n=this._selector(e);if("string"==typeof n){if("children"==this.direction)return t?.matches?.(n)?t:t?.querySelector?.(n);if("parent"==this.direction)return t?.matches?.(n)?t:t?.closest?.(n)}return t==(n?.element??n)?n?.element??n:null}_redirectToBubble(e){return"string"==typeof this._selector()&&{pointerenter:"pointerover",pointerleave:"pointerout",mouseenter:"mouseover",mouseleave:"mouseout",focus:"focusin",blur:"focusout"}?.[e]||e}_addEventListener(e,t,n,r){const i=this._selector(e);if("string"!=typeof i)return i?.addEventListener?.(t,n,r),n;const s=this._redirectToBubble(t),o=e?.self??e,a=t=>{const r=this._selector(e),i=t?.currentTarget??o;let s=null;if(t?.composedPath&&"function"==typeof t.composedPath){const e=t.composedPath();for(const n of e)if(n instanceof HTMLElement||n instanceof Element){const e=n?.element??n;if("string"==typeof r){if(U(e,r,t)){s=e;break}}else if(X(r,e,t)){s=e;break}}}s||(s=t?.target??this._getSelected(e)??i,s=s?.element??s),"string"==typeof r?X(i,U(s,r,t),t)&&n?.call?.(s,t):X(i,r,t)&&X(r,s,t)&&n?.call?.(s,t)};return o?.addEventListener?.(s,a,r),this._eventMap.getOrInsert(o,/* @__PURE__ */new Map).getOrInsert(s,/* @__PURE__ */new WeakMap).set(n,{wrap:a,option:r}),a}_removeEventListener(e,t,n,r){const i=this._selector(e);if("string"!=typeof i)return i?.removeEventListener?.(t,n,r),n;const s=e?.self??e,o=this._redirectToBubble(t),a=this._eventMap.get(s);if(!a)return;const l=a.get(o),c=l?.get?.(n);s?.removeEventListener?.(o,c?.wrap??n,r??c?.option??{}),l?.delete?.(n),0==l?.size&&a?.delete?.(o),0==a.size&&this._eventMap.delete(s)}_selector(e){return"string"==typeof this.selector&&"string"==typeof e?.selector?((e?.selector||"")+" "+this.selector)?.trim?.():this.selector}get(e,t,n){const r=this._getArray(e),i=r.length>0?r[this.index]:this._getSelected(e);if(t in et)return et?.[t]?.(i);if("length"==t&&null!=r?.length)return r?.length;if("_updateSelector"==t)return e=>this.selector=e||this.selector;if(["style","attributeStyleMap"].indexOf(t)>=0){const n=e?.self??e,r=this._selector(e),s="string"==typeof r?V(r,"ux-query",n):i;return"attributeStyleMap"==t?s?.styleMap??s?.attributeStyleMap:s?.[t]}if("self"==t)return e?.self??e;if("selector"==t)return this._selector(e);if("observeAttr"==t)return(t,n)=>this._observeAttributes(e,t,n);if("DOMChange"==t)return t=>this._observeDOMChange(e,this.selector,t);if("addEventListener"==t)return(t,n,r)=>this._addEventListener(e,t,n,r);if("removeEventListener"==t)return(t,n,r)=>this._removeEventListener(e,t,n,r);if("getAttribute"==t)return t=>{const n=this._getArray(e),r=n.length>0?n[this.index]:this._getSelected(e),i=Ze?.get?.(e)?.get?.(this.selector)??r;return je?.get?.(i)?.get?.(z)?.has?.(t)?je?.get?.(i)?.get?.(z)?.get?.(t)?.[0]:r?.getAttribute?.(t)};if("setAttribute"==t)return(t,n)=>{const r=this._getArray(e),i=r.length>0?r[this.index]:this._getSelected(e);return"object"!=typeof n||null==n?.value&&!("value"in n)?i?.setAttribute?.(t,n):Ge(i,t,n,z,null,!0)};if("removeAttribute"==t)return t=>{const n=this._getArray(e),r=n.length>0?n[this.index]:this._getSelected(e),i=Ze?.get?.(e)?.get?.(this.selector)??r;return je?.get?.(i)?.get?.(z)?.has?.(t)?je?.get?.(i)?.get?.(z)?.get?.(t)?.[1]?.():r?.removeAttribute?.(t)};if("hasAttribute"==t)return t=>{const n=this._getArray(e),r=n.length>0?n[this.index]:this._getSelected(e),i=Ze?.get?.(e)?.get?.(this.selector)??r;return!!je?.get?.(i)?.get?.(z)?.has?.(t)||r?.hasAttribute?.(t)};if("element"==t){if(r?.length<=1)return i?.element??i;const e=document.createDocumentFragment();return e.append(...r),e}if(t==Symbol.toPrimitive&&(this.selector?.includes?.("input")||this.selector?.matches?.("input")))return e=>"number"==e?(i?.element??i)?.valueAsNumber??parseFloat((i?.element??i)?.value):"string"==e?String((i?.element??i)?.value??i?.element??i):"boolean"==e?(i?.element??i)?.checked:(i?.element??i)?.checked??(i?.element??i)?.value??i?.element??i;if("checked"==t&&(this.selector?.includes?.("input")||this.selector?.matches?.("input")))return(i?.element??i)?.checked;if("value"==t&&(this.selector?.includes?.("input")||this.selector?.matches?.("input")))return(i?.element??i)?.valueAsNumber??(i?.element??i)?.valueAsDate??(i?.element??i)?.value??(i?.element??i)?.checked;if(t==$&&(this.selector?.includes?.("input")||this.selector?.matches?.("input")))return t=>{let n=i?.value;const r=[e=>{const r=this._getSelected(e?.target);t?.(r?.value,"value",n),n=r?.value},{passive:!0}];return this._addEventListener(e,"change",...r),()=>this._removeEventListener(e,"change",...r)};if("deref"==t&&("object"==typeof i||"function"==typeof i)&&null!=i){const e=new WeakRef(i);return()=>e?.deref?.()?.element??e?.deref?.()}if("string"==typeof t&&/^\d+$/.test(t))return r[parseInt(t)];const s=i;return null!=s?.[t]?"function"==typeof s[t]?s[t].bind(s):s[t]:null!=r?.[t]?"function"==typeof r[t]?r[t].bind(r):r[t]:"function"==typeof e?.[t]?e?.[t].bind(s):e?.[t]}set(e,t,n){const r=this._getArray(e),i=r.length>0?r[this.index]:this._getSelected(e);return!("string"==typeof t&&/^\d+$/.test(t)||null!=r[t]||i&&(i[t]=n,0))}has(e,t){const n=this._getArray(e),r=n.length>0?n[this.index]:this._getSelected(e);return"string"==typeof t&&/^\d+$/.test(t)&&null!=n[parseInt(t)]||null!=n[t]||r&&t in r}deleteProperty(e,t){const n=this._getArray(e),r=n.length>0?n[this.index]:this._getSelected(e);return!(!r||!(t in r)||(delete r[t],0))}ownKeys(e){const t=this._getArray(e),n=t.length>0?t[this.index]:this._getSelected(e),r=/* @__PURE__ */new Set;return t.forEach((e,t)=>r.add(t.toString())),Object.getOwnPropertyNames(t).forEach(e=>r.add(e)),n&&Object.getOwnPropertyNames(n).forEach(e=>r.add(e)),Array.from(r)}defineProperty(e,t,n){const r=this._getArray(e),i=r.length>0?r[this.index]:this._getSelected(e);return!!i&&(Object.defineProperty(i,t,n),!0)}apply(e,t,n){n[0]||=this.selector;const r=e?.apply?.(t,n);return this.selector=r||this.selector,new Proxy(e,this)}}const nt=(e,t=document.documentElement,n=0,r="children")=>{if((e?.element??e)instanceof HTMLElement){const t=e?.element??e;return Qe.getOrInsert(t,new Proxy(t,new tt("",n,r)))}return"function"==typeof e?Qe.getOrInsert(e,new Proxy(e,new tt("",n,r))):null==t||"string"==typeof t||"number"==typeof t||"boolean"==typeof t||"symbol"==typeof t||void 0===t?null:Ze?.get?.(t)?.has?.(e)?Ze?.get?.(t)?.get?.(e):Ze?.getOrInsert?.(t,/* @__PURE__ */new Map)?.getOrInsertComputed?.(e,()=>new Proxy(t,new tt(e,n,r)))},rt=e=>a(e)?[]:Array.isArray(e)?e.map((e,t)=>[t,e]):e instanceof Map?Array.from(e.entries()):e instanceof Set?Array.from(e.values()):Array.from(Object.entries(e)),it=(e,t)=>{if(!t)return e;if("string"==typeof t)e.style.cssText=t;else if("string"==typeof t?.value)M([t,"value"],t=>{e.style.cssText=t});else if("object"==typeof t||"function"==typeof t){const n=new WeakRef(t),r=new WeakRef(e);rt(t).forEach(([e,t])=>{H(r?.deref?.(),e,t)});const i=M(t,(e,t)=>{H(r?.deref?.(),t,e),Xe(r?.deref?.(),e,t,H,n?.deref?.())});N(t,Symbol.dispose,i),N(e,Symbol.dispose,i)}else console.warn("Invalid styles object:",t);return e},st=(e=null,t,n=!0)=>{const r=[];return(i,s,o,a,l=null)=>{const c=Y(l)??Y(e),u=xt(i,t,s,c),d=xt(o,t,s,c);let h=Y(u?.parentElement??d?.parentElement)??c;if(!h)return;e!=h&&(e=h);const p=J(h,d);(["@add","@set","@remove"].indexOf(a||"")>=0||!a)&&(null==u&&null!=d||"@remove"==a?r?.push?.([$t,[h,d,null,p>=0?p:s]]):null!=u&&null==d||"@add"==a?r?.push?.([At,[h,u,null,s]]):(null!=u&&null!=d||"@set"==a)&&r?.push?.([Nt,[h,u,null,p>=0?p:s,d]])),(a&&"@get"!=a&&["@add","@set","@remove"].indexOf(a)>=0||!a&&!n)&&(r?.forEach?.(([e,t])=>e?.(...t)),r?.splice?.(0,r?.length))}},ot=(e,t=[],n)=>{if(!t||!e)return e;n=(t?.[De]?t?.mapper:n)??n,t=(t?.[De]?t?.children:t)??t;const r=Array.from(t?.keys?.()||[]),i=(e=>((e instanceof Map||e instanceof Set)&&(e=Array.from(e?.values?.())),e))(t)?.map?.((t,i)=>xt(t,n,r?.[i]??i,e));return It(e,i),i?.forEach?.(t=>At(e,t)),e};class at{#e=document.createComment("");#t;#n;#r=null;#i=null;#s=!1;#o={};#a;#l=null;makeUpdater(e=null){e&&(this.#i?.(),this.#i=null,this.#r=null,this.#r??=st(e,null,!1),this.#i??=M?.([this.#t,"value"],this._onUpdate.bind(this)))}get boundParent(){return this.#l}set boundParent(e){e instanceof HTMLElement&&Y(e)&&e!=this.#l&&(this.#l=e,this.makeUpdater(e),this.#a&&(null!=this.#a?.parentNode&&this.#a?.remove?.(),this.#a=null))}constructor(e,t=e=>e,n=null){this.#e=document.createComment(""),!l(t)||"function"!=typeof e&&"object"!=typeof e||l(e)||([e,t]=[t,e]),n||null==t||"object"!=typeof t||l(t)||(n=t),this.#a=null,this.#t=e,this.#n=document.createDocumentFragment();const r=(Y(n)?null:n)||{};this.#o=Object.assign({removeNotExistsWhenHasPrimitives:!0,uniquePrimitives:!0,preMap:!0},r),this.boundParent=Y(this.#o?.boundParent)??Y(n)??null}$getNodeBy(e,t){return a(l(t)?t?.value:t)?Wt(t):xt(t,null,-1,e)}$getNode(e,t=!0){const n=a(this.#t?.value)?Wt(this.#t):xt(this.#t?.value,null,-1,e);return null!=n&&t&&(this.#a=n),n}get[De](){return!0}elementForPotentialParent(e){return Promise.try(()=>{const t=this.$getNode(e);if(t&&e&&!t?.contains?.(e)&&e!=t&&e instanceof HTMLElement&&Y(e))if(Array.from(e?.children).find(e=>e===t))this.boundParent=e;else{const n=new MutationObserver(r=>{for(const i of r)"childList"===i.type&&i.addedNodes.length>0&&Array.from(i.addedNodes||[]).find(e=>e===t)&&(this.boundParent=e,n.disconnect())});n.observe(e,{childList:!0})}})?.catch?.(console.warn.bind(console)),this.element}get self(){const e=this.$getNode(this.boundParent)??this.#e,t=Y(e?.parentElement)?e?.parentElement:this.boundParent;return this.boundParent??=Y(t)??this.boundParent,queueMicrotask(()=>{const t=Y(e?.parentElement)?e?.parentElement:this.boundParent;this.boundParent??=Y(t)??this.boundParent}),t??this.boundParent??e}get element(){const e=this.$getNode(this.boundParent)??this.#e,t=Y(e?.parentElement)?e?.parentElement:this.boundParent;return this.boundParent??=Y(t)??this.boundParent,queueMicrotask(()=>{const t=Y(e?.parentElement)?e?.parentElement:this.boundParent;this.boundParent??=Y(t)??this.boundParent}),e}_onUpdate(e,t,n,r){if(a(n)&&a(e))return;let i=a(n)?this.#a:this.$getNodeBy(this.boundParent,n),s=this.$getNode(this.boundParent,!1)??this.#e;(i&&!i?.parentNode||this.#a?.parentNode)&&(i=this.#a??i);let o=this.#r?.(s,J(this.boundParent,i),i,r,this.boundParent);return null!=s&&s!=this.#a?this.#a=s:null==s&&i!=this.#a&&(this.#a=i),o}}const lt=(e,t,n=null)=>null==e?null:"object"!=typeof e&&"function"!=typeof e||!l(e)?Wt(e):dt.getOrInsertComputed(e,()=>new at(e,t,n)),ct=(e,t)=>(t&&t!=e&&!e?.contains?.(t)&&Y(t)?e?.elementForPotentialParent?.(t):null)??e?.element,ut=(e,t)=>ct(e,t)??(l(e)&&Z(e?.value)?e?.value:e),dt=/* @__PURE__ */new WeakMap,ht=/* @__PURE__ */new WeakMap,pt=e=>a(e)?e:l(e)&&a(e?.value)?ht?.get(e):dt?.get?.(e),ft=/* @__PURE__ */new WeakMap,mt=(e,t)=>{if(ft?.has?.(e))return ft?.get?.(e);const n=document.createComment(":PROMISE:");return e?.then?.(r=>{const i="function"==typeof t?t(r):r;ft?.set?.(e,i),queueMicrotask(()=>{try{if("function"==typeof n?.replaceWith){if(!n?.isConnected)return;Z(i)&&n?.replaceWith?.(i)}else n?.isConnected&&Z(i)&&n?.parentNode?.replaceChild?.(n,i)}catch(e){if(!n?.isConnected)return;n?.remove?.()}})}),n},yt=(e,t,n=-1,r)=>null!=t?yt(t?.(e,n),null,-1):((e instanceof WeakRef||"function"==typeof e?.deref)&&(e=e.deref()),e instanceof Promise||"function"==typeof e?.then?mt(e,e=>yt(e,t,n)):Z(e)&&!e?.element||Z(e?.element)?e:l(e)?a(e?.value)&&null!=e?.value?Wt(e):lt(e):"object"==typeof e&&null!=e?pt(e):"function"==typeof e?yt(e?.(),t,n):a(e)&&null!=e?Wt(e):null),gt=(e,t)=>ut(e,t)??Z(e),vt=/* @__PURE__ */new WeakSet,bt=(e,t,n=-1,r)=>{if((e instanceof WeakRef||"function"==typeof e?.deref)&&(e=e.deref()),e instanceof Promise||"function"==typeof e?.then)return mt(e,e=>bt(e,t,n,r));if(("object"==typeof e||"function"==typeof e)&&!Z(e)){if(dt.has(e)){const i=pt(e)??yt(e,t,n);return gt(i instanceof WeakRef?i?.deref?.():i,r)}const i=yt(e,t,n);return t||null==i||i==e||"object"!=typeof e&&"function"!=typeof e||Z(e)||dt.set(e,i),gt(i,r)}return((e,t,n=-1,r)=>null!=t?xt(t?.(e,n),null,-1,r):((e instanceof WeakRef||"function"==typeof e?.deref)&&(e=e.deref()),e instanceof Promise||"function"==typeof e?.then?mt(e,e=>xt(e,t,n,r)):Z(e)&&!e?.element?e:Z(e?.element)?ut(e,r):l(e)?(a(e?.value)&&null!=e?.value?Wt(e):lt(e))?.element:"object"==typeof e&&null!=e?pt(e):"function"==typeof e?xt(e?.(),t,n,r):a(e)&&null!=e?Wt(e):null))(e,t,n,r)},wt=e=>("object"==typeof e||"function"==typeof e||"symbol"==typeof e)&&null!=e,xt=(e,t,n=-1,r)=>{if(wt(e)&&vt.has(e))return pt(e)??Z(e);wt(e)&&vt.add(e);const i=bt(e,t,n,r);return wt(e)&&vt.delete(e),i},Pt=(e,t,n=-1)=>{Z(t)&&null!=t&&t?.parentNode!=e&&(Number.isInteger(n)&&n>=0&&n<e?.childNodes?.length?e?.insertBefore?.(t,e?.childNodes?.[n]):e?.append?.(t))},St=(e,t,n=-1)=>{Z(t)&&e!=t&&t?.parentNode!=e&&(t=t?._onUpdate?ct(t,e):t,t?.parentNode||!Z(t)?e?.parentNode!=t?.parentNode&&Z(t)&&Pt(e,t,n):Pt(e,t,n))},Et=(e,t,n,r=-1)=>{const i=t?.length??0;if(Array.isArray(W(t))||t instanceof Map||t instanceof Set){const i=(e=>((e instanceof Map||e instanceof Set)&&(e=Array.from(e?.values?.())),e))(t)?.map?.((t,r)=>xt(t,n,r,e))?.filter?.(e=>null!=e),s=document.createDocumentFragment();i?.forEach?.(e=>St(s,e)),St(e,s,r)}else{const s=xt(t,n,i,e);null!=s&&St(e,s,r)}},At=(e,t,n,r=-1)=>{null!=n&&(t=n?.(t,r)),t?.children&&Array.isArray(W(t?.children))&&(t?.[qe]||t?.[De])?Et(e,t?.children,null,r):Et(e,t,null,r)},kt=(e,t,n=-1)=>e?t?.parentNode==e&&null!=t?.parentNode?t:t?.parentNode!=e&&!Y(t?.parentNode)&&Number.isInteger(n)&&n>=0&&Array.from(e?.childNodes||[])?.length>n?e.childNodes?.[n]:t:t,Mt=(e,t,n)=>{if(t?.parentNode)if(t?.parentNode==n?.parentNode)if(e=t?.parentNode??e,t.nextSibling===n)e.insertBefore(n,t);else if(n.nextSibling===t)e.insertBefore(t,n);else{const r=t.nextSibling;e.replaceChild(n,t),e.insertBefore(t,r)}else t?.replaceWith?.(n)},Nt=(e,t,n,r=-1,i)=>{null!=n&&(t=n?.(t,r)),e||(e=i?.parentNode);const s=kt(e,xt(i,n,r),r);if(s instanceof Text&&"string"==typeof t)s.textContent=t;else if(null!=t){const n=xt(t);s?.parentNode==e&&s!=n&&s instanceof Text&&n instanceof Text?s?.textContent!=n?.textContent&&(s.textContent=n?.textContent?.trim?.()??""):s?.parentNode==e&&s!=n&&null!=s&&null!=s?.parentNode?Mt(e,s,n):s?.parentNode==e&&null!=s?.parentNode||At(e,n,null,r)}},$t=(e,t,n,r=-1)=>{const i=xt(t,n);if(e||(e=i?.parentNode),Array.from(e?.childNodes??[])?.length<1)return;const s=kt(e,i,r);return s?.parentNode==e&&s?.remove?.(),e},It=(e,t,n)=>{const r=Array.from(W(t)||[])?.map?.((e,t)=>xt(e,n,t));return Array.from(e.childNodes).forEach(e=>{r?.find?.(t=>!o?.(t,e))||e?.remove?.()}),e},Wt=e=>a(e)&&null!=e?document.createTextNode(e):null!=e?ht.getOrInsertComputed(e,()=>{const t=document.createTextNode(((l(e)?e?.value:e)??"")?.trim?.()??"");return M([e,"value"],e=>{const n=""+(e?.innerText??e?.textContent??e?.value??e??"");t.textContent=n?.trim?.()??""}),t}):void 0,Ct=e=>((e instanceof Map||e instanceof Set)&&(e=Array.from(e?.values?.())),e);class Lt{#c;#n;#u;#d;#h;#r=null;#i=null;#o={};#e=document.createComment("");#l=null;makeUpdater(e=null){e&&(this.#i?.(),this.#i=null,this.#r=null,this.#r??=st(e,this.mapper.bind(this),Array.isArray(this.#c)),this.#i??=I?.(this.#c,this._onUpdate.bind(this)))}get boundParent(){return this.#l}set boundParent(e){e instanceof HTMLElement&&Y(e)&&e!=this.#l&&(this.#l=e,this.makeUpdater(e))}constructor(e,t=e=>e,n=null){!c(t)||"function"!=typeof e&&"object"!=typeof e||c(e)||([e,t]=[t,e]),n||null==t||"object"!=typeof t||c(t)||(n=t),this.#e=document.createComment(""),this.#d=/* @__PURE__ */new WeakMap,this.#h=/* @__PURE__ */new Map,this.#u=(null!=t?"function"==typeof t?t:"object"==typeof t?t?.mapper:null:null)??(e=>e),this.#c=(c(e)?e:e?.iterator??t?.iterator??e)??[],this.#n=document.createDocumentFragment();const r=(Y(n)?null:n)||{};this.#o=Object.assign({removeNotExistsWhenHasPrimitives:!0,uniquePrimitives:!0,preMap:!0},r),this.boundParent=Y(this.#o?.boundParent)??Y(n)??null,this.boundParent||this.#o.preMap&&(ot(this.#n,this.#c,this.mapper.bind(this)),0===this.#n.childNodes.length&&this.#n.appendChild(this.#e))}get[De](){return!0}elementForPotentialParent(e){return Promise.try(()=>{const t=xt(this.#c?.[0],this.mapper.bind(this),0);if(t&&e&&!t?.contains?.(e)&&e!=t&&e instanceof HTMLElement&&Y(e))if(Array.from(e?.children).find(e=>e===t))this.boundParent=e;else{const n=new MutationObserver(r=>{for(const i of r)"childList"===i.type&&i.addedNodes.length>0&&Array.from(i.addedNodes||[]).find(e=>e===t)&&(this.boundParent=e,n.disconnect())});n.observe(e,{childList:!0})}})?.catch?.(console.warn.bind(console)),this.element}get children(){return Ct(this.#c)}get self(){const e=xt(this.#c?.[0],this.mapper.bind(this),0),t=Y(e?.parentElement)?e?.parentElement:this.boundParent;return this.boundParent??=Y(t)??this.boundParent,queueMicrotask(()=>{const t=Y(e?.parentElement)?e?.parentElement:this.boundParent;this.boundParent??=Y(t)??this.boundParent}),t??this.boundParent??ot(this.#n,this.#c,this.mapper.bind(this))}get element(){const e=this.#n?.childNodes?.length>0?this.#n:xt(this.#c?.[0],this.mapper.bind(this),0),t=Y(e?.parentElement)?e?.parentElement:this.boundParent;return this.boundParent??=Y(t)??this.boundParent,queueMicrotask(()=>{const t=Y(e?.parentElement)?e?.parentElement:this.boundParent;this.boundParent??=Y(t)??this.boundParent}),e}get mapper(){return(...e)=>e?.[0]instanceof Node?e?.[0]:e?.[0]instanceof Promise||"function"==typeof e?.[0]?.then?null:(null==e?.[1]||e?.[1]<0||"number"!=typeof e?.[1]||!u(e?.[1]))&&(Array.isArray(this.#c)||this.#c instanceof Set)?void 0:null==e?.[0]||"object"!=typeof e?.[0]&&"function"!=typeof e?.[0]&&"symbol"!=typeof e?.[0]?null!=e?.[0]&&this.#c instanceof Set?this.#h.getOrInsert(e?.[0],this.#u(...e)):null!=e?.[0]&&this.#c instanceof Map?"object"==typeof e?.[0]||"function"==typeof e?.[0]||"symbol"==typeof e?.[0]?this.#d.getOrInsert(e?.[0],this.#u(...e)):"object"==typeof e?.[1]||"function"==typeof e?.[1]||"symbol"==typeof e?.[1]?this.#d.getOrInsert(e?.[1],this.#u(...e)):this.#h.getOrInsert(e?.[1],this.#u(...e)):null!=e?.[0]?this.#o?.uniquePrimitives&&a(e?.[0])?this.#h.getOrInsert(e?.[0],this.#u(...e)):this.#u(...e):void 0:this.#d.getOrInsert(e?.[0],this.#u(...e))}_onUpdate(e,t,n,r=""){("@remove"==r||"@set"==r)&&a(n)&&n!=e&&this.#o?.uniquePrimitives&&this.#h.delete(n);const i=Ct(this.#c),s=Array.from(this.#c?.keys?.()||[]);Array.isArray(i)&&this.#o?.removeNotExistsWhenHasPrimitives&&(d(i)||a(n))&&i?.length<1&&It(this.boundParent,i?.map?.((e,t)=>xt(e,this.mapper,s?.[t]??t,this.boundParent))||[]);const o=!i||0===i.length;if("@remove"===r&&o){const e=xt(n,this.mapper,Number.isInteger(t)?t:-1);this.#e.parentNode!==this.boundParent&&(e&&this.boundParent&&e.parentNode===this.boundParent?this.boundParent.replaceChild(this.#e,e):this.boundParent&&!this.boundParent.hasChildNodes()&&this.boundParent.appendChild(this.#e))}const l=xt(n,this.mapper,Number.isInteger(t)?t:-1),c=Array.from((l?.parentNode??this.boundParent)?.childNodes||[])?.indexOf?.(l),u=i?.indexOf?.(e),h=xt(e,this.mapper,Number.isInteger(t)||u<0?t:u,this.boundParent),p=this.#r?.(h,Number.isInteger(t)?t:c<0?u:c,l,r||(Array.isArray(this.#c)?"@add":""),this.boundParent);return!o&&this.#e.isConnected&&this.#e.remove(),p}*[Symbol.iterator](){let e=0;if(this.#c)for(let t of this.#c)yield this.mapper(t,e++)}}const _t=(e,t,n=null)=>new Lt(e,t,n),Ot=(e,t={},n)=>{const r=xt("string"==typeof e?(e=>{if("string"==typeof e){const t=((e,t=document.documentElement)=>{if(null==e?.value)return nt(e,t);const n=nt(e?.value,t);return M(e,(e,t)=>n?._updateSelector(e)),n})(re(e));return t?.element??t}return e instanceof HTMLElement||e instanceof Element||e instanceof DocumentFragment||e instanceof Document||e instanceof Node?e:null})(e):e,null,-1);return r&&n&&_t(n,e=>e,r),r&&t&&(null!=t.ctrls&&((e,t)=>{if(t)for(let n of t)Ue(e,n)})(r,t.ctrls),null!=t.attributes&&((e,t)=>{if(!t)return e;const n=new WeakRef(t),r=new WeakRef(e);if("object"==typeof t||"function"==typeof t){rt(t).forEach(([e,t])=>{z(r?.deref?.(),e,t)});const i=M(t,(e,t)=>{z(r?.deref?.(),t,e),Xe(r?.deref?.(),e,t,z,n,!0)});N(t,Symbol.dispose,i),N(e,Symbol.dispose,i)}else console.warn("Invalid attributes object:",t)})(r,t.attributes),null!=t.properties&&((e,t)=>{if(!t)return e;const n=new WeakRef(t),r=new WeakRef(e);rt(t).forEach(([e,t])=>{T(r?.deref?.(),e,t)});const i=M(t,(e,t)=>{const i=r.deref();i&&("checked"==t?G(i,e):Ge(i,t,e,T,n?.deref?.(),!0))});N(t,Symbol.dispose,i),N(e,Symbol.dispose,i),e.addEventListener("change",e=>{const n=nt("input",e?.target);null!=n?.value&&o(n?.value,t?.value)&&(t.value=n?.value),null!=n?.valueAsNumber&&o(n?.valueAsNumber,t?.valueAsNumber)&&(t.valueAsNumber=n?.valueAsNumber),null!=n?.checked&&o(n?.checked,t?.checked)&&(t.checked=n?.checked)})})(r,t.properties),null!=t.classList&&((e,t)=>{if(!t)return e;const n=new WeakRef(e);rt(t).forEach(([t,n])=>{const r=e;void 0===n||null==n?r.classList.contains(n)&&r.classList.remove(n):r.classList.contains(n)||r.classList.add(n)});const r=I(t,e=>{const t=n?.deref?.();t&&(void 0===e||null==e?t.classList.contains(e)&&t.classList.remove(e):t.classList.contains(e)||t.classList.add(e))});N(t,Symbol.dispose,r),N(e,Symbol.dispose,r)})(r,t.classList),null!=t.behaviors&&Q(r,t.behaviors),null!=t.dataset&&((e,t)=>{if(!t)return e;const n=new WeakRef(t),r=new WeakRef(e);if("object"==typeof t||"function"==typeof t){rt(t).forEach(([e,t])=>{K(r?.deref?.(),e,t)});const i=M(t,(e,t)=>{K(r?.deref?.(),t,e),Xe(r?.deref?.(),e,t,K,n)});N(t,Symbol.dispose,i),N(e,Symbol.dispose,i)}else console.warn("Invalid dataset object:",t)})(r,t.dataset),null!=t.stores&&ee(r,t.stores),null!=t.mixins&&te(r,t.mixins),null!=t.style&&it(r,t.style),null!=t.aria&&((e,t)=>{if(!t)return e;const n=new WeakRef(t),r=new WeakRef(e);if("object"==typeof t||"function"==typeof t){rt(t).forEach(([e,t])=>{z(r?.deref?.(),"aria-"+(e?.toString?.()||e||""),t)});const i=M(t,(e,t)=>{z(r?.deref?.(),"aria-"+(t?.toString?.()||t||""),e),Xe(r,e,t,z,n,!0)});N(t,Symbol.dispose,i),N(e,Symbol.dispose,i)}else console.warn("Invalid ARIA object:",t)})(r,t.aria),null!=t.is&&Ge(r,"is",t.is,z,t,!0),null!=t.role&&Ge(r,"role",t.role,T,t),null!=t.slot&&Ge(r,"slot",t.slot,T,t),null!=t.part&&Ge(r,"part",t.part,z,t,!0),null!=t.name&&Ge(r,"name",t.name,z,t,!0),null!=t.type&&Ge(r,"type",t.type,z,t,!0),null!=t.icon&&Ge(r,"icon",t.icon,z,t,!0),null!=t.inert&&Ge(r,"inert",t.inert,z,t,!0),null!=t.hidden&&Ge(r,"hidden",t.visible??t.hidden,ie,t),null!=t.on&&ne(r,t.on),null!=t.rules&&t.rules.forEach?.(e=>(async(e,t)=>{const n=await(t?.(e));return it(e,n)})(r,e))),nt(r)};function Rt(e,t=4){let n=0;for(let r=0;r<e.length;r++){const i=e[r];if(" "===i)n+=1;else{if("\t"!==i)break;n+=t-n%t}}return n}function Ft(e,t,n=4){let r=0,i=0;for(;i<e.length&&r<t;){const t=e[i];if(" "===t)r+=1,i++;else{if("\t"!==t)break;r+=n-r%n,i++}}return e.slice(i)}function zt(e,t){for(e=Math.abs(e),t=Math.abs(t);t;)[e,t]=[t,e%t];return e}function Tt(e,t,n="floor",r=4){if(!t||t<=1)return e;const i=Rt(e,r);if(0===i)return e;let s;s="nearest"===n?Math.round(i/t)*t:"ceil"===n?Math.ceil(i/t)*t:Math.floor(i/t)*t;const o=i-s;return o>0?Ft(e,o,r):o<0?" ".repeat(-o)+e:e}function jt(e,{normalizeIndent:t=!0,ignoreFirstLine:n=!0,tabWidth:r=4,alignStep:i="auto",quantize:s="none"}={}){if(!e||"string"!=typeof e||-1===e.indexOf("<"))return e;e=e?.trim?.();const o=[],a=e.replace(/<(pre|textarea|script|style)\b[\s\S]*?<\/\1>/gi,e=>`\0${o.push(e)-1}\0`),l=(c=a).includes("\r\n")?"\r\n":c.includes("\r")?"\r":"\n";var c;const u=a.split(/\r\n|\n|\r/),d=n?1:0,{min:h,step:p}=function(e,{ignoreFirstLine:t=!0,tabWidth:n=4}={}){const r=e.split(/\r\n|\n|\r/),i=[];for(let u=t?1:0;u<r.length;u++){const e=r[u];""!==e.trim()&&i.push(Rt(e,n))}if(0===i.length)return{min:0,step:0,allEven:!0,allDiv4:!0};const s=Math.min(...i),o=i.map(e=>e-s).filter(e=>e>0);let a=0;for(const u of o)a=a?zt(a,u):u;const l=i.every(e=>e%2==0),c=i.every(e=>e%4==0);return a=0===a?c?4:l?2:1:a%4==0?4:a%2==0?2:1,{min:s,step:a,allEven:l,allDiv4:c}}(a,{ignoreFirstLine:n,tabWidth:r});if(t&&h>0)for(let g=d;g<u.length;g++){const e=u[g];""!==e.trim()&&(u[g]=Ft(e,h,r))}let f="auto"===i?p:i;if("none"!==s&&f>1)for(let g=d;g<u.length;g++){const e=u[g];""!==e.trim()&&(u[g]=Tt(e,f,s,r))}let m=u.join(l);m=function(e,{scope:t="void-only"}={}){if(!e||"string"!=typeof e)return e;const n=/* @__PURE__ */new Set(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"]);let r="",i=0;const s=e.length;for(;i<s;){const o=e[i];if("<"!==o){r+=o,i++;continue}if(e.startsWith("\x3c!--",i)){const t=e.indexOf("--\x3e",i+4);if(-1===t){r+=e.slice(i);break}r+=e.slice(i,t+3),i=t+3;continue}if("!"===e[i+1]||"?"===e[i+1]){const t=e.indexOf(">",i+2);if(-1===t){r+=e.slice(i);break}r+=e.slice(i,t+1),i=t+1;continue}if("/"===e[i+1]){const t=e.indexOf(">",i+2);if(-1===t){r+=e.slice(i);break}r+=e.slice(i,t+1),i=t+1;continue}let a=i+1;for(;a<s&&/\s/.test(e[a]);)a++;const l=a;for(;a<s&&/[A-Za-z0-9:-]/.test(e[a]);)a++;const c=e.slice(l,a).toLowerCase();let u=a,d=null;for(;u<s;){const t=e[u];if(d)t===d&&(d=null),u++;else if('"'===t||"'"===t)d=t,u++;else{if(">"===t)break;u++}}if(u>=s){r+=e.slice(i);break}const h=e.slice(i,u+1);if(!("all"===t||"input-only"===t&&"input"===c||"void-only"===t&&n.has(c))){r+=h,i=u+1;continue}let p="",f=null,m=!1;for(let e=0;e<h.length;e++){const t=h[e];f?(p+=t,t===f&&(f=null)):'"'!==t&&"'"!==t?"\n"!==t&&"\r"!==t&&"\t"!==t&&" "!==t?(p+=t,m=!1):m||(p+=" ",m=!0):(f=t,p+=t,m=!1)}p=p.replace(/\s*(\/?)\s*>$/,"$1>"),r+=p,i=u+1}return r}(m,{scope:"void-only"}),m=function(e,{preserveCommentGaps:t=!0}={}){if(!e||"string"!=typeof e)return e;if(!t)return e.replace(/>\s+</g,"><");const n="";let r=e;return r=r.replace(/-->([^\S\r\n]+)<!--/g,`--\x3e${n}\x3c!--`).replace(/-->([^\S\r\n]+)</g,`--\x3e${n}<`).replace(/>([^\S\r\n]+)<!--/g,`>${n}\x3c!--`),r=r.replace(/>\s+</g,"><"),r=r.replace(new RegExp(n,"g")," "),r}(m);const y=m.replace(/\u0000(\d+)\u0000/g,(e,t)=>o[+t]);return y?.trim?.()}function Ht(e,...t){const n=e.indexOf(t?.[0]??"");if(n<0){const e=t?.join?.("")??"";return/<([A-Za-z\/!?])[\w\W]*$/.test(e)&&!/>[\w\W]*$/.test(e)}const r=e.slice(0,n+1).join("");let i=!1,s=!1,o=!1;for(let a=0;a<r.length;a++){const e=r[a],t=r[a+1]??"";if(i)if(s||o){if(o){if('"'===e){o=!1;continue}}else if(s&&"'"===e){s=!1;continue}}else{if('"'===e){o=!0;continue}if("'"===e){s=!0;continue}if(">"===e){i=!1;continue}}else"<"===e&&/[A-Za-z\/!?]/.test(t)&&(i=!0,s=!1,o=!1)}return i}const Dt=/* @__PURE__ */new WeakMap,qt=e=>{const t=e.match(/^([a-zA-Z0-9\-]+)?(?:#([a-zA-Z0-9\-_]+))?((?:\.[a-zA-Z0-9\-_]+)*)$/);if(!t)return{tag:e,id:null,className:null};const[,n="div",r,i]=t;return{tag:n,id:r,className:i?i.replace(/\./g," ").trim():null}},Bt=e=>{if("string"!=typeof e||!e?.trim?.())return-1;const t=e.match(/^#{(\d+)}$/);return t?parseInt(t?.[1]??"-1"):-1},Vt=(e,t,n)=>{null!=n&&(n.boundParent=e);let r=xt(n,null,-1,e);Z(r)?r?.parentNode==e||r?.contains?.(e)||null==r||t?.replaceWith?.(l(r)&&("object"==typeof r?.value||"function"==typeof r?.value)&&Z(r?.value)?r?.value:r):t?.remove?.()},Ut=(e,...t)=>{if("string"==typeof e){if(e?.trim?.()?.startsWith?.("<")&&e?.trim?.()?.endsWith?.(">")){const t=(new DOMParser).parseFromString(jt(e?.trim?.()),"text/html"),n=t.querySelector("template")?.content??t.body;if(n instanceof HTMLBodyElement){const e=document.createDocumentFragment();return e.append(...Array.from(n.childNodes??[])),Array.from(e.childNodes)?.length>1?e:e?.childNodes?.[0]}if(n instanceof DocumentFragment)return n;if(n?.childNodes?.length>1){const e=document.createDocumentFragment();return e.append(...Array.from(n?.childNodes??[])),e}return n?.childNodes?.[0]??new Text(e)}return new Text(e)}return"function"==typeof e?Ut(e?.()):Array.isArray(e)&&t?function(e,...t){return e?.at?.(0)?.trim?.()?.startsWith?.("<")&&e?.at?.(-1)?.trim?.()?.endsWith?.(">")?function({createElement:e=null}={}){return function(e,...t){let n=[];const r=[],i=[];for(let p=0;p<e.length;p++)if(n.push(e?.[p]||""),p<t.length)if(e[p]?.trim()?.endsWith?.("<")){const e=qt(t?.[p]);n.push(e.tag||"div"),e.id&&n.push(` id="${e.id}"`),e.className&&n.push(` class="${e.className}"`)}else{const s=Ht(e,e?.[p]||"",e?.[p+1]||""),o=/[\w:\-\.\]]\s*=\s*$/.test(e[p]?.trim?.()??"")||e[p]?.trim?.()?.endsWith?.("="),l=e[p]?.trim?.()?.match?.(/['"]$/),c=e[p+1]?.trim?.()?.match?.(/^['"]/)??l,u=l&&c;if((o||u)&&s){const e=o&&!u,r=i.length;n.push(("string"==typeof t?.[p]?""!=t?.[p]?.trim?.():null!=t?.[p])?e?`"#{${r}}"`:`#{${r}}`:""),i.push(t?.[p])}else if(!s){const e=r.length;n.push(("string"==typeof t?.[p]?""!=t?.[p]?.trim?.():null!=t?.[p])?a(t?.[p])?String(t?.[p])?.trim?.():`\x3c!--o:${e}--\x3e`:""),r.push(t?.[p])}}const s=jt(n.join("").trim()),o=(new DOMParser).parseFromString(s,"text/html"),l=o instanceof HTMLTemplateElement||o?.matches?.("template"),c=(l?o:o.querySelector("template"))?.content??o.body??o,u=document.createDocumentFragment(),d=Array.from(c.childNodes)?.filter(e=>e instanceof Node).map(e=>{return t=e?.parentNode,null!=t&&t instanceof HTMLElement&&!(t instanceof DocumentFragment||t instanceof HTMLBodyElement&&t!=document.body)||e?.parentNode==u||(e?.remove?.(),null!=e&&u?.append?.(e)),e;var t});let h=[];return d.forEach(e=>{const t=e?document.createTreeWalker(e,NodeFilter.SHOW_ALL,null):null;do{const e=t?.currentNode;h.push(e)}while(t?.nextNode?.())}),h?.filter?.(e=>e?.nodeType==Node.COMMENT_NODE)?.forEach?.(e=>{if(e?.nodeValue?.trim?.()?.includes?.("o:")&&Number.isInteger(parseInt(e?.nodeValue?.trim?.()?.slice?.(2)??"-1"))){let t=r?.[parseInt(e?.nodeValue?.trim?.()?.slice?.(2)??"-1")??-1];if(null==t||void 0===t||""==("string"==typeof t?t:null)?.trim?.())e?.remove?.();else{const n=e?.parentNode;Array.isArray(t)||t instanceof Map||t instanceof Set?Vt?.(n,e,t=_t(t,null,n)):null!=t&&Vt?.(n,e,t)}}e?.isConnected&&e?.remove?.()}),h?.filter(e=>e.nodeType==Node.ELEMENT_NODE)?.map?.(e=>{((e,t)=>{if(!e)return e;if(null!=e){const n=[],r=t=>{const r=Array.from(e?.attributes||[]).find(e=>e.name==t&&e.value?.includes?.("#{"));if(r){const e=[t,Bt(r?.value)??-1];return n.push(e),e}return[t,-1]};["dataset","style","classList","visible","aria","value","ref"].forEach(e=>r(e));const i=(t,n)=>{const r=[];for(const i of Array.from(e?.attributes||[])){const e=Array.isArray(t)?t?.some?.(e=>""==e):""==t,s=(Array.isArray(t)?t.find(e=>i.name?.startsWith?.(e)):t=i.name?.startsWith?.(t)?t:"")??"",o=i.name.trim()?.replace?.(s,""),a=i.value?.includes?.("#{")&&i.value?.includes?.("}"),l=Bt(i?.value),c=Array.isArray(n)?n?.some?.(e=>o?.startsWith?.(e)):n==o;a&&(""==s&&e||""!=s)&&l>=0&&!c&&r.push([o,l])}return r},s=(t,n,r="")=>{const i=/* @__PURE__ */new Map;for(const s of Array.from(e?.attributes||[])){const e=Array.isArray(t)?t?.some?.(e=>""==e):""==t,o=(Array.isArray(t)?t.find(e=>s.name?.startsWith?.(e)):t=s.name?.startsWith?.(t)?t:"")??"",a=s.name.trim()?.replace?.(o,""),l=s.value?.includes?.("#{")&&s.value?.includes?.("}"),c=Bt(s?.value)??-1,u=Array.isArray(n)?n?.some?.(e=>a?.startsWith?.(e)):n==a,d=(Array.isArray(r)?r?.some?.(e=>s.name===e):s.name===r)&&""!==r;if(l&&(""==o&&e||""!=o||d)&&c>=0&&!u){const e=d?s.name:a;i.has(e)||i.set(e,[]),i.get(e)?.push(c)}}return Array.from(i.entries())};let o=i(["attr:",""],["ref"]),a=i(["prop:"],[]),l=s(["on:","@"],[],""),c=s(["ref:"],[],["ref"]);const u=Object.fromEntries(n?.filter?.(e=>e[1]>=0)?.map?.(e=>[e[0],t?.[e[1]]??null])??[]);u.attributes=Object.fromEntries(o?.filter?.(e=>e[1]>=0)?.map?.(e=>[e[0],t?.[e[1]]??null])??[]),u.properties=Object.fromEntries(a?.filter?.(e=>e[1]>=0)?.map?.(e=>[e[0],t?.[e[1]]??null])??[]),u.on=Object.fromEntries(l?.filter?.(e=>e[1]?.some?.(e=>e>=0))?.map?.(e=>[e[0],e[1]?.map?.(e=>t?.[e]).filter(e=>null!=e)])??[]);const d=n?.find?.(e=>"ref"==e[0]&&e[1]>=0)?.[1];if(null!=d&&d>=0){const n=t?.[d];"function"==typeof n?n?.(e):null!=n&&"object"==typeof n&&(n.value=e)}c?.forEach?.(n=>{const r=n?.[1]?.filter?.(e=>null!=e&&e>=0)?.map?.(e=>t?.[e])?.filter?.(e=>null!=e);r?.forEach?.(t=>{"function"==typeof t?t?.(e):null!=t&&"object"==typeof t&&(t.value=e)})}),(e=>{if(null==e)return;const t=e=>o?.some?.(t=>t[0]==e)||e?.startsWith?.("ref:")||"ref"==e;for(const n of Array.from(e?.attributes||[]))(n.value?.includes?.("#{")&&n.value?.includes?.("}")&&t(n.name)||n.value?.startsWith?.("#{")&&n.value?.endsWith?.("}")||n.name?.includes?.(":")||n.name?.includes?.("ref:")||"ref"==n.name)&&e?.removeAttribute?.(n.name)})(e),Dt?.has?.(e)||Dt?.set?.(e,Ot(e,u))}Dt?.get?.(e)})(e,i)}),Array.from(u?.childNodes)?.length>1?u:u?.childNodes?.[0]}}({createElement:null})(e,...t):((e,...t)=>{const n=[];for(let i=0;i<e?.length;i++){const r=e?.[i],s=t?.[i];n.push(Ut(r)),n.push(s)}if(n?.length<=1)return xt(n?.[0],null,0);const r=document.createDocumentFragment();return r.append(...n?.filter?.(e=>null!=e)?.map?.((e,t)=>xt(e,null,t))?.filter?.(e=>null!=e)),r})(e,...t)}(e,...t):e instanceof Node?e:xt(e)},Xt=(e,t,n=null)=>xt(((e,t)=>"number"==typeof t&&t<0||"string"==typeof t&&!t||null==t?{element:""}:e instanceof Map||"function"==typeof e?.get?e.get(t):e instanceof Set||"function"==typeof e?.has?e.has(t)?t:null:e?.[t]??{element:""})(e,t),null,-1,n);class Gt{#e=document.createComment("");current;mapped;boundParent=null;constructor(e,t){this.#e=document.createComment(""),this.current=e?.current??{value:-1},this.mapped=e?.mapped??t??[];const n=M([e?.current,"value"],(e,t,n)=>this._onUpdate(e,t,n));n&&N(this,Symbol.dispose,n)}get element(){const e=Xt(this.mapped,this.current?.value??-1,this.boundParent)??this.#e,t=Y(e?.parentElement)?e?.parentElement:this.boundParent;return this.boundParent??=Y(t)??this.boundParent,null==e||e?.parentNode==this.boundParent&&e?.parentNode||this.boundParent&&St(this.boundParent,e),queueMicrotask(()=>{const t=Y(e?.parentElement)?e?.parentElement:this.boundParent;this.boundParent??=Y(t)??this.boundParent}),e}elementForPotentialParent(e){return Y(e)&&(this.boundParent=e),this.current?.[C]?.(),this.element}_onUpdate(e,t,n){const r=e??this.current?.value;if(!n||o(r,n)){const e=n??this.current?.value;this.current&&(this.current.value=r??-1);const t=Xt(this.mapped,e??r??-1)?.parentNode??this.boundParent;this.boundParent=t??this.boundParent;const s=Xt(this.mapped,r??-1,t)??this.#e,o=Xt(this.mapped,e??-1,t);if(Z(t))if(Z(s))if(Z(o))try{Mt(t,o,s)}catch(i){console.warn(i)}else St(t,s);else o&&!s&&$t(t,o)}}}class Kt{constructor(){}set(e,t,n){return Reflect.set(Xt(e?.mapped,e?.current?.value??-1)??e,t,n)}has(e,t){return Reflect.has(Xt(e?.mapped,e?.current?.value??-1)??e,t)}get(e,t,n){return"elementForPotentialParent"!=t||!(t in e)&&null==e?.[t]?"element"!=t||!(t in e)&&null==e?.[t]?"_onUpdate"!=t||!(t in e)&&null==e?.[t]?p(Xt(e?.mapped,e?.current?.value??-1)??e,t):e?._onUpdate?.bind(e):e?.element:e?.elementForPotentialParent?.bind(e)}ownKeys(e){return Reflect.ownKeys(Xt(e?.mapped,e?.current?.value??-1)??e)}apply(e,t,n){return Reflect.apply(Xt(e?.mapped,e?.current?.value??-1)??e,t,n)}deleteProperty(e,t){return Reflect.deleteProperty(Xt(e?.mapped,e?.current?.value??-1)??e,t)}setPrototypeOf(e,t){return Reflect.setPrototypeOf(Xt(e?.mapped,e?.current?.value??-1)??e,t)}getPrototypeOf(e){return Reflect.getPrototypeOf(Xt(e?.mapped,e?.current?.value??-1)??e)}defineProperty(e,t,n){return Reflect.defineProperty(Xt(e?.mapped,e?.current?.value??-1)??e,t,n)}getOwnPropertyDescriptor(e,t){return Reflect.getOwnPropertyDescriptor(Xt(e?.mapped,e?.current?.value??-1)??e,t)}preventExtensions(e){return Reflect.preventExtensions(Xt(e?.mapped,e?.current?.value??-1)??e)}isExtensible(e){return Reflect.isExtensible(Xt(e?.mapped,e?.current?.value??-1)??e)}}const Yt=(e,t)=>h?.getOrInsertComputed?.(e,()=>new Proxy(e instanceof Gt?e:new Gt(e,t),new Kt)),Jt="rs-nav-ctx",Zt="rs-nav-stack",Qt=L({index:0,length:0,action:"MANUAL",view:"",canBack:!1,canForward:!1,entries:[]}),en=()=>{try{return history.state?.[Jt]||Qt?.entries?.[Qt?.index]||{}}catch(e){return{}}},tn=()=>{try{sessionStorage.setItem(Zt,JSON.stringify(Qt?.entries))}catch(e){}},nn=(e,t)=>{try{const n=void 0!==t?t:history?.state||{};return a(n)&&null!==n?{value:n,[Jt]:e}:null===n?{[Jt]:e}:{...n,[Jt]:e}}catch(n){return{[Jt]:e}}};let rn=!1;const sn="undefined"!=typeof history?history.pushState.bind(history):void 0,on="undefined"!=typeof history?history.replaceState.bind(history):void 0,an="undefined"!=typeof history?history.go.bind(history):void 0,ln="undefined"!=typeof history?history.forward.bind(history):void 0;"undefined"!=typeof history&&history.back.bind(history);const cn=(e,t)=>{const n=en();Qt.index=n.index||0,Qt.length=history.length,Qt.action=e||"POP",Qt.view=t||n.view||location.hash,Qt.canBack=Qt.index>0},un=(e,t=!1)=>{const n=e.startsWith("#")?e:`#${e}`;if(t&&Qt?.index>0){const e=Qt?.entries?.[Qt?.index-1];if(e&&e.view===n)return void history.back()}t?(Qt?.entries?.[Qt.index]?.view!==n||Qt?.entries?.[Qt.index]?.view)&&history?.replaceState?.(null,"",n):history?.pushState?.(null,"",n)},dn=(e=`#${location.hash?.replace?.(/^#/,"")||"home"}`,t={})=>{const n=L({value:e});return M([Qt,"view"],e=>{if(t.ignoreBack&&"BACK"===Qt.action)return;let r=e;t.withoutHashPrefix&&(r=e.replace(/^#/,"")),n.value!==r&&(n.value=r)}),M([n,"value"],e=>{let n=e;t.withoutHashPrefix&&!e.startsWith("#")&&(n=`#${e}`),Qt.view!==n&&un(n)}),n},hn=/* @__PURE__ */new Map;let pn=!1,fn=!1,mn=0,yn={},gn=!1;const vn=e=>{gn=e},bn=()=>`closeable-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,wn=e=>{const t=e.id||bn(),n=Object.assign(e,{id:t});return null==n?.hashId&&(n.hashId=t),hn.set(t,n),yn.debug&&console.log("[BackNav] Registered:",t,"priority:",e.priority),()=>xn(t)},xn=e=>{const t=hn.delete(e);return yn.debug&&t&&console.log("[BackNav] Unregistered:",e),t},Pn=(e={})=>{if(pn)return console.warn("[BackNav] Already initialized"),()=>{};if(yn={...e},pn=!0,((e="")=>{if(rn)return;rn=!0;const t=en(),n=e||location.hash||"#";let r=(()=>{try{const e=sessionStorage.getItem(Zt);return e?JSON.parse(e):[]}catch(e){return[]}})();const i=t.index||0;if(r&&(0===r?.length||i>=r?.length)&&r.length<=i&&(r[i]={index:i,depth:history.length,action:t?.action||"REPLACE",view:n,timestamp:Date.now()}),Qt.entries=r,t.timestamp)Qt.index=t.index||0,Qt.view=t.view||n,Qt?.entries?.[Qt?.index]||(Qt.entries[Qt.index]=t,tn());else{const e={index:i,depth:history.length,action:"REPLACE",view:n,timestamp:Date.now()};history?.replaceState?.(nn(e),"",location.hash),Qt?.entries&&(Qt.entries[i]=e),tn()}cn(en()?.action||"REPLACE",n),history.go=(e=0)=>{const t=en();t.index=Math.max(0,Math.min(Qt.length,(t.index||0)+e)),Object.assign(t,Qt.entries[t.index]||{}),vn(!0);const n=an?.(e);return setTimeout(()=>{vn(!1)},0),cn(t?.action||"POP",t?.view),n},history.back=()=>history.go(-1),history.forward=()=>history.go(1),history.pushState=(e,t,n)=>{const r=en(),i=(r.index||0)+1,s={index:i,depth:history.length+1,action:"PUSH",view:n?String(n):r.view||"",timestamp:Date.now()},o=sn?.(nn(s,e),t,n);return Qt.entries=Qt?.entries?.slice?.(0,i),Qt.entries?.push?.(s),tn(),cn("PUSH",s.view),o},history.replaceState=(e,t,n)=>{const r=en(),i=r?.index||0,s={...r,index:i,depth:history.length,action:"REPLACE",view:n?String(n):r?.view||"",timestamp:Date.now()},o=on?.(nn(s,e),t,n);return Qt?.entries&&(Qt.entries[i]=s,Qt.entries[Qt.index].view=n?String(n):r?.view||""),tn(),cn("REPLACE",s.view),o},se(window,"popstate",e=>{const t=e.state?.[Jt],n=Qt.index??0;if(!t){const t={index:n+1,depth:history.length,action:"PUSH",view:location.hash||"#",timestamp:Date.now()};return history.replaceState(nn(t,e.state),"",location.hash),Qt.entries=Qt?.entries?.slice?.(0,t.index),Qt?.entries?.push?.(t),tn(),void cn("PUSH",t.view)}{const e=t?.index??0;let r="POP";e<n?r="BACK":e>n&&(r="FORWARD"),cn(r,t?.view||location.hash)}}),se(window,"hashchange",e=>{if(gn)return;const t=location.hash||"#";Qt.view!==t&&cn("PUSH",t)})})(location.hash),!1!==e.pushInitialState&&!e.skipPopstateHandler){mn=0,vn(!0);const e={...history.state||{},backNav:!0,depth:mn};history.pushState(e,"",location.hash||"#"),vn(!1)}let t;return e.skipPopstateHandler||(t=se(window,"popstate",e=>{e?.state?.action||(e=>{if(fn)return!1;if(gn)return gn=!1,!1;if(e?.state?.action)return!1;fn=!0;try{let t;if(gn=!0,Qt.entries&&("BACK"===Qt.action||"POP"===Qt.action)){const e=Qt.entries[Qt.index+1];e&&(t=e.view)}return(e=>{const t=(e=>{const t=(e=>Array.from(hn.values()).filter(t=>t.element&&!t.element.deref()?(hn.delete(t.id),!1):t.isActive(e)).sort((e,t)=>t.priority-e.priority))(e);return t[0]||null})(e);if(!t)return null;yn.debug&&console.log("[BackNav] Closing:",t.id,"priority:",t.priority);const n=t?.close?.(e);return 0!=n?t:null})(t)??1?(gn=!1,fn=!1,!1):(e.preventDefault?.(),gn=!0,ln?.(),setTimeout(()=>{gn=!1},0),fn=!1,!0)}finally{return gn=!1,fn=!1,!1}})(e)})),yn.debug&&console.log("[BackNav] Initialized",e.skipPopstateHandler?"(external handler)":""),()=>{t?.(),pn=!1,hn.clear(),yn.debug&&console.log("[BackNav] Destroyed")}},Sn=(e,t,n)=>wn({id:`modal-${e.id||bn()}`,priority:80,element:new WeakRef(e),group:"modal",isActive:t??(()=>{const t=e;return t?.isConnected&&!t?.hasAttribute?.("data-hidden")&&!1!==t?.checkVisibility?.({opacityProperty:!0,visibilityProperty:!0})}),close:()=>(n?.(),e?.remove?.(),!1)}),En=(e,t,n)=>wn({id:`sidebar-${e.id||bn()}`,priority:60,element:new WeakRef(e),group:"sidebar",isActive:()=>{const e=t.value;return!!e&&"false"!==String(e)},close:()=>(t.value=!1,n?.(),!1)}),An=/* @__PURE__ */new Map,kn=(e,t,n,r)=>{if(null!=n)return An.has(n)&&(An.get(n)?.[0]?.(),An.delete(n)),An.getOrInsertComputed?.(n,()=>{const i=(e??localStorage).getItem(n)??r?.value??r,s=m(t)?t:_(i);s.value??=i;const a=new WeakRef(s),l=M([s,"value"],t=>{b(a?.deref?.(),()=>{(e??localStorage).setItem(n,t)})}),c=t=>{t.storageArea==(e??localStorage)&&t.key==n&&o(s.value,t.newValue)&&(s.value=t.newValue)};return addEventListener("storage",c),[()=>{l?.(),removeEventListener("storage",c)},s]})},Mn=(e,t,n)=>{if(null==n)return;const r=e??matchMedia(n),i=r?.matches||!1,s=m(t)?t:O(i);s.value??=i;const o=e=>s.value=e.matches;return r?.addEventListener?.("change",o),()=>{r?.removeEventListener?.("change",o)}},Nn=(e,t,n)=>{if(null==e)return;const r=n?.value??("object"!=typeof n?n:null)??null==e?.getAttribute?.("data-hidden"),i=m(t)?t:O(!!r),s=Ge(e,"data-hidden",i,ie),o=[e=>{i.value="u2-hidden"!=e?.type},{passive:!0}],a=new WeakRef(e);return e?.addEventListener?.("u2-hidden",...o),e?.addEventListener?.("u2-appear",...o),()=>{const e=a?.deref?.();s?.(),e?.removeEventListener?.("u2-hidden",...o),e?.removeEventListener?.("u2-appear",...o)}},$n=(e,t,n,r)=>{const i=e?.getAttribute?.(n)??("boolean"==typeof r?r?"":null:y(r));if(!e)return;const s=m(t)?t:_(i);return g(s)&&!v(s.value)&&(s.value=v(i)??s.value??""),Ge(e,n,s,z,null,!0)},In=(e,t,n,r)=>{const i="border-box"==r?e?.["inline"==n?"offsetWidth":"offsetHeight"]:e?.["inline"==n?"clientWidth":"clientHeight"]-ce(e,n),s=m(t)?t:k(i);g(s)&&(s.value||=(i??s.value)||1);const o=new ResizeObserver(e=>{g(s)&&("border-box"==r&&(s.value="inline"==n?e[0].borderBoxSize[0].inlineSize:e[0].borderBoxSize[0].blockSize),"content-box"==r&&(s.value="inline"==n?e[0].contentBoxSize[0].inlineSize:e[0].contentBoxSize[0].blockSize),"device-pixel-content-box"==r&&(s.value="inline"==n?e[0].devicePixelContentBoxSize[0].inlineSize:e[0].devicePixelContentBoxSize[0].blockSize))});return(e?.element??e?.self??e)instanceof HTMLElement&&o?.observe?.(e?.element??e?.self??e,{box:r}),()=>o?.disconnect?.()},Wn=(e,t,n,r)=>{const i=e instanceof WeakRef?e:new WeakRef(e);null!=r&&"number"==typeof(r?.value??r)&&e?.scrollTo?.({["block"==n?"top":"left"]:r?.value??r});const s=e?.["block"==n?"scrollTop":"scrollLeft"],o=m(t)?t:k(s||0);g(o)&&(o.value||=(s??o.value)||1),o.value||=(s??o.value)||0;const a=M([o,"value"],t=>{Math.abs(("block"==n?e?.scrollTop:e?.scrollLeft)-(o?.value??o))>.001&&e?.scrollTo?.({["block"==n?"top":"left"]:o?.value??o})}),l=[e=>{o.value=("block"==n?i?.deref?.()?.scrollTop:i?.deref?.()?.scrollLeft)||0},{passive:!0}];return e?.addEventListener?.("scroll",...l),()=>{i?.deref?.()?.removeEventListener?.("scroll",...l),a?.()}},Cn=(t,n)=>{const r=!!t?.checked||!1,i=m(n)?n:O(r);g(i)&&(i.value??=r);const s=Ue(t,(o=e(o=i),e=>{const t=f(o);null!=t&&(t.value=nt('input[type="radio"], input[type="checkbox"], input:checked',e?.target)?.checked??t?.value)}));var o;const a=M([i,"value"],e=>{t&&t?.checked!=e&&G(t,e)});return()=>{a?.(),s?.()}},Ln=(r,i)=>{if(a(r))return;if(!r||!(r instanceof Node||r?.element instanceof Node))return;const s=r?.value??"",l=m(i)?i:_(s);g(l)&&(l.value??=s);const c=Ue(r,(u=e(u=l),e=>{const t=f(u);null!=t&&o(e?.target?.value,t?.value)&&(t.value=(nt("input",e?.target)?.value??t?.value)||"")}));var u;const d=new WeakRef(l),h=M([l,"value"],e=>{r&&o(r?.value,e?.value??e)&&b(t(d),()=>{r.value=n(t(d))??n(e),r?.dispatchEvent?.(new Event("change",{bubbles:!0}))})});return()=>{h?.(),c?.()}},_n=(t,n)=>{if(a(t))return;if(!t||!(t instanceof Node||t?.element instanceof Node))return;const r=Number(t?.valueAsNumber)||0,i=m(n)?n:k(r);g(i)&&(i.value??=r);const s=Ue(t,(l=e(l=i),e=>{const t=f(l);null!=t&&o(t?.value,e?.target?.valueAsNumber)&&(t.value=Number(nt("input",e?.target)?.valueAsNumber||0)??0)}));var l;const c=M([i,"value"],e=>{t&&("range"==t.type||"number"==t.type)&&"number"==typeof t?.valueAsNumber&&o(t?.valueAsNumber,e)&&(t.valueAsNumber=Number(e),t?.dispatchEvent?.(new Event("change",{bubbles:!0})))});return()=>{c?.(),s?.()}},On=(e,t)=>{const n=oe?.[ae()]||0,r=Number(n)||0,i=m(t)?t:k(r);return l(i)&&(i.value=r),le(()=>{i.value=oe?.[ae()]||0})},Rn=(e,t,n,...r)=>{if(n==$n||n==z){const t=je?.get?.(e)?.get?.(z)?.get?.(r[0])?.[0];if(t)return t}const i=(t??R)?.(null),s=n?.(e,i,...r);return s&&i&&N(i,Symbol.dispose,s),i},Fn=(e,...t)=>Rn(e,k,On,...t),zn=(e,...t)=>Rn(e,_,$n,...t),Tn=(e,...t)=>Rn(e,_,Ln,...t),jn=(e,...t)=>Rn(e,k,_n,...t),Hn=(...e)=>{if(An.has(e[0]))return An.get(e[0])?.[1];const t=kn,n=_,r=(n??R)?.(null),i=t?.(null,r,...e),[s,o]=i;return s&&r&&N(r,Symbol.dispose,s),r},Dn=(e,...t)=>Rn(e,k,In,...t),qn=(e,...t)=>Rn(e,O,Cn,...t),Bn=(e,...t)=>Rn(e,k,Wn,...t),Vn=(...e)=>Rn(null,O,Mn,...e),Un=/* @__PURE__ */new Map,Xn=/* @__PURE__ */new WeakMap,Gn=/* @__PURE__ */new WeakMap,Kn=/* @__PURE__ */new WeakMap,Yn=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Jn=e=>{const t=Yn(e);return["border-box","content-box","device-pixel-content-box"].indexOf(t)>=0?t:null},Zn=e=>{const t=Yn(e);return t?.startsWith?.("inline")?"inline":t?.startsWith?.("block")?"block":null},Qn=Symbol.for("@render@"),er=Symbol.for("@defKeys@"),tr="undefined"!=typeof document?document?.createElement?.("style"):null,nr=(e,t,n)=>"attr"==e?zn.bind(null,t,n||""):"media"==e?Vn:"query"==e?e=>nt?.(n||e||"",t):"query-shadow"==e?e=>nt?.(n||e||"",t?.shadowRoot??t):"localStorage"==e?Hn:"inline-size"==e?Dn.bind(null,t,"inline",Jn(n)||"border-box"):"content-box"==e?Dn.bind(null,t,Zn(n)||"inline","content-box"):"block-size"==e?Dn.bind(null,t,"block",Jn(n)||"border-box"):"border-box"==e?Dn.bind(null,t,Zn(n)||"inline","border-box"):"scroll"==e?Bn.bind(null,t,Zn(n)||"inline"):("device-pixel-content-box"==e&&Dn.bind(null,t,Zn(n)||"inline","device-pixel-content-box"),"checked"==e?qn.bind(null,t):"value"==e?Tn.bind(null,t):"value-as-number"==e?jn.bind(null,t):R);tr&&"undefined"!=typeof document&&document.querySelector?.("head")?.appendChild?.(tr);const rr=e=>"query"==e||"query-shadow"==e?"input":"media"!=e&&("localStorage"==e||"attr"==e?null:"inline-size"==e||"block-size"==e||"border-box"==e||"content-box"==e||"scroll"==e||"device-pixel-content-box"==e?0:"checked"!=e&&("value"==e?"":"value-as-number"==e?0:null));function ir(e){const t=(e?.prototype??e)?.$init??e?.$init;return(e?.prototype??e).$init??=function(...n){const r=this;t?.call?.(r,...n);const i=r?.[er]??e?.prototype?.[er]??e?.[er];return null!=i&&Object.entries(i).forEach(([e,t])=>{const n=r[e];null!=t&&Object.defineProperty(r,e,t),r[e]=n||r[e]}),r},e}function sr(e,t=null){return function(n,r){return customElements.define(e,n,t),n}}function or({attribute:e,source:t,name:n,from:r}={}){return function(i,s){if(null!=(e??=n??s)){i.observedAttributes||(i.observedAttributes=[]);const t="string"==typeof e?e:n??s;i.observedAttributes.indexOf(t)<0&&i.observedAttributes.push(t)}i[er]||(i[er]={}),i[er][s]={get(){const e=this,i=e[Qn],o=r?r instanceof HTMLElement?r:"string"==typeof r?nt?.(r,e):e:e;let a=Gn.get(e),l=a?.get?.(s);return null==l&&null!=t&&(a||Gn.set(e,a=/* @__PURE__ */new Map),a?.has?.(s)||a?.set?.(s,l=nr(t,o,n||s)?.(rr(t)))),i?l:l?.element instanceof HTMLElement?l?.element:"object"!=typeof l&&"function"!=typeof l||null==l?.value&&!("value"in l)?l:l?.value},set(e){const i=this,o=r?r instanceof HTMLElement?r:"string"==typeof r?nt?.(r,i):i:i;let a=Gn.get(i),l=a?.get?.(s);null==l&&null!=t?(a||Gn.set(i,a=/* @__PURE__ */new Map),a?.has?.(s)||a?.set?.(s,l=nr(t,o,n||s)?.(("object"==typeof e||"function"==typeof e?e?.value:null)??e??rr(t)))):"object"!=typeof l&&"function"!=typeof l||("object"!=typeof e||null==e||(null!=e?.value||"value"in e)&&"object"!=typeof e?.value&&"function"!=typeof e?.value?l.value=("object"==typeof e||"function"==typeof e?e?.value:null)??e:Object.assign(l,e?.value??e))},enumerable:!0,configurable:!0}}}tr&&(tr.innerHTML="@layer ux-preload {\n        :host { display: none; }\n    }");const ar=/* @__PURE__ */new WeakMap,lr=(e,t)=>{let n=ar.get(e);n||ar.set(e,n=[]),t&&n.indexOf(t)<0&&n.push(t),e.shadowRoot&&(e.shadowRoot.adoptedStyleSheets=[...e.shadowRoot.adoptedStyleSheets||[],...n.filter(t=>!e.shadowRoot.adoptedStyleSheets?.includes(t))])},cr=(e,t)=>{if(!t)return null;let n=t;if("function"==typeof t)try{const r=new WeakRef(e);n=t.call(e,r)}catch(a){return console.warn("Error calling styles function:",a),null}if(n&&"undefined"!=typeof CSSStyleSheet&&n instanceof CSSStyleSheet)return lr(e,n),null;if(n instanceof Promise)return n.then(t=>{t instanceof CSSStyleSheet?lr(e,t):null!=t&&cr(e,t)}).catch(e=>{console.warn("Error loading adopted stylesheet:",e)}),null;if("string"==typeof n||n instanceof Blob||n instanceof File){const t=de(n,"ux-layer");if(t){let n=ar.get(e);n||ar.set(e,n=[]);const r=t=>{t&&n.indexOf(t)<0&&n.push(t),e.shadowRoot&&(e.shadowRoot.adoptedStyleSheets=[...e.shadowRoot.adoptedStyleSheets||[],...n.filter(t=>!e.shadowRoot.adoptedStyleSheets?.includes(t))])};return t instanceof Promise?(t.then(r).catch(e=>{console.warn("Error loading adopted stylesheet:",e)}),null):(r(t),null)}}const r="function"==typeof t||"object"==typeof t?Xn:Un,i=r.get(t);let s=i?.styleElement,o=i?.vars;if(!i){new WeakRef(e);let i="",a=[];"string"==typeof n?i=n||"":"object"==typeof n&&null!=n&&(n instanceof HTMLStyleElement?s=n:(i="string"==typeof n.css?n.css:"string"==typeof n?n:String(n),a=n?.props??a,o=n?.vars??o)),!s&&i&&(s=pe(i,e,"ux-layer")),r.set(t,{css:i,props:a,vars:o,styleElement:s})}return s},ur=e=>!(e instanceof HTMLDivElement||e instanceof HTMLImageElement||e instanceof HTMLVideoElement||e instanceof HTMLCanvasElement||e?.hasAttribute?.("is")||null!=e?.getAttribute?.("is")),dr=(e=HTMLElement)=>Kn.getOrInsertComputed(e,()=>ir(class extends e{#p;#f;#m;#y=!1;styles;initialAttributes;styleLibs=[];adoptedStyleSheets=[];styleLayers=()=>[];render=e=>document.createElement("slot");constructor(...e){if(super(),ur(this)){const e=ue(this.shadowRoot??this.createShadowRoot?.()??this.attachShadow({mode:"open"})),t=this.#m??=tr?.cloneNode?.(!0),n=e.querySelector('style[data-type="ux-layer"]');n?n.after(t):e.prepend(t)}this.styleLibs??=[]}$makeLayers(){return`@layer ${["ux-preload","ux-layer",...this.styleLayers?.call?.(this)??[]].join?.(",")??""};`}$init;onInitialize(e){return this}onRender(e){return this}getProperty(e){const t=this[Qn];this[Qn]=!0;const n=this[e];return this[Qn]=t,t||delete this[Qn],n}loadStyleLibrary(e){const t=this.shadowRoot,n="function"==typeof e?e?.(t):e;if(n instanceof HTMLStyleElement)this.styleLibs?.push?.(n),this.#f?.isConnected?this.#f?.before?.(n):this.shadowRoot?.prepend?.(n);else if(n instanceof CSSStyleSheet){let e=ar.get(this);e||ar.set(this,e=[]),e.indexOf(n)<0&&e.push(n),t&&(t.adoptedStyleSheets=[...t.adoptedStyleSheets||[],...e.filter(e=>!t.adoptedStyleSheets?.includes(e))])}else{const e=de(n,"ux-layer");let r=ar.get(this);r||ar.set(this,r=[]);const i=e=>{e&&r.indexOf(e)<0&&r.push(e),t&&(t.adoptedStyleSheets=[...t.adoptedStyleSheets||[],...r.filter(e=>!t.adoptedStyleSheets?.includes(e))])};e instanceof Promise?e.then(i).catch(()=>{}):e&&i(e)}return this}createShadowRoot(){return ue(this.shadowRoot??this.attachShadow({mode:"open"}))}connectedCallback(){const e=new WeakRef(this);if(!this.#y){this.#y=!0;const t=ur(this)?this.createShadowRoot?.()??this.shadowRoot??this.attachShadow({mode:"open"}):this.shadowRoot;if(ir(this).$init?.call?.(this),he(this,"function"==typeof this.initialAttributes?this.initialAttributes?.call?.(this):this.initialAttributes),this.onInitialize?.call(this,e),this[Qn]=!0,ur(this)&&t){const n=this.render?.call?.(this,e)??document.createElement("slot"),r=cr(this,this.styles);r instanceof HTMLStyleElement&&(this.#f=r),t.append(...[Ut`<style data-type="ux-layer" prop:innerHTML=${this.$makeLayers()}></style>`,this.#m,...this.styleLibs.map(e=>e.cloneNode?.(!0))||[],r,n]?.filter?.(e=>null!=e&&Z(e)));const i=ar.get(this)||[];i.length>0&&(t.adoptedStyleSheets=[...i.filter(e=>!t.adoptedStyleSheets?.includes(e)),.../* @__PURE__ */new Set([...t.adoptedStyleSheets||[]])])}this.onRender?.call?.(this,e),delete this[Qn]}return this}})),hr=/* @__PURE__ */new WeakMap,pr=(e,t,n,r={})=>{if(!e||"function"!=typeof e.addEventListener)return()=>{};const i={capture:Boolean(r.capture),passive:Boolean(r.passive)},s=((e,t)=>`${e}|c:${t?.capture?"1":"0"}|p:${t?.passive?"1":"0"}`)(t,i);let o=hr.get(e);o||(o=/* @__PURE__ */new Map,hr.set(e,o));let a=o.get(s);if(!a){const n=/* @__PURE__ */new Set,r=e=>{for(const r of Array.from(n))try{r(e)}catch(t){console.warn(t)}};o.set(s,a={handlers:n,listener:r,options:i}),e.addEventListener(t,r,i)}return a.handlers.add(n),()=>{const r=hr.get(e),i=r?.get(s);i&&(i.handlers.delete(n),i.handlers.size>0||(e.removeEventListener(t,i.listener,i.options),r?.delete(s),r&&0===r.size&&hr.delete(e)))}},fr=/* @__PURE__ */new WeakMap,mr=e=>{const t=e?.element??e;return t instanceof HTMLElement?t:null},yr=(e,t,n)=>!!e&&("handled"===e?n:t),gr="undefined"!=typeof document?document?.documentElement:null,vr=(e,t,n)=>{if(null!=e?.deref?.())return e.deref()[t]=n},br=(e,t)=>{if(!e)throw Error("Element is null...");t&&me(t),ye(e)},wr=(e,t)=>n=>{const r=n;if(t??=r?.target??t,!t.dataset.dragging){const n=[r.clientX,r.clientY];r?.pointerId>=0&&t?.setPointerCapture?.(r?.pointerId);const i=i=>{const s=i;if(s?.preventDefault?.(),s?.pointerId==r?.pointerId){const a=[i.clientX,i.clientY];Math.hypot(a[0]-n[0],a[1]-n[1])>2&&(t?.style?.setProperty?.("will-change","inset, transform, translate, z-index"),o?.(s),e?.(r))}},s=e=>{const n=e;n?.pointerId==r?.pointerId&&(t?.releasePointerCapture?.(r?.pointerId),o?.(n))},o=e=>{const t=e;t?.pointerId==r?.pointerId&&a?.forEach(e=>e?.())},a=fe(gr,{pointermove:i,pointercancel:s,pointerup:s})}};function xr(e,t){if("composedPath"in e&&"function"==typeof e.composedPath)return e.composedPath().includes(t);const n=e.target?e.target:e;return!!n&&function(e,t){let n=t;for(;n;){if(n===e)return!0;if(n.assignedSlot){n=n.assignedSlot;continue}if(n.parentNode){n=n.parentNode;continue}const t=n.getRootNode?.();n=t&&t.host?t.host:null}return!1}(t,n)}function Pr(e,t=null,n,r={}){const{root:i=("undefined"!=typeof document?document?.documentElement:null),closeEvents:s=["scroll","click","pointerdown"],mouseLeaveDelay:o=100}=r,a=new WeakRef(e);function l(e){xr(e,n?.element??n)||xr(e,t?.element??t)||vr(a,"value",!1)}const c=[...fe(i,Object.fromEntries(s.map(e=>[e,l]))),se(i,"pointerdown",function(e){const r=e;xr(r,n?.element??n)||xr(r,t?.element??t)||vr(a,"value",!1)})];return N(e,Symbol.dispose,function(){c.forEach(e=>e?.())}),e}const Sr=/* @__PURE__ */new WeakMap,Er=/* @__PURE__ */new Map,Ar=(e,t=0)=>{if(Er.has(t))return;const n=()=>{Er.delete(t),o?.forEach?.(e=>e?.()),a?.forEach?.(e=>e?.())},r=e=>{e?.pointerId==t||null==e?.pointerId||null==t||t<0?(e.preventDefault(),Er.set(t,!0),n()):Er.delete(t)},i=[r,{once:!0}],s=[r,{once:!0,capture:!0}],o=fe(document.documentElement,{click:s,pointerdown:s,contextmenu:s}),a=fe(e,{click:i,pointerdown:i,contextmenu:i});setTimeout(n,10)};let kr=null;kr="undefined"!=typeof PointerEvent?class extends PointerEvent{#g;constructor(e,t){super(e,t),this.#g=t?.holding}get holding(){return this.#g}get event(){return this.#g?.event}get result(){return this.#g?.result}get shifting(){return this.#g?.shifting}get modified(){return this.#g?.modified}get canceled(){return this.#g?.canceled}get duration(){return this.#g?.duration}get element(){return this.#g?.element?.deref?.()??null}get propertyName(){return this.#g?.propertyName??"drag"}}:class{#g;constructor(e,t){this.#g=t?.holding}get holding(){return this.#g}};const Mr=(e,t=()=>{},n=[{value:0},{value:0}],r=[0,0])=>{if(!n)return;const i=(i,s)=>((e,t={pointerId:0,pointerType:"mouse"},{shifting:n=[0,0],result:r=[{value:0},{value:0}]}={})=>{let i,s=.01,o=performance.now();const a={result:r,movement:[...t?.movement||[0,0]],shifting:[...n],modified:[...n],canceled:!1,duration:s,element:new WeakRef(e),client:null},l=[n=>{if(t?.pointerId==n?.pointerId&&(n?.preventDefault?.(),ve(n?.target,e))){const t=[...n?.client||[n?.clientX||0,n?.clientY||0]];a.duration=(r=(i=performance.now())-o,s+=(r-s)/100,o=i,s),a.movement=[...a.client?[t?.[0]-(a.client?.[0]||0),t?.[1]-(a.client?.[1]||0)]:[0,0]],a.client=t,a.shifting[0]+=a.movement[0]||0,a.shifting[1]+=a.movement[1]||0,a.modified[0]=(a.shifting[0]??a.modified[0])||0,a.modified[1]=0|(a.shifting[1]??a.modified[1]),e?.dispatchEvent?.(new kr("m-dragging",{...n,bubbles:!0,holding:a,event:n})),null!=a?.result?.[0]&&(a.result[0].value=a.modified[0]||0),null!=a?.result?.[1]&&(a.result[1].value=a.modified[1]||0),null!=a?.result?.[2]&&(a.result[2].value=0)}var r},{capture:!0}],c=Promise.withResolvers(),u=[n=>{if(t?.pointerId==n?.pointerId){const s=e?.element||e;if(ve(n?.target,s)||n?.currentTarget?.contains?.(s)||n?.target==s){"pointerup"==n?.type&&Ar(s,n?.pointerId),queueMicrotask(()=>c?.resolve?.(r)),d?.forEach?.(e=>e?.()),s?.releaseCapturePointer?.(n?.pointerId),s?.dispatchEvent?.(new kr("m-dragend",{...n,bubbles:!0,holding:a,event:n})),a.canceled=!0;try{t.pointerId=-1}catch(i){}}}},{capture:!0}];let d=null;return Ar(e,t?.pointerId),queueMicrotask(()=>{e?.dispatchEvent?.(new kr("m-dragstart",{...t,bubbles:!0,holding:a,event:t}))?(e?.setPointerCapture?.(t?.pointerId),d=fe(e,{pointermove:l,pointercancel:u,pointerup:u}),d?.push?.(...fe(document.documentElement,{pointercancel:u,pointerup:u}))):a.canceled=!0}),c?.promise??r})(s??e,i,{result:n,shifting:"function"==typeof r?r?.(n):r})?.then?.(t);if("function"==typeof e?.addEventListener)se(e,"pointerdown",i);else{if("function"!=typeof e)throw new Error("bindDraggable: elementOrEventListener is not a function or an object with addEventListener");e(i)}return{draggable:n,dispose:()=>{"function"==typeof e?.removeEventListener&&ge(e,"pointerdown",i)},process:i}};class Nr{#v;#b;#w=0;#x;#o;#P;get#S(){return this.#v.offsetParent??this.#v?.host??be}constructor(e,t){if(!e)throw Error("Element is null...");br(this.#v=e,this.#S),this.#b=Fi(0,0),this.#x=Fi(0,0),this.#o=t,we(this.#v,"--drag-x",0),we(this.#v,"--drag-y",0),this.#E(),t&&this.draggable(t)}#A(e=0,t=0){let n=e||0,r=t||0;if(this.#o?.constraints?.bounds){const e=this.#o.constraints.bounds,t=this.#o.constraints.centerOffset||Fi(0,0),i=Fi(this.#v.offsetWidth,this.#v.offsetHeight);zi(n,r,i.x,i.y);const s=Ti(new Ri(n+t.x.value,r+t.y.value),e);n=s.x.value-t.x.value,r=s.y.value-t.y.value}if(this.#o?.constraints?.snapToGrid){const{size:e,offset:t}=this.#o.constraints.snapToGrid;n=Math.round((n-t.x.value)/e.x.value)*e.x.value+t.x.value,r=Math.round((r-t.y.value)/e.y.value)*e.y.value+t.y.value}this.#x.x.value=n,this.#x.y.value=r,this.#w||(this.#w=requestAnimationFrame(()=>{this.#w=0;const e=this.#x.x.value,t=this.#x.y.value;we(this.#v,"transform",`translate3d(\n                clamp(calc(-1px * var(--shift-x, 0)), ${e||0}px, calc(100cqi - 100% - var(--shift-x, 0) * 1px)),\n                clamp(calc(-1px * var(--shift-y, 0)), ${t||0}px, calc(100cqb - 100% - var(--shift-y, 0) * 1px)),\n                0px)`?.trim?.()?.replaceAll?.(/\s+/g," ")?.replaceAll?.(/\n+/g," ")?.trim?.()??"")}))}#E(){if(this.#P)return;const e=()=>{this.#A(this.#b.x.value,this.#b.y.value)};this.#P=[M(this.#b.x,e),M(this.#b.y,e)],e()}draggable(e){const t=e.handler??this.#v;this.#b,this.#E();const n=new WeakRef(this.#v),r=[this.#b.x,this.#b.y];return Mr(e=>t.addEventListener("pointerdown",wr(t=>e(t,this.#v),this.#v)),e=>{const t=n?.deref?.();t?.style?.removeProperty?.("will-change"),queueMicrotask(()=>{t?.removeAttribute?.("data-dragging"),t?.style?.removeProperty?.("transform")});const r=t?.getBoundingClientRect?.();this.#b.x.value=0,this.#b.y.value=0,this.#A(0,0),we(t,"--shift-x",r?.left||0),we(t,"--shift-y",r?.top||0)},r,()=>{const e=n?.deref?.();return e?.setAttribute?.("data-dragging",""),e?.style?.setProperty("will-change","inset, translate, transform, opacity, z-index"),this.#A(this.#b.x.value,this.#b.y.value),[0,0]})}}class $r{#v;#k;get#S(){return this.#v.offsetParent??this.#v?.host??be}constructor(e,t){if(!e)throw Error("Element is null...");br(this.#v=e,this.#S),this.#k=Fi(0,0),t&&this.resizable(t)}limitResize(e,t,n,r){const i=xe(n)-(Pe(n)-(this.#k.x.value||0)),s=Se(n)-(Ee(n)-(this.#k.y.value||0));return e[0]=w(0,t?.[0]||0,i)||0,e[1]=w(0,t?.[1]||0,s)||0,e}resizable(e){const t=e.handler??this.#v;this.#k;const n=new WeakRef(this.#v),r=new WeakRef(this),i=[this.#k.x,this.#k.y];return Ot(this.#v,{style:{"--resize-x":this.#k.x,"--resize-y":this.#k.y}}),Mr(e=>t.addEventListener("pointerdown",wr(t=>e(t,this.#v),this.#v)),e=>{const t=n?.deref?.();t?.style?.removeProperty?.("will-change"),queueMicrotask(()=>{t?.removeAttribute?.("data-resizing")})},i,()=>{const e=[this.#k.x.value||0,this.#k.y.value||0],t=n?.deref?.(),i=this.#S;return r?.deref?.()?.limitResize?.(e,e,t,i),t?.setAttribute?.("data-resizing",""),e})}}const Ir={anyPointer:!0,mouseImmediate:!0,minHoldTime:100,maxHoldTime:2e3,maxOffsetRadius:10},Wr=[e=>{e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()},{once:!0}];class Cr{#v;#M;constructor(e,t={...Ir},n){if((this.#v=e)["@control"]=this,this.#M=/* @__PURE__ */new Set,!e)throw Error("Element is null...");t||(t={...Ir});const r={...t};Object.assign(t,Ir,r),t&&this.longPress(t,n)}defaultHandler(e,t){return t?.deref()?.dispatchEvent?.(new PointerEvent("long-press",{...e,bubbles:!0}))}longPress(e={...Ir},t){const n=document.documentElement,r=new WeakRef(this.#v),i=this.initializeActionState();this.holding={actionState:i,options:e,fx:t||(e=>this.defaultHandler(e,r))};const s=e=>this.onPointerUp(this.holding,e);fe(n,{pointerdown:e=>this.onPointerDown(this.holding,e,r),pointermove:e=>this.onPointerMove(this.holding,e),pointerup:s,pointercancel:s})}initializeActionState(){return{timerId:null,immediateTimerId:null,pointerId:-1,startCoord:[0,0],lastCoord:[0,0],isReadyForLongPress:!1,cancelCallback:()=>{},cancelPromiseResolver:null,cancelPromiseRejector:null}}preventFromClicking(e,t){this.#M.has(t.pointerId)||(this.#M.add(t.pointerId),e?.addEventListener?.("click",...Wr),e?.addEventListener?.("contextmenu",...Wr))}releasePreventing(e,t){this.#M.has(t)&&(this.#M.delete(t),e?.removeEventListener?.("click",...Wr),e?.removeEventListener?.("contextmenu",...Wr))}onPointerDown(e,t,n){if(!this.isValidTarget(e,t.target,n)||!e.options?.anyPointer&&"touch"!=t?.pointerType)return;t.preventDefault(),this.resetAction(e,e.actionState);const{actionState:r}=e;r.pointerId=t.pointerId,r.startCoord=[t.clientX,t.clientY],r.lastCoord=[...r.startCoord];const i=Promise.withResolvers();if(r.cancelPromiseResolver=i.resolve,r.cancelPromiseRejector=i.reject,r.cancelCallback=()=>{clearTimeout(r.timerId),clearTimeout(r.immediateTimerId),r.isReadyForLongPress=!1,i.resolve(),this.resetAction(e,r)},e.options?.mouseImmediate&&"mouse"===t.pointerType)return e.fx?.(t),r.cancelCallback();r.timerId=setTimeout(()=>{r.isReadyForLongPress=!0},e.options?.minHoldTime),r.immediateTimerId=setTimeout(()=>{this.isInPlace(e)&&(this.preventFromClicking(e,t),e.fx?.(t),r.cancelCallback())},e.options?.maxHoldTime),Promise.race([i.promise,new Promise((e,t)=>setTimeout(()=>t(new Error("Timeout")),3e3))]).catch(console.warn)}onPointerMove(e,t){const{actionState:n}=e;if(t.pointerId===n.pointerId){if(n.lastCoord=[t.clientX,t.clientY],!this.isInPlace(e))return n.cancelCallback();this.preventFromClicking(e,t),n.startCoord=[t.clientX,t.clientY]}}resetAction(e,t){this.releasePreventing(e,t.pointerId),t.pointerId=-1,t.cancelPromiseResolver=null,t.cancelPromiseRejector=null,t.isReadyForLongPress=!1,t.cancelCallback=null}onPointerUp(e,t){const{actionState:n}=e;t.pointerId===n.pointerId&&(n.lastCoord=[t.clientX,t.clientY],n.isReadyForLongPress&&this.isInPlace(e)&&(e.fx?.(t),this.preventFromClicking(e,t)),n.cancelCallback(),this.resetAction(e,n))}holding={fx:null,options:{},actionState:{}};hasParent(e,t){for(;e;){if(e===t)return!0;e=e.parentElement}}isInPlace(e){const{actionState:t}=e,[n,r]=t.startCoord,[i,s]=t.lastCoord;return Math.hypot(i-n,s-r)<=e.options?.maxOffsetRadius}isValidTarget(e,t,n){const r=n?.deref?.();return r&&(this.hasParent(t,r)||t===r)&&(!e.options?.handler||t.matches(e.options?.handler))}}const Lr=/* @__PURE__ */new WeakMap,_r="undefined"!=typeof document&&document?.documentElement?((e,t,n={capture:!0,passive:!1},r={})=>{const i=e;if(!i||"function"!=typeof i.addEventListener)return(e,t)=>()=>{};const s={capture:Boolean(n.capture),passive:Boolean(n.passive)},o=r.strategy??"closest",a=`${t}|c:${s.capture?"1":"0"}|p:${s.passive?"1":"0"}|s:${o}|pd:${String(r.preventDefault??"")}|sp:${String(r.stopPropagation??"")}|sip:${String(r.stopImmediatePropagation??"")}`;let l=fr.get(i);l||(l=/* @__PURE__ */new Map,fr.set(i,l));let c=l.get(a);if(!c){const e=/* @__PURE__ */new Map,t=t=>{let n=!1,i=!1;const s=e=>{if(e&&0!==e.size){n=!0;for(const n of Array.from(e))n(t)&&(i=!0)}},a=t?.composedPath?.();if(Array.isArray(a))if("closest"===o)for(const r of a){const t=mr(r);if(!t)continue;const n=e.get(t);if(n){s(n);break}}else for(const r of a){const t=mr(r);t&&s(e.get(t))}else{let n=mr(t?.target);for(;n;){const t=e.get(n);if(t&&(s(t),"closest"===o))break;const r=n.getRootNode?.();n=n.parentElement||(r instanceof ShadowRoot?r.host:null)}}yr(r.preventDefault,n,i)&&t?.preventDefault?.(),yr(r.stopImmediatePropagation,n,i)&&t?.stopImmediatePropagation?.(),yr(r.stopPropagation,n,i)&&t?.stopPropagation?.()};c={targets:e,unbindGlobal:null,options:s,strategy:o,config:r,dispatch:t},l.set(a,c)}return(e,n)=>{const r=mr(e);if(!r)return()=>{};0!==c.targets.size||c.unbindGlobal||(c.unbindGlobal=pr(i,t,c.dispatch,c.options));let s=c.targets.get(r);return s||(s=/* @__PURE__ */new Set,c.targets.set(r,s)),s.add(n),()=>{const t=fr.get(i),r=t?.get(a);if(!r)return;const s=mr(e);if(!s)return;const o=r.targets.get(s);o&&(o.delete(n),0===o.size&&r.targets.delete(s),0===r.targets.size&&(r.unbindGlobal?.(),r.unbindGlobal=null,t?.delete(a),t&&0===t.size&&fr.delete(i)))}}})(document.documentElement,"contextmenu",{capture:!0,passive:!1},{strategy:"closest",preventDefault:"handled",stopImmediatePropagation:"handled"}):(e,t)=>()=>{},Or=e=>null==e?null:Lr?.getOrInsertComputed?.(e,()=>Rn(e,O,Nn,!1)),Rr=(e,t,n)=>{const r=((e,t,n,r)=>i=>{let s=!1;const o=r||((e=document)=>{let t=nt('ui-modal[type="contextmenu"]',e);return t||(t=Ut`<ui-modal type="contextmenu"></ui-modal>`,(e instanceof Document?e.body:e).append(t)),t})(),a=Or(o),l=i?.target??e??document.elementFromPoint(i?.clientX||0,i?.clientY||0),c={event:i,initiator:l,trigger:e,menu:o,ctxMenuDesc:n};if(n.context=c,!1===n?.onBeforeOpen?.(c))return s;const u=n?.buildItems?.(c);if(Array.isArray(u)&&u.length&&(n.items=u),a?.value&&"contextmenu"!==i?.type)return a.value=!1,n?.openedWith?.close?.(),s;if(l&&a){s=!0,o.innerHTML="",a.value=!0,o?.append?.(...n?.items?.map?.((e,t)=>{const r=e?.map?.(e=>Ut`<li data-id=${e?.id||""}><ui-icon icon=${e?.icon||""}></ui-icon><span>${e?.label||""}</span></li>`);return[...r,e?.length>1&&t!==(n?.items?.length||0)-1?Ut`<li class="ctx-menu-separator"></li>`:null]})?.flat?.()?.filter?.(e=>!!e)||[]);const e=((e,t)=>{if(!e)return()=>{};const n=[Ge(e,"--client-x",t?.[0],H),Ge(e,"--client-y",t?.[1],H)];return t?.[2]&&n.push(Ge(e,"--anchor-width",t?.[2],H)),t?.[3]&&n.push(Ge(e,"--anchor-height",t?.[3],H)),()=>n?.forEach?.(e=>e?.())})?.(o,t?.(i,l)),r=((e,t)=>{const n=se(e,"click",e=>{((e,t)=>{const n=nt("[data-id]",e?.target,0,"parent")?.getAttribute?.("data-id"),r=t?.items?.find?.(e=>e?.some?.(e=>e?.id==n))?.find?.(e=>e?.id==n);(r?.action??t?.defaultAction)?.(t?.openedWith?.initiator,r,t?.openedWith?.event??e),t?.openedWith?.close?.();const i=Or(t?.openedWith?.element);null!=i&&(i.value=!1)})(e,t)},{composed:!0});return()=>n?.()})(o,n),c=function(e=null,t=O(!1),n=["pointerdown","click","contextmenu","scroll"],r=document?.documentElement){if(!r)return()=>{};const i=new WeakRef(t),s="function"==typeof t?t:t=>{(!e?.contains?.(t?.target)&&t?.target!=(e?.element??e)||!e)&&vr(i,"value",!1)},o=n.map(e=>pr(r,e,s,{capture:!1,passive:!1})),a=()=>o.forEach(e=>e?.());return N(t,Symbol.dispose,a),a}?.(o,e=>{const t=o;if(!o?.contains?.(e?.target??null)&&e?.target!=(t?.element??t)||!e?.target){n?.openedWith?.close?.();const e=Or(o);null!=e&&(e.value=!1)}},["click","pointerdown","scroll"]),u=_r(o,()=>!0);n.openedWith={initiator:l,element:o,event:i,context:n?.context,close(){a.value=!1,n.openedWith=null,r?.(),e?.(),c?.(),u?.(),n._backUnreg&&(n._backUnreg(),n._backUnreg=null)}},!n._backUnreg&&a&&(n._backUnreg=(h=a,wn({id:`ctx-menu-${(d=o).id||bn()}`,priority:100,element:new WeakRef(d),group:"context-menu",isActive:()=>!0===h.value,close:()=>(h.value=!1,n?.openedWith?.close?.(),!1)})))}var d,h;return s})(e,e=>[e?.clientX,e?.clientY,200],t,n),i=(t=>{if(!t)return()=>{};let n=null,i=!1;const s=()=>{if(!i)if(t.isConnected){if(!n){const t=_r(e,r);n="function"==typeof t?t:null}}else n&&(n(),n=null)},o="undefined"!=typeof document?document.documentElement:null,a=t?.element??t,l="undefined"!=typeof MutationObserver&&o?new MutationObserver(e=>{for(const t of e){if(t.target===a||t.target?.contains?.(a))return void s();const e=[...Array.from(t?.addedNodes||[]),...Array.from(t?.removedNodes||[])];for(const t of e)if(t===a||t.contains?.(a))return void s()}}):null;return l&&o&&l.observe(o,{childList:!0,subtree:!0}),queueMicrotask(()=>s()),()=>{i=!0,l?.disconnect?.(),n?.(),n=null}})(e);return()=>{i?.()}},Fr=(e,t,n)=>{const r=(t?.[0]?.value||0)/(n?.offsetWidth||1),i=jr(e),[s,o,a]=i;return"checkbox"==e?.type?Math.sign(t?.[0]?.value):"range"==e?.type||"number"==e?.type?r*(a-o):"radio"==e?.type?Math.round(r*a):r},zr=(e,t)=>{if("number"==e?.type||"range"==e?.type)return t;if("checkbox"==e?.type)return t>.5;if("radio"==e?.type){const n=[...e?.parentNode?.querySelectorAll?.('input[type="radio"]')],r=n?.length;return Math.max(Math.min(Math.round(t),r),0)}},Tr=(e,t)=>{const n=jr(e),[r,i,s]=n;if("number"==e?.type||"range"==e?.type)t!=e.valueAsNumber&&(e.valueAsNumber=t,e?.dispatchEvent?.(new Event("change",{bubbles:!0})));else if("checkbox"==e?.type)G(e,t>.5);else if("radio"==e?.type){const n=[...e?.parentNode?.querySelectorAll?.('input[type="radio"]')];0!=t&&G(n[Math.max(Math.min(Math.round(t),s),i)],t)}},jr=e=>{if(("number"==e?.type||"range"==e?.type)&&null!=e?.valueAsNumber)return[e?.valueAsNumber||0,parseFloat(e?.min||0),parseFloat(e?.max||0)];if("checkbox"==e?.type)return[e?.checked?1:0,0,1];if("radio"==e?.type){const t=[...e?.parentNode?.querySelectorAll?.('input[type="radio"]')],n=t?.length;return[t?.indexOf?.(e)??-1,0,n-1]}return[0,0,0]},Hr=e=>((e,t,n)=>(e-t)/(n-t))(...jr(e)),Dr=e=>{const t=k(Hr(e));return Ue?.(e,n=>{t.value=Hr(n?.target??e)}),t},qr=(e,t,n)=>{const r={id:-1},i=()=>{try{o[0].value=0,o[1].value=0}catch(e){}return[0,0]},s=[se(t,"click",e=>{"checkbox"!=n?.type&&"radio"!=n?.type||G(n,n?.checked,e)}),se(t,"pointerdown",e=>{e?.target?.matches?.(".ui-thumb")||e?.target?.closest?.(".ui-thumb")||(e?.target==(t?.element??t)||t.contains(e?.target))&&((e,t,n)=>{Tr(e,((e,t,n)=>{const r=t/(n?.offsetWidth||1),i=jr(e),[s,o,a]=i;return zr(e,r*(a-o)+o)})(e,t,n))})(n,e?.layerX||0,t)})],o=[k(0),k(0)],a=Hi([o[0]],()=>`translateX(${o[0].value}px)`);((e,t)=>{const n=t?new We(t):null,r=Dr(e);Hi([r,n?.width||k(100)],()=>r.value*(n?.width.value||100))})(n,t),Ui.bindTransform(e,a),Ui.bindTransform(t,a);const l=Hi([o[0]],e=>Fr(n,o,t)),c=Dr(n);Ge?.(t,"--relate",l,H),Ge?.(t,"--value",c,H);const u=Mr(n=>{const o=wr(t=>{e?.setPointerCapture?.(r.id=t?.pointerId),e?.setAttribute?.("data-dragging","true"),i(),n?.(t,e)},e),a=se(t,"pointerdown",o),l=se(e,"pointerdown",o);return s.push(a,l),a},i=>{e?.removeAttribute?.("data-dragging"),r.id>=0&&(e?.releasePointerCapture?.(r.id),r.id=-1),((e,t,n)=>{((e,t)=>{Tr(e,((e,t)=>{const n=jr(e);return zr(e,n?.[0]+t)})(e,t))})(e,Fr(e,t,n));try{t[0].value=0,t[1].value=0}catch(r){}})(n,i,t)},o,i);return()=>{s.forEach(e=>e?.()),u?.dispose?.()}},Br=(e,t)=>{const n=((e,t)=>{const n=/* @__PURE__ */new Set;let r=e?.target||document.activeElement||document.body;if(r instanceof HTMLInputElement||r instanceof HTMLTextAreaElement||r.isContentEditable)return[];let i=r;for(;i;)"function"==typeof i[t]&&n.add(i),i.operativeInstance&&"function"==typeof i.operativeInstance[t]&&n.add(i.operativeInstance),i=i.shadowRoot&&i.shadowRoot.host?i.shadowRoot.host:i.parentElement||i.getRootNode()?.host;if(e.currentTarget instanceof Node||"undefined"!=typeof document){const r=e.currentTarget instanceof Node?e.currentTarget instanceof Document?e.currentTarget.body:e.currentTarget:document.body;if(r){const e=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>"function"==typeof e[t]||e.operativeInstance&&"function"==typeof e.operativeInstance[t]?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;e.nextNode();){const r=e.currentNode;"function"==typeof r[t]&&n.add(r),r.operativeInstance&&"function"==typeof r.operativeInstance[t]&&n.add(r.operativeInstance)}}}return Array.from(n)})(e,t);for(const r of n)r[t]?.(e)};let Vr=!1;const Ur=()=>{"undefined"==typeof window||Vr||(Vr=!0,pr(window,"copy",e=>Br(e,"onCopy"),{capture:!1,passive:!0}),pr(window,"cut",e=>Br(e,"onCut"),{capture:!1,passive:!0}),pr(window,"paste",e=>Br(e,"onPaste"),{capture:!1,passive:!1}))};function Xr(e){return new Worker(""+new URL("../../assets/OPFS.worker-BMXAMnHz.js",import.meta.url).href,{type:"module",name:e?.name})}let Gr=null;const Kr="undefined"!=typeof ServiceWorkerGlobalScope&&self instanceof ServiceWorkerGlobalScope,Yr=/* @__PURE__ */new Map,Jr=/* @__PURE__ */new Map;let Zr=null;const Qr={readDirectory:async({path:e,create:t})=>{try{const n=await navigator.storage.getDirectory(),r=(e||"").trim().replace(/\/+/g,"/").split("/").filter(e=>e);let i=n;for(const e of r)i=await i.getDirectoryHandle(e,{create:t});const s=[];for await(const[e,t]of i.entries())s.push([e,t]);return s}catch(n){return console.warn("Direct readDirectory error:",n),[]}},readFile:async({path:e,type:t})=>{try{const n=await navigator.storage.getDirectory(),r=(e||"").trim().replace(/\/+/g,"/").split("/").filter(e=>e),i=r.pop();let s=n;for(const e of r)s=await s.getDirectoryHandle(e,{create:!1});const o=await s.getFileHandle(i,{create:!1}),a=await o.getFile();return"text"===t?await a.text():"arrayBuffer"===t?await a.arrayBuffer():a}catch(n){return console.warn("Direct readFile error:",n),null}},writeFile:async({path:e,data:t})=>{try{const n=await navigator.storage.getDirectory(),r=(e||"").trim().replace(/\/+/g,"/").split("/").filter(e=>e),i=r.pop();let s=n;for(const e of r)s=await s.getDirectoryHandle(e,{create:!0});const o=await s.getFileHandle(i,{create:!0}),a=await o.createWritable();return await a.write(t),await a.close(),!0}catch(n){return console.warn("Direct writeFile error:",n),!1}},remove:async({path:e,recursive:t})=>{try{const n=await navigator.storage.getDirectory(),r=(e||"").trim().replace(/\/+/g,"/").split("/").filter(e=>e),i=r.pop();let s=n;for(const e of r)s=await s.getDirectoryHandle(e,{create:!1});return await s.removeEntry(i,{recursive:t}),!0}catch{return!1}},copy:async({from:e,to:t})=>{try{const n=async(e,t)=>{if("directory"===e.kind)for await(const[r,i]of e.entries())if("directory"===i.kind){const e=await t.getDirectoryHandle(r,{create:!0});await n(i,e)}else{const e=await i.getFile(),n=await t.getFileHandle(r,{create:!0}),s=await n.createWritable();await s.write(e),await s.close()}else{const n=await e.getFile(),r=await t.createWritable();await r.write(n),await r.close()}};return await n(e,t),!0}catch(n){return console.warn("Direct copy error:",n),!1}},observe:async()=>!1,unobserve:async()=>!0,mount:async()=>!0,unmount:async()=>!0},ei=(e,t={},n=[])=>Kr&&Qr[e]?Qr[e](t):new Promise((r,i)=>{const s=x();Yr.set(s,{resolve:r,reject:i}),(Zr||(Zr=new Promise(e=>{if("undefined"==typeof Worker||Kr)Gr=self,e(Gr);else try{const t=new Xr;(t.addEventListener||t.addListener||((e,n)=>t["on"+e]=n)).bind(t)("message",e=>{if(!e.data||"object"!=typeof e.data)return;const{id:t,result:n,error:r,type:i,changes:s}=e.data;if("observation"===i){const e=Jr.get(t);return void(e&&e(s))}if(t&&Yr.has(t)){const{resolve:e,reject:i}=Yr.get(t);Yr.delete(t),r?i(new Error(r)):e(n)}}),Gr=t,e(Gr)}catch(t){console.warn("OPFSWorker instantiation failed, falling back to main thread...",t),Gr=self,e(Gr)}}),Zr)).then(r=>{try{const i=n?.filter?.(e=>e instanceof ArrayBuffer||e instanceof MessagePort||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas);r.postMessage({id:s,type:e,payload:t},i?.length?i:void 0)}catch(o){Yr.delete(s),i(o)}}).catch(e=>{Yr.delete(s),i(e)})}),ti=e=>{if("string"!=typeof e)return e;e=e?.trim?.()||e,e?.endsWith?.("/")||(e=e?.trim?.()?.split?.("/")?.slice(0,-1)?.join?.("/")?.trim?.()||e);const t=e?.trim()?.endsWith("/")?e:e+"/";return t?.startsWith("/")?t:"/"+t},ni={startIn:"documents",multiple:!1,types:[{description:"files",accept:{"application/*":[".txt",".md",".html",".htm",".css",".js",".json",".csv",".xml",".jpg",".jpeg",".png",".gif",".webp",".svg",".ico",".mp3",".wav",".mp4",".webm",".pdf",".zip",".rar",".7z"]}}]},ri=/* @__PURE__ */new Map([["/",async()=>await(navigator?.storage?.getDirectory?.())],["/user/",async()=>await(navigator?.storage?.getDirectory?.())],["/assets/",async()=>(console.warn("Backend related API not implemented!"),null)]]),ii=/* @__PURE__ */new Map,si=async(e,t)=>{const n=e?.trim?.()?.replace?.(/^\//,"")?.trim?.()?.split?.("/")?.filter?.(e=>!!e?.trim?.())?.at?.(0),r=ii?.get(n)??await(showDirectoryPicker?.({mode:"readwrite",id:`${n}`})?.catch?.(console.warn.bind(console)));if(r&&n&&"string"==typeof n&&ii?.set?.(n,r),r&&"undefined"!=typeof localStorage&&localStorage?.setItem?.("opfs.mounted",JSON.stringify([...JSON.parse(localStorage?.getItem?.("opfs.mounted")||"[]"),n])),r&&ei("mount",{id:n,handle:r}),r&&"user"==n){const e=await(navigator?.storage?.getDirectory?.());await(ki(e,r,{})?.catch?.(console.warn.bind(console)))}return r};async function oi(e,t=""){null!=e&&null!=e&&0!=e?.trim?.()?.length||(e="/user/");const n="string"==typeof e?e?.trim?.()?.replace?.(/^\//,"")?.trim?.()?.split?.("/")?.filter?.(e=>!!e?.trim?.())?.at?.(0):null;if(n&&("undefined"!=typeof localStorage&&JSON.parse(localStorage?.getItem?.("opfs.mounted")||"[]").includes(n)&&(e=ii?.get(n)),e||(e=await(ri?.get?.(`/${n}/`)?.())??await navigator.storage.getDirectory())),e instanceof FileSystemDirectoryHandle)return e;const r=t?.trim?.()||"/",i=r.startsWith("/")?r:"/"+r;let s=null,o=0;for(const[l,c]of ri.entries())i.startsWith(l)&&l.length>o&&(s=c,o=l.length);try{return(s?await s():null)||await(navigator?.storage?.getDirectory?.())}catch(a){return console.warn("Failed to resolve root handle, falling back to OPFS root:",a),await(navigator?.storage?.getDirectory?.())}}async function ai(e,t,n=""){const r=function(e="",t){if(!t?.trim())return e;const n=t.trim();if(n.startsWith("/"))return n;const r=e.split("/").filter(e=>e?.trim()),i=n.split("/").filter(e=>e?.trim());for(const s of i)"."!==s&&(".."===s?r.length>0&&r.pop():r.push(s));return"/"+r.join("/")}(n,t);return{rootHandle:await oi(e,r),resolvedPath:r}}function li(e,t,n){return e?.(t,n),null}function ci(e,t){console.trace(`[${e}] ${t}`)}function ui(e){const t=e?.split?.(".")?.pop?.()?.toLowerCase?.();return{txt:"text/plain",md:"text/markdown",html:"text/html",htm:"text/html",css:"text/css",js:"application/javascript",json:"application/json",csv:"text/csv",xml:"application/xml",jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",webp:"image/webp",svg:"image/svg+xml",ico:"image/x-icon",mp3:"audio/mpeg",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",pdf:"application/pdf",zip:"application/zip",rar:"application/vnd.rar","7z":"application/x-7z-compressed"}[t]||"application/octet-stream"}async function di(e,t,{create:n=!1,basePath:r=""}={},i=ci){try{const{rootHandle:i,resolvedPath:o}=await ai(e,t,r),a=(o?.trim?.()?.startsWith?.("/user/")?o?.trim?.()?.replace?.(/^\/user/g,"")?.trim?.():o).split("/").filter(e=>!!e?.trim?.());a.length>0&&(s=a[a.length-1]?.trim?.(),s?.trim?.()?.split?.(".")?.[1]?.trim?.()?.length>0)&&a?.pop?.();let l=i;if(a?.length>0)for(const e of a)if(l=await(l?.getDirectoryHandle?.(e,{create:n})),!l)break;return l}catch(o){return li(i,"error",`getDirectoryHandle: ${o.message}`)}var s}async function hi(e,t,{create:n=!1,basePath:r=""}={},i=ci){try{const{rootHandle:s,resolvedPath:o}=await ai(e,t,r),a=o?.trim?.()?.startsWith?.("/user/")?o?.trim?.()?.replace?.(/^\/user/g,"")?.trim?.():o,l=a.split("/").filter(e=>!!e?.trim?.());if(0==l?.length)return null;const c=l.length>0?l[l.length-1]?.trim?.()?.replace?.(/\s+/g,"-"):"",u=l.length>1?l?.slice(0,-1)?.join?.("/")?.trim?.()?.replace?.(/\s+/g,"-"):"";if(a?.trim?.()?.endsWith?.("/"))return null;const d=await di(s,u,{create:n,basePath:r},i);return d?.getFileHandle?.(c,{create:n})}catch(s){return li(i,"error",`getFileHandle: ${s.message}`)}}async function pi(e,t,n={},r=ci){try{const{rootHandle:i,resolvedPath:s}=await ai(e,t,n?.basePath||""),o=function(e){return e?.trim()?.endsWith?.("/")?"directory":"file"}(s);if("directory"==o){const e=await di(i,s?.trim?.()?.replace?.(/\/$/,""),n,r);if(e)return{type:"directory",handle:e}}else{const e=await hi(i,s,n,r);if(e)return{type:"file",handle:e}}return null}catch(i){return li(r,"error",`getHandler: ${i.message}`)}}const fi=/* @__PURE__ */new Map,mi=(e,t,n=console.warn.bind(console))=>{if("function"==typeof e?.then)return e?.then?.(t)?.catch?.(n);try{return t(e)}catch(r){return n(r),null}};function yi(e,t,n={create:!1},r=ci){let i="";const s=(async()=>{try{const{rootHandle:r,resolvedPath:s}=await ai(e,t,n?.basePath||"");return i=`${r?.name||"root"}:${s}`,{rootHandle:r,resolvedPath:s}}catch(r){return{rootHandle:null,resolvedPath:""}}})().then(async({rootHandle:e,resolvedPath:t})=>{if(!t)return null;let s=fi.get(i);if(s)return s.refCount++,s;const o=L(/* @__PURE__ */new Map),a=x(),l=di(e,t,n,r),c=async()=>{const r=t?.trim?.()?.startsWith?.("/user/")?t?.trim?.()?.replace?.(/^\/user/g,"")?.trim?.():t,i=await ei("readDirectory",{rootId:"",path:r,create:n.create},e?[e]:[]);if(!i)return o;const s=new Map(i);for(const e of o.keys())s.has(e)||o.delete(e);for(const[e,t]of s)o.has(e)||o.set(e,t);return o};Jr.set(a,e=>{for(const t of e)t.name&&("modified"===t.type||"created"===t.type||"appeared"===t.type?o.set(t.name,t.handle):"deleted"!==t.type&&"disappeared"!==t.type||o.delete(t.name))});const u=t?.trim?.()?.startsWith?.("/user/")?t?.trim?.()?.replace?.(/^\/user/g,"")?.trim?.():t;ei("observe",{rootId:"",path:u,id:a},e?[e]:[]),c();const d={mapCache:o,dirHandle:l,resolvePath:t,observationId:a,refCount:1,cleanup:()=>{ei("unobserve",{id:a}),Jr.delete(a),fi.delete(i)},updateCache:c};return fi.set(i,d),d});let o=!1;const a=()=>{o||(o=!0,mi(s,e=>{e&&(e.refCount--,e.refCount<=0&&e.cleanup())}))},l=new Proxy(function(){},{get(e,t,n){const r=P(s);if("dispose"==t)return a;if("getMap"==t)return()=>mi(r,e=>e?.mapCache);if("refresh"==t)return()=>mi(r,e=>(e?.updateCache(),l));if("entries"==t)return()=>mi(r,e=>e?.mapCache.entries());if("keys"==t)return()=>mi(r,e=>e?.mapCache.keys());if("values"==t)return()=>mi(r,e=>e?.mapCache.values());if(["then","catch","finally"].includes(t))return"function"==typeof r?.[t]?r?.[t]?.bind?.(r):r?.[t];const i=P(Promise.try?.(async()=>{const e=await mi(s,e=>e);if(!e)return null;if(null!=e.mapCache[t])return e.mapCache[t];const n=await e.dirHandle;return n?.[t]}));return i?.[t]},ownKeys:e=>s?Array.from(s?.then?.(e=>e?.mapCache?.keys?.())||[]):[],getOwnPropertyDescriptor:(e,t)=>({enumerable:!0,configurable:!0})});return l}async function gi(e,t,n={},r=ci){try{const{rootHandle:r,resolvedPath:i}=await ai(e,t,n?.basePath||""),s=i?.trim?.()?.startsWith?.("/user/")?i?.trim?.()?.replace?.(/^\/user/g,"")?.trim?.():i;return await ei("readFile",{rootId:"",path:s,type:"blob"},r?[r]:[])}catch(i){return li(r,"error",`readFile: ${i.message}`)}}async function vi(e,t,n,r=ci){if(n instanceof FileSystemFileHandle&&(n=await n.getFile()),n instanceof FileSystemDirectoryHandle){const r=await di(await oi(e),t+(t?.trim?.()?.endsWith?.("/")?"":"/")+(n?.name||"")?.trim?.()?.replace?.(/\s+/g,"-"),{create:!0});return await(ki(n,r,{})?.catch?.(console.warn.bind(console)))}try{const{rootHandle:r,resolvedPath:i}=await ai(e,t,""),s=i?.trim?.()?.startsWith?.("/user/")?i?.trim?.()?.replace?.(/^\/user/g,"")?.trim?.():i;return await ei("writeFile",{rootId:"",path:s,data:n},r?[r]:[]),!0}catch(i){return li(r,"error",`writeFile: ${i.message}`)}}async function bi(e,t,n={recursive:!0},r=ci){try{const{rootHandle:r,resolvedPath:i}=await ai(e,t,n?.basePath||""),s=i?.trim?.()?.startsWith?.("/user/")?i?.trim?.()?.replace?.(/^\/user/g,"")?.trim?.():i;return await ei("remove",{rootId:"",path:s,recursive:n.recursive},r?[r]:[]),!0}catch(i){return li(r,"error",`removeFile: ${i.message}`)}}async function wi(e,t,n={},r=ci){try{return bi(e,t,{recursive:!0,...n},r)}catch(i){return li(r,"error",`remove: ${i.message}`)}}const xi=async e=>{e instanceof FileSystemFileHandle&&(e=await e.getFile()),"string"==typeof e&&(e=await Pi(e));const t=e?.name;if(!t)return;if("msSaveOrOpenBlob"in self.navigator&&self.navigator.msSaveOrOpenBlob(e,t),e instanceof FileSystemDirectoryHandle){let t=await(showDirectoryPicker?.({mode:"readwrite"})?.catch?.(console.warn.bind(console)));return e&&t?(t=await(di(t,e?.name||"",{create:!0})?.catch?.(console.warn.bind(console)))||t,await(ki(e,t,{})?.catch?.(console.warn.bind(console)))):void 0}const n=await(self?.showOpenFilePicker?new Promise(e=>e({showOpenFilePicker:self?.showOpenFilePicker?.bind?.(window),showSaveFilePicker:self?.showSaveFilePicker?.bind?.(window)})):import("../showOpenFilePicker.js"));if(window?.showSaveFilePicker){const r=await(n?.showSaveFilePicker?.({suggestedName:t})?.catch?.(console.warn.bind(console))),i=await(r?.createWritable?.({keepExistingData:!0})?.catch?.(console.warn.bind(console)));await(i?.write?.(e)?.catch?.(console.warn.bind(console))),await(i?.close?.()?.catch?.(console.warn.bind(console)))}else{const n=document.createElement("a");try{n.href=URL.createObjectURL(e)}catch(r){console.warn(r)}n.download=t,document.body.appendChild(n),n.click(),setTimeout(function(){document.body.removeChild(n),window.URL.revokeObjectURL(n.href)},0)}},Pi=async(e="",t=!1)=>{const n=e?.url??e,r=n?.replace?.(location.origin,"")?.trim?.();if(r?.startsWith?.("/user")){const e=r?.replace?.(/^\/user/g,"")?.trim?.(),n=await(navigator?.storage?.getDirectory?.()),i=await hi(n,e,{create:!!t});return t?i?.createWritable?.():i?.getFile?.()}try{if(!e)return null;const t=await fetch(e),r=await(t?.blob()?.catch?.(console.warn.bind(console))),i=t?.headers?.get?.("Last-Modified"),s=i?Date.parse(i):0;if(r)return new File([r],n?.substring(n?.lastIndexOf("/")+1),{type:r?.type,lastModified:isNaN(s)?0:s})}catch(i){return li(ci,"error",`provide: ${i.message}`)}},Si=async(e,t="/user/"?.trim?.()?.replace?.(/\s+/g,"-"),n)=>{const r=await oi(null),i=ti(t?.trim?.()?.startsWith?.("/user/")?t?.replace?.(/^\/user/g,"")?.trim?.():t),s=i?.replace?.("/user","")?.trim?.();e=e instanceof File?e:new File([e],x()+"."+(e?.type?.split?.("/")?.[1]||"tmp"));const o=s+(e?.name||"wallpaper")?.trim?.()?.replace?.(/\s+/g,"-");return await vi(r,o,e),"/user"+o?.trim?.()},Ei=async(e="/user/"?.trim?.()?.replace?.(/\s+/g,"-"),t)=>{const n="showOpenFilePicker";e=e?.trim?.()?.startsWith?.("/user/")?e?.trim?.()?.replace?.(/^\/user/g,"")?.trim?.():e;const r=window?.[n]?.bind?.(window)??(await import("../showOpenFilePicker.js"))?.[n];return r({...ni,multiple:!0})?.then?.(async(t=[])=>{for(const n of t){const t=n instanceof File?n:await(n?.getFile?.());await Si(t,e)}})},Ai="undefined"!=typeof Image?new Image:null;if(Ai){Ai.decoding="async",Ai.width=24,Ai.height=24;try{Ai.src=URL.createObjectURL(new Blob(['<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 384 512">\x3c!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--\x3e<path d="M0 64C0 28.7 28.7 0 64 0L224 0l0 128c0 17.7 14.3 32 32 32l128 0 0 288c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 64zm384 64l-128 0L256 0 384 128z"/></svg>'],{type:"image/svg+xml"}))}catch(Gi){}}const ki=async(e,t,n={},r=ci)=>ei("copy",{from:e,to:t},[e,t]),Mi=(e,t="/user/",n=null,r)=>{const i=[],s=Array.from(e?.items??[]),o=Array.from(e?.files??[]),a=Array.isArray(e)?e:[...e?.[Symbol.iterator]?e:[e]];return Promise.try(async()=>{const l=await oi(n),c=async e=>{let n;if("file"===e.kind||"directory"===e.kind)try{n=await(e.getAsFileSystemHandle?.())}catch{}if(n)if("directory"===n.kind){const e=await di(l,t+(n.name||"").trim().replace(/\s+/g,"-"),{create:!0});e&&i.push(ki(n,e,{}))}else{const e=await n.getFile(),s=t+(e.name||n.name).trim().replace(/\s+/g,"-");i.push(vi(l,s,e).then(()=>r?.(e,s)))}else if("file"===e.kind||e instanceof File){const n=e instanceof File?e:e.getAsFile();if(n){const e=t+n.name.trim().replace(/\s+/g,"-");i.push(vi(l,e,n).then(()=>r?.(n,e)))}return}};if(s?.length>0)for(const e of s)await c(e);if(o?.length>0)for(const e of o)await c(e);if(a?.length>0)for(const e of a)await c(e);const u=e?.getData?.("text/uri-list")||e?.getData?.("text/plain");if(u&&"string"==typeof u){const e=u.split(/\r?\n/).filter(Boolean);for(const n of e)if(!n.startsWith("file://"))if(n.startsWith("/user/")){const e=n.trim();i.push(Promise.try(async()=>{const n=await pi(l,e);if(n?.handle){const i=e.split("/").filter(Boolean).pop();if("directory"===n.type){const e=await di(l,t+i,{create:!0});await ki(n.handle,e,{})}else{const e=await n.handle.getFile(),s=t+i;await vi(l,s,e),r?.(e,s)}}}))}else i.push(Promise.try(async()=>{const e=await Pi(n);if(e){const n=t+e.name;await vi(l,n,e),r?.(e,n)}}))}if(a?.[0]instanceof ClipboardItem)for(const e of a)for(const n of e.types)if(n.startsWith("image/")||n.startsWith("text/")){const s=await e.getType(n),o=n.split("/")[1].split("+")[0]||"txt",a=new File([s],`clipboard-${Date.now()}.${o}`,{type:n}),c=t+a.name;i.push(vi(l,c,a).then(()=>r?.(a,c)))}await Promise.allSettled(i).catch(console.warn.bind(console))})};[{name:"--drag-x",syntax:"<number>",inherits:!1,initialValue:"0"},{name:"--drag-y",syntax:"<number>",inherits:!1,initialValue:"0"},{name:"--grid-r",syntax:"<number>",inherits:!1,initialValue:"0"},{name:"--grid-c",syntax:"<number>",inherits:!1,initialValue:"0"},{name:"--resize-x",syntax:"<number>",inherits:!1,initialValue:"0"},{name:"--resize-y",syntax:"<number>",inherits:!1,initialValue:"0"},{name:"--shift-x",syntax:"<number>",inherits:!1,initialValue:"0"},{name:"--shift-y",syntax:"<number>",inherits:!1,initialValue:"0"},{name:"--cs-grid-r",syntax:"<number>",inherits:!1,initialValue:"0"},{name:"--cs-grid-c",syntax:"<number>",inherits:!1,initialValue:"0"},{name:"--cs-transition-r",syntax:"<length-percentage>",inherits:!1,initialValue:"0px"},{name:"--cs-transition-c",syntax:"<length-percentage>",inherits:!1,initialValue:"0px"},{name:"--cs-p-grid-r",syntax:"<number>",inherits:!1,initialValue:"0"},{name:"--cs-p-grid-c",syntax:"<number>",inherits:!1,initialValue:"0"},{name:"--os-grid-r",syntax:"<number>",inherits:!1,initialValue:"0"},{name:"--os-grid-c",syntax:"<number>",inherits:!1,initialValue:"0"},{name:"--rv-grid-r",syntax:"<number>",inherits:!1,initialValue:"0"},{name:"--rv-grid-c",syntax:"<number>",inherits:!1,initialValue:"0"},{name:"--cell-x",syntax:"<number>",inherits:!1,initialValue:"0"},{name:"--cell-y",syntax:"<number>",inherits:!1,initialValue:"0"}].forEach(e=>{if("undefined"!=typeof CSS)try{CSS?.registerProperty?.(e)}catch(Gi){console.warn(Gi)}});const Ni=async(e,t="x",n=!1,r)=>{const i=parseFloat(e?.style?.getPropertyValue?.("--drag-"+t)||"0")||0;n||await new Promise(e=>requestAnimationFrame(e));const s=n&&!matchMedia("(prefers-reduced-motion: reduce)")?.matches?e.animate(((e=0,t="x")=>{const n="--drag-"+t,r=((e="x")=>({x:"c",y:"r"}[e]))(t),i=`--rv-grid-${r}`,s=`--cs-grid-${r}`,o=`--cs-p-grid-${r}`;return[{[i]:`var(${o})`,[n]:e},{[i]:`var(${s})`,[n]:0}]})(i,t),{fill:"none",duration:200,easing:"linear"}):null;let o=!1;const a=[t=>{o||(o=!0,s?.finish?.()),e?.removeEventListener?.("m-dragstart",...a)},{once:!0}];return e?.addEventListener?.("m-dragstart",...a),s?.finished?.catch?.(console.warn.bind(console))},$i=(e,t)=>{(async(e,t)=>{const n=[t?.layout?.columns||t?.layout?.[0]||4,t?.layout?.rows||t?.layout?.[1]||8],{item:r,items:i}=t;await new Promise(e=>queueMicrotask(()=>e(!0))),M?.(r,(t,s)=>{const o=e?.parentElement;n[0]=parseInt(o?.getAttribute?.("data-grid-columns")||"4")||n[0],n[1]=parseInt(o?.getAttribute?.("data-grid-rows")||"8")||n[1];const a={item:r,items:i,layout:n,size:[o?.clientWidth,o?.clientHeight]};if(r&&!r?.cell&&(r.cell=F(L([0,0]))),"cell"==s){const t=S(r?.cell||[0,0],a);t[0]!=r?.cell?.[0]&&r?.cell&&(r.cell[0]=t?.[0]),t[1]!=r?.cell?.[1]&&r?.cell&&(r.cell[1]=t?.[1]),we(e,"--p-cell-x",t?.[0]),we(e,"--p-cell-y",t?.[1]),we(e,"--cell-x",t?.[0]),we(e,"--cell-y",t?.[1])}})})(e,t);const{item:n,items:r,list:i}=t,s=[t?.layout?.columns||t?.layout?.[0]||4,t?.layout?.rows||t?.layout?.[1]||8],o=[k(0,Ae()),k(0,Ae())],a=[k(n?.cell?.[0]||0),k(n?.cell?.[1]||0)];we(e,"--cell-x",a?.[0]?.value||0),we(e,"--cell-y",a?.[1]?.value||0);const l=()=>{null!=o?.[0]?.value&&we(e,"--drag-x",o?.[0]?.value||0),null!=o?.[1]?.value&&we(e,"--drag-y",o?.[1]?.value||0)};let c=0,u=null;const d=(e=!1)=>{e?(l(),c=0,u&&cancelAnimationFrame(u),u=null):c||(c=1,u=requestAnimationFrame(()=>{l(),c=0,u=null}))};return M([o?.[0],"value"],(e,t)=>{"value"==t&&d()}),M([o?.[1],"value"],(e,t)=>{"value"==t&&d()}),d(!0),M([a?.[0],"value"],(t,r)=>{"value"==r&&null!=n.cell&&null!=t&&we(e,"--cell-x",(n.cell[0]=t)||0)}),M([a?.[1],"value"],(t,r)=>{"value"==r&&null!=n.cell&&null!=t&&we(e,"--cell-y",(n.cell[1]=t)||0)}),(async(e,{layout:t,dragging:n,currentCell:r,syncDragStyles:i},{item:s,items:o})=>{const a=e=>{const n=e?.parentElement;return n?(t[0]=parseInt(n.getAttribute?.("data-grid-columns")||"4")||t[0],t[1]=parseInt(n.getAttribute?.("data-grid-rows")||"8")||t[1],t):t},l=()=>{const t=e?.parentElement;if(!t)return null;const r=ke(t),i=Me(e,r)??e?.getBoundingClientRect?.(),l=Me(t,r)??t?.getBoundingClientRect?.();if(!i||!l)return null;const c=[...a(e)],u=t.getBoundingClientRect?.(),d=[t?.clientWidth||t?.offsetWidth||u?.width||1,t?.clientHeight||t?.offsetHeight||u?.height||1],h=[(i.left+i.right)/2-l.left,(i.top+i.bottom)/2-l.top],p={item:s,items:o,layout:c,size:d},f=((e,t,n,r)=>{if(!e||!t||!n||null==r)return[0,0];const i=[Math.max(t?.[0]||0,1),Math.max(t?.[1]||0,1)],s=r%2?[n?.[1]||1,n?.[0]||1]:[n?.[0]||1,n?.[1]||1],o=[(s[0]||1)/i[0],(s[1]||1)/i[1]];return[(Math.max((e?.width||o[0])/(o[0]||1),1)-1)/2,(Math.max((e?.height||o[1])/(o[1]||1),1)-1)/2]})(i,c,d,r),m=E(h,p,r);m[0]-=f[0],m[1]-=f[1];const y=qi(m),g=S([y.x.value,y.y.value],p),v=Di(g,c);return{inset:[h[0]-n?.[0]?.value,h[1]-n?.[1]?.value],cell:[v.x.value,v.y.value]}},c=(e,t=0)=>{if(e&&r?.[t]?.value!=e?.[t])try{r[t].value=e[t]}catch(Gi){}},u=n=>{const r=S(n,{item:s,items:o,layout:t,size:[e?.clientWidth||0,e?.clientHeight||0]}),i=Di(r,t);c(n=[i.x.value,i.y.value],0),c(n,1)};Mr(t=>new Cr(e,{handler:"*",anyPointer:!0,mouseImmediate:!0,minHoldTime:216e3,maxHoldTime:100},wr(o=>{(t=>{const n=l(),o=n?.cell;var a;if(o&&((a=n?.inset||[0,0])&&(we(e,"--cs-inset-x",`${a[0]||0}px`),we(e,"--cs-inset-y",`${a[1]||0}px`)),u(o),we(e,"--p-cell-x",o?.[0]??r?.[0]?.value??s?.cell?.[0]??0),we(e,"--p-cell-y",o?.[1]??r?.[1]?.value??s?.cell?.[1]??0),we(e,"--cell-x",o?.[0]??r?.[0]?.value??s?.cell?.[0]??0),we(e,"--cell-y",o?.[1]??r?.[1]?.value??s?.cell?.[1]??0)),t&&Array.isArray(t))try{t[0].value=0,t[1].value=0}catch(Gi){}i?.(!0),e?.setAttribute?.("data-dragging","")})(n),t?.(o,e)})),t=>{const n=l(),o=n?.cell;we(e,"--p-cell-x",r?.[0]?.value??s?.cell?.[0]??o?.[0]),we(e,"--p-cell-y",r?.[1]?.value??s?.cell?.[1]??o?.[1]),i?.(!0),o&&(u(o),we(e,"--cell-x",o?.[0]??r?.[0]?.value??s?.cell?.[0]??0),we(e,"--cell-y",o?.[1]??r?.[1]?.value??s?.cell?.[1]??0));const a=[Ni(e,"x",!0),Ni(e,"y",!0)];return Promise.allSettled(a).finally(()=>{if(t&&Array.isArray(t))try{t[0].value=0,t[1].value=0}catch(Gi){}i?.(!0),o&&(we(e,"--p-cell-x",o?.[0]??r?.[0]?.value??s?.cell?.[0]??0),we(e,"--p-cell-y",o?.[1]??r?.[1]?.value??s?.cell?.[1]??0),we(e,"--cell-x",o?.[0]??r?.[0]?.value??s?.cell?.[0]??0),we(e,"--cell-y",o?.[1]??r?.[1]?.value??s?.cell?.[1]??0)),e?.removeAttribute?.("data-dragging"),delete e?.dataset?.dragging}),[0,0]},n)})(e,{layout:s,currentCell:a,dragging:o,syncDragStyles:d},{item:n,items:r,list:i}),a};function Ii(e){if(!e)return null;if(e.endsWith("%")){const t=parseFloat(e);return Number.isNaN(t)?null:t/100}const t=parseFloat(e);return Number.isNaN(t)?null:t}function Wi(e,t,n){return Math.min(n,Math.max(t,e))}new class extends Ne{constructor(e){super(e)}connect(e){const t=e?.deref?.();Ot(t,{classList:/* @__PURE__ */new Set(["ui-gridlayout"])});const n=[t.clientWidth,t.clientHeight],r=new ResizeObserver(e=>{for(const t of e)if(t?.contentBoxSize){const e=t?.contentBoxSize?.[0];n[0]=e?.inlineSize||n[0]||0,n[1]=e?.blockSize||n[1]||0}});Object.defineProperty(t,"size",{get:()=>n}),r.observe(t,{box:"content-box"}),Sr.set(t,{pointerMap:/* @__PURE__ */new Map,pointerCache:/* @__PURE__ */new Map})}}("ui-gridbox"),new class extends Ne{constructor(e){super(e)}connect(e){const t=e?.deref?.()??e;t.classList.add("ui-orientbox");const n=k(1),r=k(oe?.[ae()]||0);t.style.setProperty("--zoom",n.value),t.style.setProperty("--orient",r.value),Object.defineProperty(t,"size",{get:()=>i}),Object.defineProperty(t,"zoom",{get:()=>parseFloat(n.value)||1,set:e=>{n.value=e,t.style.setProperty("--zoom",e)}}),Object.defineProperty(t,"orient",{get:()=>parseInt(r.value)||0,set:e=>{r.value=e,t.style.setProperty("--orient",e)}});const i=Fi(t.clientWidth,t.clientHeight);return new ResizeObserver(e=>{for(const t of e)if(t?.contentBoxSize){const e=t?.contentBoxSize?.[0];i.x.value=e?.inlineSize||i.x.value||0,i.y.value=e?.blockSize||i.y.value||0}}).observe(t,{box:"content-box"}),Sr.set(t,{pointerMap:/* @__PURE__ */new Map,pointerCache:/* @__PURE__ */new Map}),this}}("ui-orientbox");const Ci=(e,t,n=null)=>{const r=Array.from(document.elementsFromPoint(e,t))?.filter?.(e=>e instanceof HTMLElement&&e!=n&&(null==e?.dataset?.alpha||parseFloat(e?.dataset?.alpha)>.01)&&e?.checkVisibility?.({contentVisibilityAuto:!0,opacityProperty:!0,visibilityProperty:!0})&&e?.matches?.(":not([data-hidden])")&&"none"!=e?.style?.getPropertyValue("display")).map(e=>{const t=getComputedStyle?.(e);return{element:e,zIndex:parseInt(t?.zIndex||"0",10)||0,color:t?.backgroundColor||"transparent"}}).sort((e,t)=>Math.sign(t.zIndex-e.zIndex)).filter(({color:e})=>(e=>e&&null!=e?(function(e){if("string"!=typeof e)return null;let t=e.trim().toLowerCase();if("transparent"===t)return 0;if(t.startsWith("#")){const e=t;if(4===e.length)return 1;if(7===e.length)return 1;if(5===e.length){const t=e[4];return Wi(parseInt(t+t,16)/255,0,1)}if(9===e.length){const t=e.slice(7,9);return Wi(parseInt(t,16)/255,0,1)}return null}const n=t.match(/^([a-z-]+)\((.*)\)$/i);if(!n)return null;const r=n[2].trim();{const e=r.lastIndexOf("/");if(-1!==e){const t=Ii(r.slice(e+1).trim());return null!=t?Wi(t,0,1):null}}if(r.includes(",")){const e=r.split(",").map(e=>e.trim());if(e.length>=4){const t=Ii(e[3]);return null!=t?Wi(t,0,1):null}return 1}return 1}?.(e)||0)>.1:0)(e));return r?.[0]?.element instanceof HTMLElement&&r?.[0]?.color||"transparent"},Li=(e=document.documentElement)=>{const t=e?.querySelector?.("meta[data-theme-color]")??e?.querySelector?.('meta[name="theme-color"]'),n=Ci(window.innerWidth-64,10);(t||window?.electronBridge)&&e==document.documentElement&&t?.setAttribute?.("content",n)},_i=(e=document.documentElement)=>{e.querySelectorAll("body, body > *, body > * > *").forEach(e=>{e&&(e=>{const t=e?.getBoundingClientRect();if(t){const n=.5*$e?.();Ci((t.left+t.right)*n,(t.top+t.bottom)*n,e)}})(e)})};"undefined"!=typeof document&&(requestAnimationFrame(()=>(async()=>{Li(),_i()})?.()),((e=document.documentElement)=>{matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({})=>_i(e));const t=()=>{Li(e),_i(e)};se(e,"u2-appear",()=>requestIdleCallback(t,{timeout:100})),se(e,"u2-hidden",()=>requestIdleCallback(t,{timeout:100})),se(e,"u2-theme-change",()=>requestIdleCallback(t,{timeout:100})),se(window,"load",()=>requestIdleCallback(t,{timeout:100})),se(document,"visibilitychange",()=>requestIdleCallback(t,{timeout:100})),((e,t=1e3,...n)=>{requestIdleCallback(async()=>{if(e&&"function"==typeof e)for(;;)await Promise.try(e,...n),await new Promise(e=>setTimeout(e,t)),await new Promise(e=>requestIdleCallback(e,{timeout:100})),await new Promise(e=>requestAnimationFrame(e))},{timeout:1e3})})(t,500)})?.());const Oi=(e=("undefined"!=typeof document?document?.documentElement:null))=>{if(!e)return()=>{};const t=[k(0),k(0)];return t.push(A(((e,t=("undefined"!=typeof document?document?.documentElement:null))=>{if(!t)return()=>{};let n=-1;const r=e=>{n=-1},i=[se(t,"pointerup",r),se(t,"pointercancel",r),se(t,"pointermove",t=>{n<0&&(n=t.pointerId),n==t.pointerId&&e?.(t)})];return()=>{i.forEach(e=>e?.())}})(e=>{t[0].value=e.clientX,t[1].value=e.clientY},e))),(t[2]?.deref?.()??t[2])&&N(t,Symbol.dispose,t[2]?.deref?.()??t[2]),t};class Ri{_x;_y;constructor(e=0,t=0){this._x="number"==typeof e?k(e):e,this._y="number"==typeof t?k(t):t}get x(){return this._x}set x(e){"number"==typeof e?this._x.value=e:this._x=e}get y(){return this._y}set y(e){"number"==typeof e?this._y.value=e:this._y=e}get 0(){return this._x}get 1(){return this._y}toArray(){return[this._x,this._y]}clone(){return new Ri(this._x.value,this._y.value)}set(e,t){return this._x.value=e,this._y.value=t,this}copy(e){return this._x.value=e.x.value,this._y.value=e.y.value,this}add(e){return new Ri(this._x.value+e.x.value,this._y.value+e.y.value)}subtract(e){return new Ri(this._x.value-e.x.value,this._y.value-e.y.value)}multiply(e){return new Ri(this._x.value*e,this._y.value*e)}divide(e){if(0===e)throw new Error("Division by zero");return new Ri(this._x.value/e,this._y.value/e)}dot(e){return this._x.value*e.x.value+this._y.value*e.y.value}cross(e){return this._x.value*e.y.value-this._y.value*e.x.value}magnitude(){return Math.sqrt(this._x.value*this._x.value+this._y.value*this._y.value)}magnitudeSquared(){return this._x.value*this._x.value+this._y.value*this._y.value}distanceTo(e){const t=this._x.value-e.x.value,n=this._y.value-e.y.value;return Math.sqrt(t*t+n*n)}distanceToSquared(e){const t=this._x.value-e.x.value,n=this._y.value-e.y.value;return t*t+n*n}normalize(){const e=this.magnitude();return 0===e?new Ri(0,0):new Ri(this._x.value/e,this._y.value/e)}equals(e,t=1e-6){return Math.abs(this._x.value-e.x.value)<t&&Math.abs(this._y.value-e.y.value)<t}lerp(e,t){const n=Math.max(0,Math.min(1,t));return new Ri(this._x.value+(e.x.value-this._x.value)*n,this._y.value+(e.y.value-this._y.value)*n)}angleTo(e){const t=this.dot(e),n=this.cross(e);return Math.atan2(n,t)}rotate(e){const t=Math.cos(e),n=Math.sin(e);return new Ri(this._x.value*t-this._y.value*n,this._x.value*n+this._y.value*t)}projectOnto(e){const t=this.dot(e)/e.magnitudeSquared();return e.multiply(t)}reflect(e){const t=e.normalize(),n=this.dot(t);return this.subtract(t.multiply(2*n))}clamp(e,t){return new Ri(Math.max(e.x.value,Math.min(t.x.value,this._x.value)),Math.max(e.y.value,Math.min(t.y.value,this._y.value)))}min(){return Math.min(this._x.value,this._y.value)}max(){return Math.max(this._x.value,this._y.value)}static zero(){return new Ri(0,0)}static one(){return new Ri(1,1)}static unitX(){return new Ri(1,0)}static unitY(){return new Ri(0,1)}static fromAngle(e,t=1){return new Ri(Math.cos(e)*t,Math.sin(e)*t)}static fromPolar(e,t){return Ri.fromAngle(e,t)}}const Fi=(e=0,t=0)=>new Ri(e,t),zi=(e=0,t=0,n=0,r=0)=>({position:Fi(e,t),size:Fi(n,r)}),Ti=(e,t)=>new Ri(Hi([e.x,t.position.x,t.size.x],()=>Math.max(t.position.x.value,Math.min(e.x.value,t.position.x.value+t.size.x.value))),Hi([e.y,t.position.y,t.size.y],()=>Math.max(t.position.y.value,Math.min(e.y.value,t.position.y.value+t.size.y.value)))),ji=e=>{const t=[],n=e=>{e&&"object"==typeof e&&"value"in e?t.push(e):Array.isArray(e)?e.forEach(n):e&&"object"==typeof e&&Object.values(e).forEach(n)};return n(e),t},Hi=(e,t)=>{const n=()=>e.map(e=>e&&"object"==typeof e&&"value"in e?e.value:e),r=t(...n());if("number"==typeof r){const i=k(r),s=()=>{i.value=t(...n())};return ji(e).forEach(e=>M(e,s)),i}let i=r;const s=()=>{i=t(...n())};return ji(e).forEach(e=>M(e,s)),i},Di=(e,t)=>{let n,r;if(e instanceof Ri)n=e.x?.value??0,r=e.y?.value??0;else{if(!(Array.isArray(e)&&e.length>=2))return Fi(0,0);n=e[0]??0,r=e[1]??0}if(!isFinite(n)||!isFinite(r))return Fi(0,0);const i=Math.max(1,t[0]||1),s=Math.max(1,t[1]||1),o=Math.max(0,Math.min(Math.floor(n),i-1)),a=Math.max(0,Math.min(Math.floor(r),s-1));return Fi(o,a)},qi=(e,t=1)=>{const n=e instanceof Ri?e.y.value:e[1],r=Math.floor((e instanceof Ri?e.x.value:e[0])/t)*t,i=Math.floor(n/t)*t;return Fi(r,i)};class Bi{static translate2D(e){return Hi([e.x,e.y],()=>`translate(${e.x.value}px, ${e.y.value}px)`)}static translate3D(e,t=k(0)){return Hi([e.x,e.y,t],()=>`translate3d(${e.x.value}px, ${e.y.value}px, ${t.value}px)`)}static scale2D(e){return Hi([e.x,e.y],()=>`scale(${e.x.value}, ${e.y.value})`)}static rotate(e){return Hi([e],()=>`rotate(${e.value}deg)`)}static combine(e){return Hi(e,()=>e.map(e=>e.value).join(" "))}static matrix2D(e){return Hi(e.elements,()=>`matrix(${e.elements.map(e=>e.value).join(", ")})`)}static matrix3D(e){return Hi(e.elements,()=>`matrix3d(${e.elements.map(e=>e.value).join(", ")})`)}}class Vi{static leftTop(e){return{left:Hi([e.x],()=>`${e.x.value}px`),top:Hi([e.y],()=>`${e.y.value}px`)}}static inset(e){return{inset:Hi([e.x,e.y],()=>`${e.y.value}px ${e.x.value}px`)}}static size(e){return{width:Hi([e.x],()=>`${e.x.value}px`),height:Hi([e.y],()=>`${e.y.value}px`)}}}class Ui{static bindTransform(e,t,n="instant",r){const i=Bi.translate2D(t);return("instant"===n?Ge:"animate"===n?Ke:"transition"===n?Ye:Je)(e,"transform",i,r)??(()=>{})}static bindPosition(e,t,n="instant",r){const i=Vi.leftTop(t),s="instant"===n?Ge:"animate"===n?Ke:"transition"===n?Ye:Je,o=s(e,"left",i.left,r)??(()=>{}),a=s(e,"top",i.top,r)??(()=>{});return()=>{o?.(),a?.()}}static bindSize(e,t,n="instant",r){const i=Vi.size(t),s="instant"===n?Ge:"animate"===n?Ke:"transition"===n?Ye:Je,o=s(e,"width",i.width,r)??(()=>{}),a=s(e,"height",i.height,r)??(()=>{});return()=>{o?.(),a?.()}}static bindWithUnit(e,t,n,r="px",i="instant",s){const o=Hi([n],()=>`${n.value}${r}`);return("instant"===i?Ge:"animate"===i?Ke:"transition"===i?Ye:Je)(e,t,o,s)??(()=>{})}static bindVectorWithUnit(e,t,n="px",r="instant",i){const s=Hi([t.x,t.y],()=>`${t.x.value}${n} ${t.y.value}${n}`);return("instant"===r?Ge:"animate"===r?Ke:"transition"===r?Ye:Je)(e,"transform",s,{...i,handler:"instant"===r?void 0:(e,t)=>{e.style.setProperty("transform",`translate(${t})`)}})??(()=>{})}static bindTransformMorph(e,t,n={}){const r={};if(t.translate&&(r.transform=Hi([t.translate.x,t.translate.y],()=>`translate(${t.translate.x.value}px, ${t.translate.y.value}px)`)),t.scale){const e=t.scale instanceof Ri?Hi([t.scale.x,t.scale.y],()=>`scale(${t.scale.x.value}, ${t.scale.y.value})`):Hi([t.scale],()=>`scale(${t.scale.value})`);r.transform=r.transform?Hi([r.transform,e],(e,t)=>`${e} ${t}`):e}if(t.rotate){const e=Hi([t.rotate],()=>`rotate(${t.rotate.value}deg)`);r.transform=r.transform?Hi([r.transform,e],(e,t)=>`${e} ${t}`):e}if(t.skew){const e=Hi([t.skew.x,t.skew.y],()=>`skew(${t.skew.x.value}deg, ${t.skew.y.value}deg)`);r.transform=r.transform?Hi([r.transform,e],(e,t)=>`${e} ${t}`):e}return((e,t,n={})=>Te(e,"",t,"morph",n))(e,r,n)}static bindColor(e,t,n,r="transition",i={duration:300,easing:"ease-in-out"}){return("instant"===r?Ge:"animate"===r?Ke:Ye)(e,t,"string"==typeof n?n:Hi([n],()=>`hsl(${n.value}, 70%, 50%)`),i)??(()=>{})}static bindOpacity(e,t,n="transition",r={duration:200,easing:"ease-in-out"}){return("instant"===n?Ge:"animate"===n?Ke:"transition"===n?Ye:Je)(e,"opacity",t,r)??(()=>{})}static bindBorderRadius(e,t,n="animate",r={duration:300,easing:"ease-out"}){return("instant"===n?Ge:"animate"===n?Ke:"transition"===n?Ye:Je)(e,"border-radius",t instanceof Ri?Hi([t.x,t.y],()=>`${t.x.value}px ${t.y.value}px`):Hi([t],()=>`${t.value}px`),r)??(()=>{})}}class Xi{static add(e,t,n="px"){return Hi([e,t],()=>`calc(${e.value}${n} + ${t.value}${n})`)}static subtract(e,t,n="px"){return Hi([e,t],()=>`calc(${e.value}${n} - ${t.value}${n})`)}static multiply(e,t){return Hi([e,t],()=>`calc(${e.value} * ${t.value})`)}static divide(e,t){return Hi([e,t],()=>`calc(${e.value} / ${t.value})`)}static clamp(e,t,n,r="px"){return Hi([e,t,n],()=>`clamp(${t.value}${r}, ${e.value}${r}, ${n.value}${r})`)}static min(e,t,n="px"){return Hi([e,t],()=>`min(${e.value}${n}, ${t.value}${n})`)}static max(e,t,n="px"){return Hi([e,t],()=>`max(${e.value}${n}, ${t.value}${n})`)}}export{un as A,Fn as B,lt as C,Nr as D,Ot as E,Oi as F,dr as G,Ut as H,Yt as I,$i as J,Sn as K,Qt as L,_t as M,Ve as N,Cr as O,dn as P,nt as Q,$r as R,Pn as S,wn as T,gi as U,qr as a,Ge as b,zn as c,sr as d,Tn as e,ui as f,jr as g,wi as h,xi as i,hi as j,di as k,Mi as l,Pr as m,Rr as n,yi as o,or as p,Ur as q,En as r,ti as s,Ln as t,Ei as u,jn as v,vi as w,Pi as x,bi as y,si as z};