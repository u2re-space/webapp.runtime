{"version":3,"file":"overlay.js","sources":["../../src/frontend/shared/Toast.ts","../../src/frontend/shared/overlay.ts"],"sourcesContent":["/**\n * Standalone Toast System\n * Works independently in any context: PWA, Chrome Extension (content script, popup, service worker), vanilla JS\n * No dependencies on fest/lure or other framework libraries\n */\n\nexport type ToastKind = \"info\" | \"success\" | \"warning\" | \"error\";\nexport type ToastPosition = \"top\" | \"bottom\" | \"top-left\" | \"top-right\" | \"bottom-left\" | \"bottom-right\";\n\nexport interface ToastOptions {\n    message: string;\n    kind?: ToastKind;\n    duration?: number;\n    persistent?: boolean;\n    position?: ToastPosition;\n    onClick?: () => void;\n}\n\nexport interface ToastLayerConfig {\n    containerId?: string;\n    position?: ToastPosition;\n    maxToasts?: number;\n    zIndex?: number;\n}\n\n// Default configuration\nconst DEFAULT_CONFIG: Required<ToastLayerConfig> = {\n    containerId: \"rs-toast-layer\",\n    position: \"bottom\",\n    maxToasts: 5,\n    zIndex: 2147483647\n};\n\n// Toast CSS styles (inlined for isolation)\nconst TOAST_STYLES = `\n.rs-toast-layer {\n    position: fixed;\n    z-index: var(--rs-toast-z, 2147483647);\n    pointer-events: none;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    padding: 1rem;\n    gap: 0.5rem;\n    max-block-size: 80dvb;\n    overflow: hidden;\n    box-sizing: border-box;\n}\n\n.rs-toast-layer[data-position=\"bottom\"],\n.rs-toast-layer:not([data-position]) {\n    inset-block-end: 10dvb;\n    inset-inline: 0;\n    justify-content: flex-end;\n}\n\n.rs-toast-layer[data-position=\"top\"] {\n    inset-block-start: 10dvb;\n    inset-inline: 0;\n    justify-content: flex-start;\n}\n\n.rs-toast-layer[data-position=\"top-left\"] {\n    inset-block-start: 10dvb;\n    inset-inline-start: 0;\n    align-items: flex-start;\n}\n\n.rs-toast-layer[data-position=\"top-right\"] {\n    inset-block-start: 10dvb;\n    inset-inline-end: 0;\n    align-items: flex-end;\n}\n\n.rs-toast-layer[data-position=\"bottom-left\"] {\n    inset-block-end: 10dvb;\n    inset-inline-start: 0;\n    align-items: flex-start;\n}\n\n.rs-toast-layer[data-position=\"bottom-right\"] {\n    inset-block-end: 10dvb;\n    inset-inline-end: 0;\n    align-items: flex-end;\n}\n\n.rs-toast {\n    --toast-bg: oklch(from var(--surface-color, #1a1a1a) l c h / 0.85);\n    --toast-text: var(--on-surface-color, #ffffff);\n    --toast-radius: 9999px;\n    --toast-shadow: 0 2px 8px rgba(0,0,0,0.25);\n\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    gap: 0.5rem;\n    padding: 0.5rem 1rem;\n    max-inline-size: min(90vw, 32rem);\n    inline-size: fit-content;\n\n    border-radius: var(--toast-radius);\n    background: var(--toast-bg);\n    box-shadow: var(--toast-shadow);\n    backdrop-filter: blur(12px) saturate(140%);\n    color: var(--toast-text);\n\n    font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    font-size: 0.875rem;\n    font-weight: 500;\n    letter-spacing: 0.01em;\n    line-height: 1.4;\n    white-space: nowrap;\n\n    pointer-events: auto;\n    user-select: none;\n    cursor: default;\n\n    opacity: 0;\n    transform: translateY(100%) scale(0.9);\n    transition:\n        opacity 160ms ease-out,\n        transform 160ms cubic-bezier(0.16, 1, 0.3, 1),\n        background-color 100ms ease;\n}\n\n.rs-toast[data-visible] {\n    opacity: 1;\n    transform: translateY(0) scale(1);\n}\n\n.rs-toast:active {\n    transform: scale(0.98);\n}\n\n.rs-toast[data-kind=\"success\"] {\n    --toast-bg: oklch(from var(--color-success, #22c55e) l c h / 0.9);\n}\n\n.rs-toast[data-kind=\"warning\"] {\n    --toast-bg: oklch(from var(--color-warning, #f59e0b) l c h / 0.9);\n}\n\n.rs-toast[data-kind=\"error\"] {\n    --toast-bg: oklch(from var(--color-error, #ef4444) l c h / 0.9);\n}\n\n@media (prefers-reduced-motion: reduce) {\n    .rs-toast,\n    .rs-toast[data-visible] {\n        transition-duration: 0ms;\n        transform: none;\n    }\n}\n`;\n\n// Track style injection per document\nconst injectedDocs = new WeakSet<Document>();\n\n// Toast layer instances per config\nconst toastLayers = new Map<string, HTMLElement>();\n\n/**\n * Ensure styles are injected into the document\n */\nconst ensureStyles = (doc: Document = document): void => {\n    if (injectedDocs.has(doc)) return;\n\n    const style = doc.createElement(\"style\");\n    style.id = \"__rs-toast-styles__\";\n    style.textContent = TOAST_STYLES;\n    (doc.head || doc.documentElement).appendChild(style);\n    injectedDocs.add(doc);\n};\n\n/**\n * Get or create a toast layer container\n */\nconst getToastLayer = (config: Required<ToastLayerConfig>, doc: Document = document): HTMLElement => {\n    const key = `${config.containerId}-${config.position}`;\n\n    if (toastLayers.has(key)) {\n        const existing = toastLayers.get(key)!;\n        if (existing.isConnected) return existing;\n        toastLayers.delete(key);\n    }\n\n    ensureStyles(doc);\n\n    let layer = doc.getElementById(config.containerId);\n    if (!layer) {\n        layer = doc.createElement(\"div\");\n        layer.id = config.containerId;\n        layer.className = \"rs-toast-layer\";\n        doc.body.appendChild(layer);\n    }\n\n    layer.setAttribute(\"data-position\", config.position);\n    layer.style.setProperty(\"--rs-toast-z\", String(config.zIndex));\n\n    toastLayers.set(key, layer);\n    return layer;\n};\n\n/**\n * Create and show a toast notification\n */\nexport const showToast = (options: ToastOptions | string): HTMLElement | null => {\n    // Handle string shorthand\n    const opts: ToastOptions = typeof options === \"string\" ? { message: options } : options;\n\n    const {\n        message,\n        kind = \"info\",\n        duration = 3000,\n        persistent = false,\n        position = \"bottom\",\n        onClick\n    } = opts;\n\n    // Check for document availability (service worker context)\n    if (typeof document === \"undefined\") {\n        // In service worker context, try to broadcast to clients\n        broadcastToast(opts);\n        return null;\n    }\n\n    const config: Required<ToastLayerConfig> = {\n        ...DEFAULT_CONFIG,\n        position\n    };\n\n    const layer = getToastLayer(config);\n\n    // Limit number of toasts\n    while (layer.children.length >= config.maxToasts) {\n        layer.firstChild?.remove();\n    }\n\n    const toast = document.createElement(\"div\");\n    toast.className = \"rs-toast\";\n    toast.setAttribute(\"data-kind\", kind);\n    toast.setAttribute(\"role\", \"alert\");\n    toast.setAttribute(\"aria-live\", kind === \"error\" ? \"assertive\" : \"polite\");\n    toast.textContent = message;\n\n    layer.appendChild(toast);\n\n    // Trigger enter animation\n    requestAnimationFrame(() => {\n        toast.setAttribute(\"data-visible\", \"\");\n    });\n\n    const removeToast = () => {\n        toast.removeAttribute(\"data-visible\");\n        setTimeout(() => {\n            toast.remove();\n        }, 200);\n    };\n\n    // Auto-remove after duration\n    if (!persistent) {\n        setTimeout(removeToast, duration);\n    }\n\n    // Click handler\n    toast.addEventListener(\"click\", () => {\n        onClick?.();\n        removeToast();\n    });\n\n    return toast;\n};\n\n/**\n * Convenience methods for different toast kinds\n */\nexport const showSuccess = (message: string, duration?: number) =>\n    showToast({ message, kind: \"success\", duration });\n\nexport const showError = (message: string, duration?: number) =>\n    showToast({ message, kind: \"error\", duration });\n\nexport const showWarning = (message: string, duration?: number) =>\n    showToast({ message, kind: \"warning\", duration });\n\nexport const showInfo = (message: string, duration?: number) =>\n    showToast({ message, kind: \"info\", duration });\n\n/**\n * Broadcast toast to all clients (for service worker context)\n */\nconst broadcastToast = (options: ToastOptions): void => {\n    try {\n        const channel = new BroadcastChannel(\"rs-toast\");\n        channel.postMessage({ type: \"show-toast\", options });\n        channel.close();\n    } catch (e) {\n        console.warn(\"[Toast] Broadcast failed:\", e);\n    }\n};\n\n/**\n * Listen for toast broadcasts (call in main thread contexts)\n */\nexport const listenForToasts = (): () => void => {\n    if (typeof BroadcastChannel === \"undefined\") return () => {};\n\n    const channel = new BroadcastChannel(\"rs-toast\");\n    const handler = (event: MessageEvent) => {\n        if (event.data?.type === \"show-toast\" && event.data?.options) {\n            showToast(event.data.options);\n        }\n    };\n    channel.addEventListener(\"message\", handler);\n    return () => {\n        channel.removeEventListener(\"message\", handler);\n        channel.close();\n    };\n};\n\n/**\n * Clear all toasts from a layer\n */\nexport const clearToasts = (position: ToastPosition = \"bottom\"): void => {\n    const key = `${DEFAULT_CONFIG.containerId}-${position}`;\n    const layer = toastLayers.get(key);\n    if (layer) {\n        layer.innerHTML = \"\";\n    }\n};\n\n/**\n * Initialize toast listener for receiving broadcasts\n * Call this in main thread contexts (content scripts, popup, etc.)\n */\nexport const initToastReceiver = (): (() => void) => {\n    return listenForToasts();\n};\n\n// Default export for convenience\nexport default {\n    show: showToast,\n    success: showSuccess,\n    error: showError,\n    warning: showWarning,\n    info: showInfo,\n    clear: clearToasts,\n    listen: listenForToasts,\n    init: initToastReceiver\n};\n","/**\n * Unified Overlay System\n * Standalone, works in: PWA, Chrome Extension content scripts, vanilla JS\n * Provides overlay, selection box, hints, and integrated toast/clipboard\n */\n\nimport { showToast as toastShow, initToastReceiver, type ToastOptions } from \"./Toast\";\nimport { initClipboardReceiver } from \"./Clipboard\";\n\nexport interface OverlayConfig {\n    prefix?: string;\n    zIndex?: number;\n}\n\nexport interface OverlayElements {\n    overlay: HTMLDivElement | null;\n    box: HTMLDivElement | null;\n    hint: HTMLDivElement | null;\n    sizeBadge: HTMLDivElement | null;\n    toast: HTMLDivElement | null;\n}\n\nconst DEFAULT_CONFIG: Required<OverlayConfig> = {\n    prefix: \"sel-dom\",\n    zIndex: 2147483647\n};\n\nconst createOverlayStyles = (prefix: string, zIndex: number): string => `\nhtml > .${prefix}-overlay,\nbody > .${prefix}-overlay,\n.${prefix}-overlay[popover] {\n    position: fixed !important;\n    inset: 0 !important;\n    margin: 0 !important;\n    padding: 0 !important;\n    border: none !important;\n    background: transparent !important;\n    background-color: transparent !important;\n    background-image: none !important;\n    z-index: ${zIndex} !important;\n    display: none;\n    visibility: hidden;\n    pointer-events: none;\n    box-sizing: border-box !important;\n    inline-size: 100vw !important;\n    block-size: 100vh !important;\n    max-inline-size: 100vw !important;\n    max-block-size: 100vh !important;\n    overflow: visible !important;\n    cursor: crosshair !important;\n    user-select: none !important;\n    -webkit-user-select: none !important;\n    -webkit-user-drag: none !important;\n    outline: none !important;\n}\n\nhtml > .${prefix}-overlay:popover-open,\nbody > .${prefix}-overlay:popover-open,\n.${prefix}-overlay[popover]:popover-open {\n    display: block !important;\n    visibility: visible !important;\n    pointer-events: auto !important;\n}\n\nhtml > .${prefix}-overlay::backdrop,\nbody > .${prefix}-overlay::backdrop,\n.${prefix}-overlay[popover]::backdrop {\n    position: fixed !important;\n    inset: 0 !important;\n    background: rgba(0, 0, 0, 0.35) !important;\n    pointer-events: auto !important;\n    cursor: crosshair !important;\n    z-index: ${zIndex - 1} !important;\n}\n\n.${prefix}-overlay .${prefix}-box,\n.${prefix}-box {\n    position: fixed !important;\n    overflow: visible !important;\n    border: 2px solid #4da3ff !important;\n    background: rgba(77, 163, 255, 0.15) !important;\n    box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.4) !important;\n    pointer-events: none !important;\n    -webkit-user-drag: none !important;\n    box-sizing: border-box !important;\n    z-index: 1 !important;\n}\n\n.${prefix}-overlay .${prefix}-hint,\n.${prefix}-hint {\n    position: fixed !important;\n    inset-inline-start: 50% !important;\n    inset-block-start: 50% !important;\n    transform: translate(-50%, -50%) !important;\n    background: rgba(0, 0, 0, 0.8) !important;\n    color: #fff !important;\n    font: 13px/1.4 system-ui, -apple-system, \"Segoe UI\", Roboto, Arial, sans-serif !important;\n    padding: 10px 16px !important;\n    border-radius: 8px !important;\n    pointer-events: none !important;\n    -webkit-user-drag: none !important;\n    inline-size: max-content !important;\n    block-size: max-content !important;\n    z-index: 2 !important;\n    white-space: nowrap !important;\n    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.4) !important;\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;\n}\n\n.${prefix}-hint:empty {\n    display: none !important;\n    visibility: hidden !important;\n}\n\n.${prefix}-overlay .${prefix}-size-badge,\n.${prefix}-box .${prefix}-size-badge,\n.${prefix}-size-badge {\n    position: absolute !important;\n    transform: translate(6px, 6px) !important;\n    background: #1e293b !important;\n    color: #fff !important;\n    font: 11px/1.3 ui-monospace, SFMono-Regular, \"SF Mono\", Menlo, Consolas, monospace !important;\n    padding: 4px 8px !important;\n    border-radius: 4px !important;\n    pointer-events: none !important;\n    -webkit-user-drag: none !important;\n    inline-size: max-content !important;\n    block-size: max-content !important;\n    z-index: 3 !important;\n    white-space: nowrap !important;\n    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.4) !important;\n}\n\n.${prefix}-size-badge:empty {\n    display: none !important;\n    visibility: hidden !important;\n}\n\nhtml > .${prefix}-toast,\nbody > .${prefix}-toast,\n.${prefix}-toast {\n    position: fixed !important;\n    inset-inline-start: 50% !important;\n    inset-block-end: 24px !important;\n    inset-block-start: auto !important;\n    inset-inline-end: auto !important;\n    transform: translateX(-50%) !important;\n    background: rgba(0, 0, 0, 0.9) !important;\n    color: #fff !important;\n    font: 13px/1.4 system-ui, -apple-system, \"Segoe UI\", Roboto, Arial, sans-serif !important;\n    padding: 10px 16px !important;\n    border-radius: 8px !important;\n    pointer-events: none !important;\n    -webkit-user-drag: none !important;\n    inline-size: max-content !important;\n    block-size: max-content !important;\n    z-index: ${zIndex} !important;\n    white-space: nowrap !important;\n    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4) !important;\n    opacity: 0;\n    visibility: hidden;\n    transition: opacity 200ms ease-out, visibility 200ms ease-out !important;\n    margin: 0 !important;\n    border: none !important;\n    box-sizing: border-box !important;\n}\n\n.${prefix}-toast.is-visible {\n    opacity: 1 !important;\n    visibility: visible !important;\n}\n\n.${prefix}-toast:empty {\n    display: none !important;\n}\n`;\n\nconst injectedDocs = new WeakSet<Document>();\nconst overlayInstances = new Map<string, OverlayElements>();\n\nlet _receiversInitialized = false;\n\nconst initReceivers = (): void => {\n    if (_receiversInitialized) return;\n    _receiversInitialized = true;\n    initToastReceiver();\n    initClipboardReceiver();\n};\n\nconst injectStyles = (config: Required<OverlayConfig>, doc: Document = document): void => {\n    if (injectedDocs.has(doc)) return;\n\n    const styleId = `__${config.prefix}-styles__`;\n    if (doc.getElementById(styleId)) {\n        injectedDocs.add(doc);\n        return;\n    }\n\n    const style = doc.createElement(\"style\");\n    style.id = styleId;\n    style.textContent = createOverlayStyles(config.prefix, config.zIndex);\n    (doc.head || doc.documentElement).appendChild(style);\n    injectedDocs.add(doc);\n};\n\nconst createElements = (config: Required<OverlayConfig>, doc: Document = document): OverlayElements => {\n    const key = config.prefix;\n\n    if (overlayInstances.has(key)) {\n        const existing = overlayInstances.get(key)!;\n        if (existing.overlay?.isConnected) return existing;\n        overlayInstances.delete(key);\n    }\n\n    if (!doc?.documentElement) {\n        return { overlay: null, box: null, hint: null, sizeBadge: null, toast: null };\n    }\n\n    injectStyles(config, doc);\n    initReceivers();\n\n    const overlay = doc.createElement(\"div\");\n    overlay.className = `${config.prefix}-overlay`;\n    overlay.draggable = false;\n    overlay.tabIndex = -1;\n    overlay.popover = \"manual\";\n\n    const box = doc.createElement(\"div\");\n    box.className = `${config.prefix}-box`;\n    box.tabIndex = -1;\n\n    const hint = doc.createElement(\"div\");\n    hint.className = `${config.prefix}-hint`;\n    hint.textContent = \"Select area. Esc — cancel\";\n    hint.tabIndex = -1;\n\n    const sizeBadge = doc.createElement(\"div\");\n    sizeBadge.className = `${config.prefix}-size-badge`;\n    sizeBadge.textContent = \"\";\n    sizeBadge.tabIndex = -1;\n\n    const toast = doc.createElement(\"div\");\n    toast.className = `${config.prefix}-toast`;\n    toast.tabIndex = -1;\n\n    box.appendChild(sizeBadge);\n    overlay.appendChild(box);\n    overlay.appendChild(hint);\n\n    doc.documentElement.appendChild(toast);\n    doc.documentElement.appendChild(overlay);\n\n    toast.addEventListener(\"transitionend\", () => {\n        if (!toast.classList.contains(\"is-visible\")) {\n            toast.textContent = \"\";\n        }\n    });\n\n    const elements: OverlayElements = { overlay, box, hint, sizeBadge, toast };\n    overlayInstances.set(key, elements);\n\n    return elements;\n};\n\nexport const getOverlayElements = (config?: Partial<OverlayConfig>): OverlayElements => {\n    const fullConfig: Required<OverlayConfig> = { ...DEFAULT_CONFIG, ...config };\n\n    if (typeof document === \"undefined\") {\n        return { overlay: null, box: null, hint: null, sizeBadge: null, toast: null };\n    }\n\n    return createElements(fullConfig);\n};\n\nexport const getOverlay = (config?: Partial<OverlayConfig>): HTMLDivElement | null =>\n    getOverlayElements(config).overlay;\n\nexport const getBox = (config?: Partial<OverlayConfig>): HTMLDivElement | null =>\n    getOverlayElements(config).box;\n\nexport const getHint = (config?: Partial<OverlayConfig>): HTMLDivElement | null =>\n    getOverlayElements(config).hint;\n\nexport const getSizeBadge = (config?: Partial<OverlayConfig>): HTMLDivElement | null =>\n    getOverlayElements(config).sizeBadge;\n\nexport const getToast = (config?: Partial<OverlayConfig>): HTMLDivElement | null =>\n    getOverlayElements(config).toast;\n\nexport const showToast = (text: string | ToastOptions, config?: Partial<OverlayConfig>): void => {\n    if (typeof text === \"object\") {\n        toastShow(text);\n        return;\n    }\n\n    try {\n        toastShow({ message: text, kind: \"info\", duration: 1800 });\n    } catch {\n        const elements = getOverlayElements(config);\n        const toast = elements.toast;\n        if (!toast) return;\n\n        if (!toast.classList.contains(\"is-visible\")) {\n            toast.classList.add(\"is-visible\");\n        }\n\n        if (toast.textContent === text) return;\n        toast.textContent = text;\n\n        setTimeout(() => {\n            if (toast.textContent !== text) return;\n            toast.classList.remove(\"is-visible\");\n        }, 1800);\n    }\n};\n\nexport const showSelection = (config?: Partial<OverlayConfig>): void => {\n    const elements = getOverlayElements(config);\n    const { overlay, box, sizeBadge } = elements;\n    if (!overlay || !box) return;\n\n    try {\n        (overlay as any).showPopover?.();\n    } catch (e) {\n        console.warn(\"[Overlay] showPopover failed:\", e);\n    }\n\n    overlay.style.setProperty(\"display\", \"block\", \"important\");\n\n    box.style.left = \"0px\";\n    box.style.top = \"0px\";\n    box.style.width = \"0px\";\n    box.style.height = \"0px\";\n\n    if (sizeBadge) sizeBadge.textContent = \"\";\n};\n\nexport const hideSelection = (config?: Partial<OverlayConfig>): void => {\n    const elements = getOverlayElements(config);\n    const { overlay, box, sizeBadge } = elements;\n    if (!overlay) return;\n\n    overlay.style.removeProperty(\"display\");\n\n    try {\n        (overlay as any).hidePopover?.();\n    } catch (e) {\n        console.warn(\"[Overlay] hidePopover failed:\", e);\n    }\n\n    if (box) {\n        box.style.left = \"0px\";\n        box.style.top = \"0px\";\n        box.style.width = \"0px\";\n        box.style.height = \"0px\";\n    }\n\n    if (sizeBadge) {\n        sizeBadge.textContent = \"\";\n    }\n};\n\nexport const updateBox = (\n    x: number,\n    y: number,\n    width: number,\n    height: number,\n    config?: Partial<OverlayConfig>\n): void => {\n    const elements = getOverlayElements(config);\n    const { box, sizeBadge } = elements;\n    if (!box) return;\n\n    box.style.left = `${x}px`;\n    box.style.top = `${y}px`;\n    box.style.width = `${width}px`;\n    box.style.height = `${height}px`;\n\n    if (sizeBadge) {\n        sizeBadge.textContent = `${Math.round(width)} × ${Math.round(height)}`;\n        sizeBadge.style.left = `${width}px`;\n        sizeBadge.style.top = `${height}px`;\n    }\n};\n\nexport const setHint = (text: string, config?: Partial<OverlayConfig>): void => {\n    const elements = getOverlayElements(config);\n    if (elements.hint) {\n        elements.hint.textContent = text;\n    }\n};\n\nexport const initOverlay = (config?: Partial<OverlayConfig>): OverlayElements => {\n    if (typeof document === \"undefined\") {\n        return { overlay: null, box: null, hint: null, sizeBadge: null, toast: null };\n    }\n\n    if (document.readyState === \"loading\") {\n        let elements: OverlayElements = { overlay: null, box: null, hint: null, sizeBadge: null, toast: null };\n        document.addEventListener(\"DOMContentLoaded\", () => {\n            elements = getOverlayElements(config);\n        }, { once: true });\n        return elements;\n    }\n\n    return getOverlayElements(config);\n};\n\n// Legacy proxy exports for backward compatibility\nexport const overlay = new Proxy({} as HTMLDivElement, {\n    get: (_, prop) => (getOverlay() as any)?.[prop],\n    set: (_, prop, value) => { const o = getOverlay(); if (o) (o as any)[prop] = value; return true; }\n});\n\nexport const box = new Proxy({} as HTMLDivElement, {\n    get: (_, prop) => (getBox() as any)?.[prop],\n    set: (_, prop, value) => { const b = getBox(); if (b) (b as any)[prop] = value; return true; }\n});\n\nexport const hint = new Proxy({} as HTMLDivElement, {\n    get: (_, prop) => (getHint() as any)?.[prop],\n    set: (_, prop, value) => { const h = getHint(); if (h) (h as any)[prop] = value; return true; }\n});\n\nexport const sizeBadge = new Proxy({} as HTMLDivElement, {\n    get: (_, prop) => (getSizeBadge() as any)?.[prop],\n    set: (_, prop, value) => { const s = getSizeBadge(); if (s) (s as any)[prop] = value; return true; }\n});\n\nexport default {\n    getElements: getOverlayElements,\n    showToast,\n    showSelection,\n    hideSelection,\n    updateBox,\n    setHint,\n    init: initOverlay,\n    getOverlay,\n    getBox,\n    getHint,\n    getSizeBadge,\n    getToast\n};\n\nif (typeof document !== \"undefined\") {\n    if (document.readyState === \"loading\") {\n        document.addEventListener(\"DOMContentLoaded\", () => getOverlayElements(), { once: true });\n    } else {\n        getOverlayElements();\n    }\n}\n"],"names":["DEFAULT_CONFIG","injectedDocs","showToast","overlay","box","hint","sizeBadge","toastShow"],"mappings":"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"}