import"./fest/dom.js";import"./fest/core.js";import"./fest/object.js";import{H as e}from"./fest/lure.js";async function t(t,n={}){console.log("[Print] Initializing print sub-app");const i=new URLSearchParams(window.location.search),r=n.initialMarkdown||i.get("content")||i.get("markdown-content")||i.get("text")||"",a=n.title||i.get("title")||"Document",o=n.autoPrint??"false"!==i.get("auto-print"),l="undefined"!=typeof window&&"print"in window,c=e`
    <div class="${n.className||"print-view"}">
      <div class="print-content markdown-body">
        ${await async function(e){if(!e.trim())return'<div class="no-content"><p>No content to display</p></div>';try{const{marked:t}=await import("./vendor/marked.js").then(e=>e.a);return t.parse(e,{breaks:!0,gfm:!0})}catch(t){return console.warn("[Print] Marked library not available, using basic renderer"),e.replace(/^### (.*$)/gim,"<h3>$1</h3>").replace(/^## (.*$)/gim,"<h2>$1</h2>").replace(/^# (.*$)/gim,"<h1>$1</h1>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/```([\s\S]*?)```/g,"<pre><code>$1</code></pre>").replace(/`([^`]+)`/g,"<code>$1</code>").replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2">$1</a>').replace(/^\* (.*$)/gim,"<li>$1</li>").replace(/^\d+\. (.*$)/gim,"<li>$1</li>").replace(/(<li>.*<\/li>)/s,"<ul>$1</ul>").replace(/\n\n/g,"</p><p>").replace(/\n/g,"<br>").replace(/^(.+?)(?=<\/p>|$)/g,"<p>$1</p>")}}(r)}
      </div>
    </div>
  `;if(t.appendChild(c),o&&r.trim()&&l){const e=i.get("print-delay")?parseInt(i.get("print-delay")):1500;setTimeout(()=>{console.log("[Print] Auto-printing document"),window.print()},e)}console.log("[Print] Print sub-app initialized",{title:a,contentLength:r.length,autoPrint:o,canPrint:l})}export{t as default};