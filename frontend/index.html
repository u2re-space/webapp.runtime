<!doctype html>
<html lang="ru" color-mode="user" data-scheme="auto">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, viewport-fit=cover, initial-scale=1.0, interactive-widget=overlays-content, user-scalable=no, maximum-scale=1" />

        <!---->
        <title>WebApp Runtime</title>

        <!---->
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
        <meta name="mobile-web-app-capable" content="yes" />

        <!-- @vite-ignore -->
        <meta name="theme-color" content="transparent" data-theme-color />
        <meta name="full-screen" content="yes" />
        <meta name="application-name" content="WebApp" />

        <!---->
        <meta property="og:locale" content="ru-RU" />
        <meta http-equiv="content-language" content="ru-RU" />

        <!---->
        <meta name="referrer" content="no-referrer" />

        <!-- -->
        <meta name="robots" content="noindex, nofollow" />

        <!-- -->
        <meta name="description" content="WebApp Runtime" />

        <!-- -->
        <meta name="keywords" content="WebApp, Runtime, HTML, CSS, JavaScript" />

        <!-- Prefetch wallpaper image -->
        <link fetchpriority="high" rel="prefetch" as="image" href="./assets/imgs/test.webp" />
        <link fetchpriority="high" rel="prefetch" as="image" href="./assets/imgs/test.jpg" />

        <!-- prefetch critical scripts -->
        <link fetchpriority="high" rel="prefetch" as="script" href="./apps/cw/index.js" />
        <link fetchpriority="high" rel="prefetch" as="script" href="./load.mjs" />
        <link fetchpriority="high" rel="prefetch" as="script" href="./vital.mjs" />

        <!-- -->
        <base href="./" />

        <!-- -->
        <script>
            WeakMap.prototype.getOrInsert ??= function (key, defaultValue) {
                if (!this.has(key)) {
                    this.set(key, defaultValue);
                }
                return this.get(key);
            };

            WeakMap.prototype.getOrInsertComputed ??= function (key, callbackFunction) {
                if (!this.has(key)) {
                    this.set(key, callbackFunction(key));
                }
                return this.get(key);
            };

            Map.prototype.getOrInsert ??= function (key, defaultValue) {
                if (!this.has(key)) {
                    this.set(key, defaultValue);
                }
                return this.get(key);
            };

            Map.prototype.getOrInsertComputed ??= function (key, callbackFunction) {
                if (!this.has(key)) {
                    this.set(key, callbackFunction(key));
                }
                return this.get(key);
            };
        </script>

        <!-- critical styles -->
        <style data-owner="runtime" data-type="system">
            /* ai-refactor: optimized/refactored at 2026-02-16T10:34:36Z */
            @layer ui-system {
                @layer base {
                    :where(:root) {
                        color-scheme: light dark;
                    }

                    :where(*, *::before, *::after) {
                        box-sizing: border-box;
                    }

                    :where(*):not(:defined) {
                        opacity: 0;
                        visibility: collapse;
                        pointer-events: none;
                    }

                    :where(link, head, script, style, meta) {
                        display: none !important;
                        pointer-events: none !important;
                    }

                    :where(html, body) {
                        inline-size: 100%;
                        min-block-size: 100%;
                        margin: 0;
                        padding: 0;
                        background: transparent;
                    }

                    @media screen {
                        html,
                        body {
                            padding: 0 !important;
                            margin: 0 !important;
                            box-sizing: border-box !important;
                            border: none !important;
                            outline: none !important;
                            overflow: hidden !important;
                        }

                        html {
                            inline-size: min(100cqi, 100dvi);
                            block-size: min(100cqb, 100dvb);
                            max-inline-size: min(100cqi, 100dvi);
                            max-block-size: min(100cqb, 100dvb);
                            min-inline-size: 100% !important;
                            min-block-size: 100% !important;
                            container-type: size;
                            contain: strict;
                        }

                        body {
                            position: relative;
                            display: grid;
                            grid-template-columns: minmax(0, 1fr);
                            grid-template-rows: minmax(0, 1fr);
                            place-content: stretch;
                            place-items: stretch;
                            align-content: start;
                            align-items: start;
                            inline-size: stretch;
                            block-size: stretch;
                            max-inline-size: max(100%, min(100cqi, 100dvi));
                            max-block-size: max(100%, min(100cqb, 100dvb));
                            min-inline-size: stretch;
                            min-block-size: max(100cqb, 100dvb);
                            overflow: hidden;
                            padding: 0;
                            margin: 0;
                            border: none 0 transparent;
                            outline: none 0 transparent;
                            container-type: size;
                            contain: strict;
                            pointer-events: auto;
                            inset-block-start: 0;
                            inset-block-end: auto;
                        }
                    }

                    @media print {
                        :where(body, html) {
                            place-content: start;
                            place-items: start;
                            text-align: start;
                            padding: 0;
                            margin: 0;
                            border: none;
                            outline: none;
                            box-shadow: none;
                            scrollbar-width: none;
                            scrollbar-color: transparent transparent;
                            -webkit-overflow-scrolling: touch;
                            font-family: var(--print-font-family);
                            min-inline-size: stretch !important;
                            inline-size: 100dvi !important;
                            max-inline-size: 100dvi !important;
                            font-size: 16px !important;
                        }

                        :where(body, html, :root) {
                            background-color: initial;
                            color: initial;
                            padding: 0 !important;
                            margin: 0 !important;
                            overflow-x: hidden !important;
                            overflow-y: auto !important;
                            container-type: inline-size !important;
                            border: 0 none transparent !important;
                            outline: 0 none transparent !important;
                        }

                        :where(body) {
                            min-block-size: 100dvb !important;
                            block-size: max-content !important;
                            min-inline-size: stretch !important;
                            inline-size: 100dvi !important;
                            max-inline-size: 100dvi !important;
                        }

                        :where(*):not(:defined) {
                            opacity: 0 !important;
                            visibility: collapse !important;
                            pointer-events: none !important;
                            display: none !important;
                        }

                        :where(link, head, script, style, meta) {
                            display: none !important;
                            pointer-events: none !important;
                            interactivity: inert !important;
                            user-select: none !important;
                            touch-action: none !important;
                            visibility: hidden !important;
                        }

                        :where(*) {
                            scrollbar-width: none;
                            -ms-overflow-style: none;
                        }

                        :where(*)::-webkit-scrollbar {
                            display: none;
                        }
                    }
                }

                @layer layout {
                    :where(body) {
                        display: grid;
                        grid-template-columns: minmax(0px, 1fr);
                        grid-template-rows: minmax(0px, 1fr);
                        min-block-size: 100dvb;
                        inline-size: 100%;
                        overflow: hidden;
                        background: transparent;
                    }

                    :where(body > #app) {
                        display: grid;
                        grid-template-columns: minmax(0px, 1fr);
                        grid-template-rows: minmax(0px, 1fr);
                        inline-size: 100%;
                        block-size: 100%;
                        min-inline-size: 0;
                        min-block-size: 0;
                        overflow: auto;
                        pointer-events: auto;
                    }

                    :where(#overlays) {
                        position: fixed;
                        inset: 0;
                        inline-size: 100dvi;
                        block-size: min(100dvb, var(--view-height, 100dvb));
                        pointer-events: none;
                        z-index: 9000;
                    }

                    :where(#filter) {
                        position: fixed;
                        inset: 0;
                        inline-size: 100%;
                        block-size: 100%;
                        max-inline-size: 100dvi;
                        max-block-size: 100dvb;
                        mix-blend-mode: multiply;
                        background-color: oklch(calc(var(--brightness, 1) * 0.4 + 0.6) calc(var(--night-mode, 0) * 0.05) 35);
                        pointer-events: none;
                        z-index: 9999999;
                        content-visibility: visible;
                    }

                    #app {
                        inline-size: 100%;
                        block-size: 100%;
                    }

                    @media screen {
                        #app,
                        body > #app {
                            position: relative;
                            display: grid;
                            grid-template-columns: minmax(0, 1fr);
                            grid-template-rows: minmax(0, 1fr);
                            place-content: stretch;
                            place-items: stretch;
                            grid-column: 1 / -1;
                            grid-row: 1 / -1;
                            inline-size: stretch;
                            block-size: stretch;
                            max-inline-size: stretch;
                            max-block-size: stretch;
                            min-inline-size: 0;
                            min-block-size: 0;
                            padding: 0;
                            margin: 0;
                            border: none 0 transparent;
                            outline: none 0 transparent;
                            overflow: hidden;
                            container-type: size;
                            contain: strict;
                            pointer-events: auto;
                        }

                        #app {
                            inset: auto;
                        }

                        body > #app {
                            position: absolute;
                            inset: 0;
                            inset-inline-end: auto;
                            inset-block-end: auto;
                            background-color: var(--c2-surface, var(--current, currentColor));
                        }

                        #overlays {
                            position: fixed;
                            inline-size: 100dvi;
                            block-size: min(100dvb, var(--view-height, 100dvb));
                            transition: block-size 100ms step-end;
                        }

                        #filter {
                            position: fixed;
                            inset: 0;
                            z-index: 9999999;
                            margin: 0;
                            padding: 0;
                            border: none 0 transparent;
                            outline: none 0 transparent;
                            min-inline-size: 0;
                            min-block-size: 0;
                            inline-size: stretch;
                            block-size: stretch;
                            max-inline-size: min(100%, min(100cqi, 100dvi));
                            max-block-size: min(100%, min(100cqb, 100dvb));
                            background-color: oklch(calc(var(--brightness, 1) * 0.4 + 0.6) calc(var(--night-mode, 0) * 0.05) 35);
                            pointer-events: none;
                            content-visibility: visible;
                            transform: translateZ(0);
                            mix-blend-mode: multiply;
                        }
                    }

                    @media print {
                        #app,
                        .app-shell,
                        .view-viewer,
                        .view-viewer__content,
                        .app-shell__content,
                        .markdown-body,
                        .markdown-viewer-content,
                        .result-content {
                            display: contents !important;
                            margin: 0 !important;
                            padding: 0 !important;
                            border: none !important;
                            outline: none !important;
                            box-shadow: none !important;
                            overflow: visible !important;
                            scrollbar-width: none !important;
                            scrollbar-color: transparent transparent !important;
                            -webkit-overflow-scrolling: touch !important;
                            page-break-after: avoid !important;
                            page-break-before: avoid !important;
                            break-after: avoid !important;
                            break-before: avoid !important;
                            contain: none !important;
                            container-type: normal !important;
                            content-visibility: visible !important;
                            visibility: visible !important;
                            opacity: 1 !important;
                            pointer-events: auto !important;
                            user-select: auto !important;
                            touch-action: auto !important;
                            cursor: auto !important;
                        }
                    }
                }

                @layer components {
                    #raw-md {
                        box-sizing: border-box;
                        position: absolute;
                        inset: 0;
                        margin: 0;
                        padding: 12px;
                        overflow: auto;
                        white-space: pre-wrap;
                        word-break: break-word;
                        font:
                            12px/1.5 ui-monospace,
                            SFMono-Regular,
                            Menlo,
                            Monaco,
                            Consolas,
                            "Liberation Mono",
                            "Courier New",
                            monospace;
                        color: rgba(255, 255, 255, 0.92);
                        background: rgba(0, 0, 0, 0.35);
                        pointer-events: auto;
                    }

                    @media screen {
                        #app:empty::before {
                            content: "Loading CrossWord..." !important;
                            position: absolute !important;
                            inset: 0 !important;
                            z-index: 9999 !important;
                            display: flex !important;
                            align-items: center !important;
                            justify-content: center !important;
                            inline-size: 100% !important;
                            block-size: 100% !important;
                            font-family:
                                system-ui,
                                -apple-system,
                                sans-serif !important;
                            font-size: 1.2rem !important;
                            color: #666 !important;
                            background: #1a1a1a !important;
                        }

                        .loading-spinner {
                            width: 40px;
                            height: 40px;
                            margin-bottom: 15px;
                            border: 4px solid rgba(255, 255, 255, 0.3);
                            border-top: 4px solid #007acc;
                            border-radius: 50%;
                            animation: spin 1s linear infinite;
                        }

                        .loading-message {
                            font-family: "Inter", sans-serif;
                            font-size: 1rem;
                            color: #e8e8e8;
                        }
                    }
                }

                @layer utilities {
                    @keyframes spin {
                        0% {
                            transform: rotate(0deg);
                        }

                        100% {
                            transform: rotate(360deg);
                        }
                    }
                }

                @layer overrides {
                    @media print {
                        :where(body, html, :root) > *:not([hidden], [aria-hidden="true"], [data-hidden]):not(markdown-viewer, #markdown-body, .view-markdown),
                        :where(body, html, :root) :where(#app, #raw-md),
                        :where(body, html, :root) :where(div, span, button, input, header, main, footer):not([hidden], [aria-hidden="true"], [data-hidden]):not(markdown-viewer, #markdown-body, .view-markdown) {
                            display: contents !important;
                            page-break-after: avoid !important;
                            page-break-before: avoid !important;
                            break-after: avoid !important;
                            break-before: avoid !important;
                        }

                        .view-viewer,
                        .view-viewer__content,
                        [data-viewer-content] {
                            display: contents !important;
                            page-break-after: avoid !important;
                            page-break-before: avoid !important;
                            break-after: avoid !important;
                            break-before: avoid !important;
                        }

                        .loading-spinner,
                        .loading-message,
                        [data-hidden],
                        [hidden],
                        [aria-hidden="true"],
                        .view-viewer__toolbar,
                        [data-viewer-toolbar],
                        button,
                        nav,
                        .app-shell__loading,
                        head,
                        .app-loading,
                        .app-shell__status,
                        #raw-md,
                        .markdown-viewer-raw,
                        .loading-spinner *:not(#app, .app-shell, .view-viewer, .view-viewer__content, .app-shell__content, .markdown-body, .markdown-viewer-content, .result-content),
                        .loading-message *:not(#app, .app-shell, .view-viewer, .view-viewer__content, .app-shell__content, .markdown-body, .markdown-viewer-content, .result-content),
                        [data-hidden] *:not(#app, .app-shell, .view-viewer, .view-viewer__content, .app-shell__content, .markdown-body, .markdown-viewer-content, .result-content),
                        [hidden] *:not(#app, .app-shell, .view-viewer, .view-viewer__content, .app-shell__content, .markdown-body, .markdown-viewer-content, .result-content),
                        [aria-hidden="true"] *:not(#app, .app-shell, .view-viewer, .view-viewer__content, .app-shell__content, .markdown-body, .markdown-viewer-content, .result-content),
                        .view-viewer__toolbar *:not(#app, .app-shell, .view-viewer, .view-viewer__content, .app-shell__content, .markdown-body, .markdown-viewer-content, .result-content),
                        [data-viewer-toolbar] *:not(#app, .app-shell, .view-viewer, .view-viewer__content, .app-shell__content, .markdown-body, .markdown-viewer-content, .result-content),
                        button *:not(#app, .app-shell, .view-viewer, .view-viewer__content, .app-shell__content, .markdown-body, .markdown-viewer-content, .result-content),
                        nav *:not(#app, .app-shell, .view-viewer, .view-viewer__content, .app-shell__content, .markdown-body, .markdown-viewer-content, .result-content),
                        .app-shell__loading *:not(#app, .app-shell, .view-viewer, .view-viewer__content, .app-shell__content, .markdown-body, .markdown-viewer-content, .result-content),
                        head *:not(#app, .app-shell, .view-viewer, .view-viewer__content, .app-shell__content, .markdown-body, .markdown-viewer-content, .result-content),
                        .app-loading *:not(#app, .app-shell, .view-viewer, .view-viewer__content, .app-shell__content, .markdown-body, .markdown-viewer-content, .result-content),
                        .app-shell__status *:not(#app, .app-shell, .view-viewer, .view-viewer__content, .app-shell__content, .markdown-body, .markdown-viewer-content, .result-content),
                        #raw-md *:not(#app, .app-shell, .view-viewer, .view-viewer__content, .app-shell__content, .markdown-body, .markdown-viewer-content, .result-content),
                        .markdown-viewer-raw *:not(#app, .app-shell, .view-viewer, .view-viewer__content, .app-shell__content, .markdown-body, .markdown-viewer-content, .result-content) {
                            display: none !important;
                            position: absolute !important;
                            inset: 0 !important;
                            z-index: -1 !important;
                            opacity: 0 !important;
                            inline-size: 0 !important;
                            block-size: 0 !important;
                            border: none !important;
                            outline: none !important;
                            box-shadow: none !important;
                            scrollbar-width: none !important;
                            scrollbar-color: transparent transparent !important;
                            overflow: hidden !important;
                            -webkit-overflow-scrolling: touch !important;
                            padding: 0 !important;
                            margin: 0 !important;
                            font: initial !important;
                            font-size: 0 !important;
                            font-weight: initial !important;
                            font-family: initial !important;
                            font-style: initial !important;
                            font-variant: initial !important;
                            line-height: 0 !important;
                            color: transparent !important;
                            background: transparent !important;
                            pointer-events: none !important;
                            user-select: none !important;
                            touch-action: none !important;
                            cursor: none !important;
                            visibility: collapse !important;
                            interactivity: inert !important;
                            contain: strict !important;
                            page-break-after: avoid !important;
                            page-break-before: avoid !important;
                            break-after: avoid !important;
                            break-before: avoid !important;
                        }
                    }
                }
            }
        </style>

        <!-- Critical resource hints -->
        <link rel="modulepreload" href="./apps/cw/index.js" fetchpriority="high" />
        <link rel="modulepreload" href="./load.mjs" />
        <link rel="modulepreload" href="./vital.mjs" />

        <!-- webpackIgnore: true-->
        <link rel="manifest" href="./apps/cw/pwa/manifest.json" />
        <link rel="apple-touch-icon" href="./favicon.png" />
        <link rel="icon" type="image/png" href="./favicon.png" />
        <link rel="icon" type="image/svg+xml" href="./favicon.svg" />

        <!-- Init script - deferred to not block parsing -->
        <script src="./init.mjs" defer></script>
    </head>

    <body>
        <div id="app" class="c2-surface"></div>
        <script src="./load.mjs" type="module" async defer></script>
    </body>
</html>
